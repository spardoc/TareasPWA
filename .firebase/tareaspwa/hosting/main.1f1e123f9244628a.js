"use strict";(self.webpackChunkTareasPWA=self.webpackChunkTareasPWA||[]).push([[179],{932:(Mi,Dn,Me)=>{Me.d(Dn,{$:()=>ng,A:()=>ie,G:()=>pt,K:()=>Mv,L:()=>Oo,N:()=>$r,P:()=>Ic,R:()=>Ag,U:()=>me,V:()=>Nd,W:()=>nc,X:()=>Ii,Y:()=>Ui,Z:()=>jr,_:()=>Lo,a:()=>Hi,a0:()=>kd,a1:()=>ac,a2:()=>$d,a3:()=>og,a4:()=>Vv,a5:()=>jn,a6:()=>Bo,a7:()=>ag,a8:()=>ja,a9:()=>Fv,aA:()=>Ke,aB:()=>Et,aC:()=>te,aD:()=>Wi,aE:()=>W,aF:()=>Oe,aG:()=>Xa,aH:()=>Mg,aI:()=>Ko,aJ:()=>Jt,aN:()=>gn,aQ:()=>ts,aa:()=>pe,ab:()=>$t,ac:()=>Ei,ad:()=>tr,ae:()=>$o,af:()=>Be,ag:()=>ug,ah:()=>pn,ak:()=>Ha,al:()=>Ts,am:()=>ns,ap:()=>rg,aq:()=>Wa,as:()=>w0,at:()=>b0,au:()=>Ft,av:()=>_e,aw:()=>k,ax:()=>Xe,ay:()=>Yo,az:()=>kg,b:()=>Uv,c:()=>Ds,d:()=>Pg,e:()=>Jv,f:()=>eI,g:()=>Wn,h:()=>dt,i:()=>_c,j:()=>zi,k:()=>Wg,l:()=>Kv,m:()=>fI,p:()=>Nt,r:()=>Qv,s:()=>bg,u:()=>xt});var T=Me(861),q=Me(58),x=Me(534),Ce=Me(879),ft=Me(582),Gt=Me(537);const Nt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const pt=function Te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},An=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new Ce.Yd("@firebase/auth");function Zt(f,...c){Fe.logLevel<=Ce.in.ERROR&&Fe.error(`Auth (${x.SDK_VERSION}): ${f}`,...c)}function Xe(f,...c){throw qe(f,...c)}function Et(f,...c){return qe(f,...c)}function xr(f,c,d){const p=Object.assign(Object.assign({},An()),{[c]:d});return new q.LL("auth","Firebase",p).create(c,{appName:f.name})}function mn(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&Xe(f,"argument-error"),xr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return rt.create(f,...c)}function te(f,c,...d){if(!f)throw qe(c,...d)}function ot(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Zt(c),new Error(c)}function Ft(f,c){f||ot(c)}function on(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function hn(){return"http:"===pi()||"https:"===pi()}function pi(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Or{constructor(c,d){this.shortDelay=c,this.longDelay=d,Ft(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function gi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(hn()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ni(f,c){Ft(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class L{static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},j=new Or(3e4,6e4);function V(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Q(f,c,d,p){return K.apply(this,arguments)}function K(){return(K=(0,T.Z)(function*(f,c,d,p,_={}){return ae(f,_,(0,T.Z)(function*(){let E={},P={};p&&("GET"===c?P=p:E={body:JSON.stringify(p)});const F=(0,q.xO)(Object.assign({key:f.config.apiKey},P)).slice(1),X=yield f._getAdditionalHeaders();return X["Content-Type"]="application/json",f.languageCode&&(X["X-Firebase-Locale"]=f.languageCode),L.fetch()(at(f,f.config.apiHost,d,F),Object.assign({method:c,headers:X,referrerPolicy:"no-referrer"},E))}))})).apply(this,arguments)}function ae(f,c,d){return Je.apply(this,arguments)}function Je(){return(Je=(0,T.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},$),c);try{const _=new bt(f),E=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const P=yield E.json();if("needConfirmation"in P)throw Kt(f,"account-exists-with-different-credential",P);if(E.ok&&!("errorMessage"in P))return P;{const F=E.ok?P.errorMessage:P.error.message,[X,ye]=F.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===X)throw Kt(f,"credential-already-in-use",P);if("EMAIL_EXISTS"===X)throw Kt(f,"email-already-in-use",P);if("USER_DISABLED"===X)throw Kt(f,"user-disabled",P);const Pe=p[X]||X.toLowerCase().replace(/[_\s]+/g,"-");if(ye)throw xr(f,Pe,ye);Xe(f,Pe)}}catch(_){if(_ instanceof q.ZR)throw _;Xe(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function de(f,c,d,p){return Se.apply(this,arguments)}function Se(){return(Se=(0,T.Z)(function*(f,c,d,p,_={}){const E=yield Q(f,c,d,p,_);return"mfaPendingCredential"in E&&Xe(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function at(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Ni(f.config,_):`${f.config.apiScheme}://${_}`}function Ut(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Et(this.auth,"network-request-failed")),j.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kt(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Et(f,c,p);return _.customData._tokenResponse=d,_}function bn(f){return void 0!==f&&void 0!==f.getResponse}function Sn(f){return void 0!==f&&void 0!==f.enterprise}class Un{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Ut(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function mi(){return(mi=(0,T.Z)(function*(f){return(yield Q(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xi(f,c){return et.apply(this,arguments)}function et(){return(et=(0,T.Z)(function*(f,c){return Q(f,"GET","/v2/recaptchaConfig",V(f,c))})).apply(this,arguments)}function ki(){return(ki=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function yi(){return(yi=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function kr(){return(kr=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Vr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function yt(){return(yt=(0,T.Z)(function*(f,c=!1){const d=(0,q.m9)(f),p=yield d.getIdToken(c),_=fn(p);te(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const E="object"==typeof _.firebase?_.firebase:void 0,P=E?.sign_in_provider;return{claims:_,token:p,authTime:Vr(Lr(_.auth_time)),issuedAtTime:Vr(Lr(_.iat)),expirationTime:Vr(Lr(_.exp)),signInProvider:P||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function Lr(f){return 1e3*Number(f)}function fn(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return Zt("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,q.tV)(d);return _?JSON.parse(_):(Zt("Failed to decode base64 JWT payload"),null)}catch(_){return Zt("Caught error parsing JWT payload as JSON",_?.toString()),null}}function Qt(f,c){return an.apply(this,arguments)}function an(){return(an=(0,T.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof q.ZR&&function Vi({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class Fi{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,T.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,T.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class vi{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rn(f){return _n.apply(this,arguments)}function _n(){return _n=(0,T.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield Qt(f,function Yn(f,c){return kr.apply(this,arguments)}(d,{idToken:p}));te(_?.users.length,d,"internal-error");const E=_.users[0];f._notifyReloadListener(E);const P=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?function ms(f){return f.map(c=>{var{providerId:d}=c,p=(0,ft._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(E.providerUserInfo):[],F=function xo(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,P),Pe=!!f.isAnonymous&&!(f.email&&E.passwordHash||F?.length),st={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:F,metadata:new vi(E.createdAt,E.lastLoginAt),isAnonymous:Pe};Object.assign(f,st)}),_n.apply(this,arguments)}function Ur(){return(Ur=(0,T.Z)(function*(f){const c=(0,q.m9)(f);yield Rn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Li(){return(Li=(0,T.Z)(function*(f,c){const d=yield ae(f,{},(0,T.Z)(function*(){const p=(0,q.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:E}=f.config,P=at(f,_,"/v1/token",`key=${E}`),F=yield f._getAdditionalHeaders();return F["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(P,{method:"POST",headers:F,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function D(){return(D=(0,T.Z)(function*(f,c){return Q(f,"POST","/v2/accounts:revokeToken",V(f,c))})).apply(this,arguments)}class I{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){te(c.idToken,"internal-error"),te(typeof c.idToken<"u","internal-error"),te(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Fa(f){const c=fn(f);return te(c,"internal-error"),te(typeof c.exp<"u","internal-error"),te(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,T.Z)(function*(){return te(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,T.Z)(function*(){const{accessToken:_,refreshToken:E,expiresIn:P}=yield function qs(f,c){return Li.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,E,Number(P))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:E}=d,P=new I;return p&&(te("string"==typeof p,"internal-error",{appName:c}),P.refreshToken=p),_&&(te("string"==typeof _,"internal-error",{appName:c}),P.accessToken=_),E&&(te("number"==typeof E,"internal-error",{appName:c}),P.expirationTime=E),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new I,this.toJSON())}_performRefresh(){return ot("not implemented")}}function w(f,c){te("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class v{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,E=(0,ft._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new vi(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,T.Z)(function*(){const p=yield Qt(d,d.stsTokenManager.getToken(d.auth,c));return te(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Bn(f){return yt.apply(this,arguments)}(this,c)}reload(){return function Jn(f){return Ur.apply(this,arguments)}(this)}_assign(c){this!==c&&(te(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new v(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,T.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield Rn(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,T.Z)(function*(){const d=yield c.getIdToken();return yield Qt(c,function Oi(f,c){return ki.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,E,P,F,X,ye,Pe;const st=null!==(p=d.displayName)&&void 0!==p?p:void 0,pr=null!==(_=d.email)&&void 0!==_?_:void 0,ss=null!==(E=d.phoneNumber)&&void 0!==E?E:void 0,iu=null!==(P=d.photoURL)&&void 0!==P?P:void 0,Gg=null!==(F=d.tenantId)&&void 0!==F?F:void 0,ea=null!==(X=d._redirectEventId)&&void 0!==X?X:void 0,bs=null!==(ye=d.createdAt)&&void 0!==ye?ye:void 0,Zg=null!==(Pe=d.lastLoginAt)&&void 0!==Pe?Pe:void 0,{uid:xc,emailVerified:vh,isAnonymous:ta,providerData:Ih,stsTokenManager:rr}=d;te(xc&&rr,c,"internal-error");const _I=I.fromJSON(this.name,rr);te("string"==typeof xc,c,"internal-error"),w(st,c.name),w(pr,c.name),te("boolean"==typeof vh,c,"internal-error"),te("boolean"==typeof ta,c,"internal-error"),w(ss,c.name),w(iu,c.name),w(Gg,c.name),w(ea,c.name),w(bs,c.name),w(Zg,c.name);const Pn=new v({uid:xc,auth:c,email:pr,emailVerified:vh,displayName:st,isAnonymous:ta,photoURL:iu,phoneNumber:ss,tenantId:Gg,stsTokenManager:_I,createdAt:bs,lastLoginAt:Zg});return Ih&&Array.isArray(Ih)&&(Pn.providerData=Ih.map(Eh=>Object.assign({},Eh))),ea&&(Pn._redirectEventId=ea),Pn}static _fromIdTokenResponse(c,d,p=!1){return(0,T.Z)(function*(){const _=new I;_.updateFromServerResponse(d);const E=new v({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield Rn(E),E})()}}const A=new Map;function W(f){Ft(f instanceof Function,"Expected a class definition");let c=A.get(f);return c?(Ft(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,A.set(f,c),c)}const me=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,T.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,T.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,T.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function Oe(f,c,d){return`firebase:${f}:${c}:${d}`}class lt{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:E}=this.auth;this.fullUserKey=Oe(this.userKey,_.apiKey,E),this.fullPersistenceKey=Oe("persistence",_.apiKey,E),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,T.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?v._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,T.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,T.Z)(function*(){if(!d.length)return new lt(W(me),c,p);const _=(yield Promise.all(d.map(function(){var ye=(0,T.Z)(function*(Pe){if(yield Pe._isAvailable())return Pe});return function(Pe){return ye.apply(this,arguments)}}()))).filter(ye=>ye);let E=_[0]||W(me);const P=Oe(p,c.config.apiKey,c.name);let F=null;for(const ye of d)try{const Pe=yield ye._get(P);if(Pe){const st=v._fromJSON(c,Pe);ye!==E&&(F=st),E=ye;break}}catch{}const X=_.filter(ye=>ye._shouldAllowMigration);return E._shouldAllowMigration&&X.length?(E=X[0],F&&(yield E._set(P,F.toJSON())),yield Promise.all(d.map(function(){var ye=(0,T.Z)(function*(Pe){if(Pe!==E)try{yield Pe._remove(P)}catch{}});return function(Pe){return ye.apply(this,arguments)}}())),new lt(E,c,p)):new lt(E,c,p)})()}}function fe(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Gs(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Dt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(R(c))return"Blackberry";if(ee(c))return"Webos";if(De(c))return"Safari";if((c.includes("chrome/")||Vn(c))&&!c.includes("edge/"))return"Chrome";if(k(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Dt(f=(0,q.z$)()){return/firefox\//i.test(f)}function De(f=(0,q.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Vn(f=(0,q.z$)()){return/crios\//i.test(f)}function Gs(f=(0,q.z$)()){return/iemobile/i.test(f)}function k(f=(0,q.z$)()){return/android/i.test(f)}function R(f=(0,q.z$)()){return/blackberry/i.test(f)}function ee(f=(0,q.z$)()){return/webos/i.test(f)}function _e(f=(0,q.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Ke(f=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function Yt(f=(0,q.z$)()){return _e(f)||k(f)||ee(f)||R(f)||/windows phone/i.test(f)||Gs(f)}function Qe(f,c=[]){let d;switch(f){case"Browser":d=fe((0,q.z$)());break;case"Worker":d=`${fe((0,q.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${x.SDK_VERSION}/${p}`}class La{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=E=>new Promise((P,F)=>{try{P(c(E))}catch(X){F(X)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,T.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const E of p)try{E()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function Id(){return(Id=(0,T.Z)(function*(f,c={}){return Q(f,"GET","/v2/passwordPolicy",V(f,c))})).apply(this,arguments)}class Br{constructor(c){var d,p,_,E;const P=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=P.minPasswordLength)&&void 0!==d?d:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,E,P,F;const X={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,X),this.validatePasswordCharacterOptions(c,X),X.isValid&&(X.isValid=null===(d=X.meetsMinPasswordLength)||void 0===d||d),X.isValid&&(X.isValid=null===(p=X.meetsMaxPasswordLength)||void 0===p||p),X.isValid&&(X.isValid=null===(_=X.containsLowercaseLetter)||void 0===_||_),X.isValid&&(X.isValid=null===(E=X.containsUppercaseLetter)||void 0===E||E),X.isValid&&(X.isValid=null===(P=X.containsNumericCharacter)||void 0===P||P),X.isValid&&(X.isValid=null===(F=X.containsNonAlphanumericCharacter)||void 0===F||F),X}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class f0{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bv(this),this.idTokenSubscription=new bv(this),this.beforeStateQueue=new La(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=W(d)),this._initializationPromise=this.queue((0,T.Z)(function*(){var _,E;if(!p._deleted&&(p.persistenceManager=yield lt.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,T.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,T.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let E=_,P=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const F=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,X=E?._redirectEventId,ye=yield d.tryRedirectSignIn(c);(!F||F===X)&&ye?.user&&(E=ye.user,P=!0)}if(!E)return d.directlySetCurrentUser(null);if(!E._redirectEventId){if(P)try{yield d.beforeStateQueue.runMiddleware(E)}catch(F){E=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(F))}return E?d.reloadAndSetCurrentUserOrClear(E):d.directlySetCurrentUser(null)}return te(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===E._redirectEventId?d.directlySetCurrentUser(E):d.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var d=this;return(0,T.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,T.Z)(function*(){try{yield Rn(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Le(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,T.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,T.Z)(function*(){const p=c?(0,q.m9)(c):null;return p&&te(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,T.Z)(function*(){if(!p._deleted)return c&&te(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,T.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,T.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,T.Z)(function*(){yield d.assertedPersistence.setPersistence(W(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,T.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,T.Z)(function*(){const d=yield function h0(f){return Id.apply(this,arguments)}(c),p=new Br(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new q.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,T.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function S(f,c){return D.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,T.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,T.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&W(c)||d._popupRedirectResolver;te(p,d,"argument-error"),d.redirectPersistenceManager=yield lt.create(d,[W(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,T.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,T.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,T.Z)(function*(){if(c===d.currentUser)return d.queue((0,T.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const E="function"==typeof d?d:d.next.bind(d);let P=!1;const F=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(F,this,"internal-error"),F.then(()=>{P||E(this.currentUser)}),"function"==typeof d){const X=c.addObserver(d,p,_);return()=>{P=!0,X()}}{const X=c.addObserver(d);return()=>{P=!0,X()}}}directlySetCurrentUser(c){var d=this;return(0,T.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Qe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,T.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,T.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function kn(f,...c){Fe.logLevel<=Ce.in.WARN&&Fe.warn(`Auth (${x.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Jt(f){return(0,q.m9)(f)}class bv{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,q.ne)(d=>this.observer=d)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gp(f){return new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const E=Et("internal-error");E.customData=_,d(E)},p.type="text/javascript",p.charset="UTF-8",function Zs(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)})}function Sv(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Pv{constructor(c){this.type="recaptcha-enterprise",this.auth=Jt(c)}verify(c="verify",d=!1){var p=this;return(0,T.Z)(function*(){function E(){return E=(0,T.Z)(function*(F){if(!d){if(null==F.tenantId&&null!=F._agentRecaptchaConfig)return F._agentRecaptchaConfig.siteKey;if(null!=F.tenantId&&void 0!==F._tenantRecaptchaConfigs[F.tenantId])return F._tenantRecaptchaConfigs[F.tenantId].siteKey}return new Promise(function(){var X=(0,T.Z)(function*(ye,Pe){xi(F,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const pr=new Un(st);return null==F.tenantId?F._agentRecaptchaConfig=pr:F._tenantRecaptchaConfigs[F.tenantId]=pr,ye(pr.siteKey)}Pe(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{Pe(st)})});return function(ye,Pe){return X.apply(this,arguments)}}())}),E.apply(this,arguments)}function P(F,X,ye){const Pe=window.grecaptcha;Sn(Pe)?Pe.enterprise.ready(()=>{Pe.enterprise.execute(F,{action:c}).then(st=>{X(st)}).catch(()=>{X("NO_RECAPTCHA")})}):ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((F,X)=>{(function _(F){return E.apply(this,arguments)})(p.auth).then(ye=>{if(!d&&Sn(window.grecaptcha))P(ye,F,X);else{if(typeof window>"u")return void X(new Error("RecaptchaVerifier is only supported in browser"));Gp("https://www.google.com/recaptcha/enterprise.js?render="+ye).then(()=>{P(ye,F,X)}).catch(Pe=>{X(Pe)})}}).catch(ye=>{X(ye)})})})()}}function Zp(f,c,d){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,T.Z)(function*(f,c,d,p=!1){const _=new Pv(f);let E;try{E=yield _.verify(d)}catch{E=yield _.verify(d,!0)}const P=Object.assign({},c);return Object.assign(P,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function Xn(f,c,d,p){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,T.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield Zp(f,c,d,"getOobCode"===d);return p(f,E)}return p(f,c).catch(function(){var E=(0,T.Z)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const F=yield Zp(f,c,d,"getOobCode"===d);return p(f,F)}return Promise.reject(P)});return function(P){return E.apply(this,arguments)}}())}),Ne.apply(this,arguments)}function Mv(f,c,d){const p=Jt(f);te(p._canInitEmulator,p,"emulator-config-failed"),te(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,E=lr(c),{host:P,port:F}=function Gu(f){const c=lr(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const E=_[1];return{host:E,port:Yp(p.substr(E.length+1))}}{const[E,P]=p.split(":");return{host:E,port:Yp(P)}}}(c);p.config.emulator={url:`${E}//${P}${null===F?"":`:${F}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:P,port:F,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Jp(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function lr(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function Yp(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class Oo{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return ot("not implemented")}_getIdTokenResponse(c){return ot("not implemented")}_linkToIdToken(c,d){return ot("not implemented")}_getReauthenticationResolver(c){return ot("not implemented")}}function Ua(f,c){return ko.apply(this,arguments)}function ko(){return(ko=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:resetPassword",V(f,c))})).apply(this,arguments)}function Zu(){return(Zu=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Nv(f,c){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Ku(){return(Ku=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",V(f,c))})).apply(this,arguments)}function wr(f,c){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithPassword",V(f,c))})).apply(this,arguments)}function Cd(f,c){return At.apply(this,arguments)}function At(){return(At=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendOobCode",V(f,c))})).apply(this,arguments)}function Xp(){return(Xp=(0,T.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function ue(f,c){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,T.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function Dd(f,c){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,T.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function bd(){return(bd=(0,T.Z)(function*(f,c){return Cd(f,c)})).apply(this,arguments)}function eg(){return(eg=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}function tg(){return(tg=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithEmailLink",V(f,c))})).apply(this,arguments)}class Ju extends Oo{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new Ju(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new Ju(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,T.Z)(function*(){switch(d.signInMethod){case"password":return Xn(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",wr);case"emailLink":return function Sd(f,c){return eg.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:Xe(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,T.Z)(function*(){switch(p.signInMethod){case"password":return Xn(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Nv);case"emailLink":return function v0(f,c){return tg.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:Xe(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function _s(f,c){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithIdp",V(f,c))})).apply(this,arguments)}class $r extends Oo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new $r(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):Xe("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,E=(0,ft._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const P=new $r(p,_);return P.idToken=E.idToken||void 0,P.accessToken=E.accessToken||void 0,P.secret=E.secret,P.nonce=E.nonce,P.pendingToken=E.pendingToken||null,P}_getIdTokenResponse(c){return _s(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,_s(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,_s(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,q.xO)(d)}return c}}function Pd(){return(Pd=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:sendVerificationCode",V(f,c))})).apply(this,arguments)}function Xu(){return(Xu=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c))})).apply(this,arguments)}function Md(){return(Md=(0,T.Z)(function*(f,c){const d=yield de(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,c));if(d.temporaryProof)throw Kt(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const ys={USER_NOT_FOUND:"user-not-found"};function oe(){return(oe=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithPhoneNumber",V(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),ys)})).apply(this,arguments)}class vs extends Oo{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new vs({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new vs({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Ov(f,c){return Xu.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function Vo(f,c){return Md.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function kv(f,c){return oe.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}=c;return p||d||_||E?new vs({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}):null}}class Qs{constructor(c){var d,p,_,E,P,F;const X=(0,q.zd)((0,q.pd)(c)),ye=null!==(d=X.apiKey)&&void 0!==d?d:null,Pe=null!==(p=X.oobCode)&&void 0!==p?p:null,st=function we(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=X.mode)&&void 0!==_?_:null);te(ye&&Pe&&st,"argument-error"),this.apiKey=ye,this.operation=st,this.code=Pe,this.continueUrl=null!==(E=X.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(P=X.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(F=X.tenantId)&&void 0!==F?F:null}static parseLink(c){const d=function ec(f){const c=(0,q.zd)((0,q.pd)(f)).link,d=c?(0,q.zd)((0,q.pd)(c)).deep_link_id:null,p=(0,q.zd)((0,q.pd)(f)).deep_link_id;return(p?(0,q.zd)((0,q.pd)(p)).link:null)||p||d||c||f}(c);try{return new Qs(d)}catch{return null}}}let Nd=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return Ju._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=Qs.parseLink(p);return te(_,"argument-error"),Ju._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class es{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Fo extends es{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class jr extends Fo{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return te("providerId"in d&&"signInMethod"in d,"argument-error"),$r._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return te(c.idToken||c.accessToken,"argument-error"),$r._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return jr.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return jr.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:E,nonce:P,providerId:F}=c;if(!p&&!_&&!d&&!E||!F)return null;try{return new jr(F)._credential({idToken:d,accessToken:p,nonce:P,pendingToken:E})}catch{return null}}}let nc=(()=>{class f extends Fo{constructor(){super("facebook.com")}static credential(d){return $r._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Ii=(()=>{class f extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return $r._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Ui=(()=>{class f extends Fo{constructor(){super("github.com")}static credential(d){return $r._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class ts extends Oo{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return _s(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,_s(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,_s(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:E}=d;return p&&_&&E&&p===_?new ts(p,E):null}static _create(c,d){return new ts(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Lo extends es{constructor(c){te(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Lo.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Lo.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=ts.fromJSON(c);return te(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return ts._create(p,d)}catch{return null}}}let ng=(()=>{class f extends Fo{constructor(){super("twitter.com")}static credential(d,p){return $r._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Bi(f,c){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signUp",V(f,c))})).apply(this,arguments)}class Hr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,T.Z)(function*(){const E=yield v._fromIdTokenResponse(c,p,_),P=Od(p);return new Hr({user:E,providerId:P,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,T.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=Od(p);return new Hr({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function Od(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function kd(f){return rc.apply(this,arguments)}function rc(){return(rc=(0,T.Z)(function*(f){var c;const d=Jt(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new Hr({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield Bi(d,{returnSecureToken:!0}),_=yield Hr._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class $a extends q.ZR{constructor(c,d,p,_){var E;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,$a.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new $a(c,d,p,_)}}function Uo(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?$a._fromErrorAndOperation(f,E,c,p):E})}function Vd(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function rg(f,c){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f);yield sc(!0,d,c);const{providerUserInfo:p}=yield function _i(f,c){return yi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=Vd(p||[]);return d.providerData=d.providerData.filter(E=>_.has(E.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Fd.apply(this,arguments)}function ic(f,c){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,T.Z)(function*(f,c,d=!1){const p=yield Qt(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return Hr._forOperation(f,"link",p)})).apply(this,arguments)}function sc(f,c,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,T.Z)(function*(f,c,d){yield Rn(c);const _=!1===f?"provider-already-linked":"no-such-provider";te(Vd(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function ig(f,c){return oc.apply(this,arguments)}function oc(){return(oc=(0,T.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const E=yield Qt(f,Uo(p,_,c,f),d);te(E.idToken,p,"internal-error");const P=fn(E.idToken);te(P,p,"internal-error");const{sub:F}=P;return te(f.uid===F,p,"user-mismatch"),Hr._forOperation(f,_,E)}catch(E){throw"auth/user-not-found"===E?.code&&Xe(p,"user-mismatch"),E}})).apply(this,arguments)}function sg(f,c){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,T.Z)(function*(f,c,d=!1){const p="signIn",_=yield Uo(f,p,c),E=yield Hr._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function ac(f,c){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,T.Z)(function*(f,c){return sg(Jt(f),c)})).apply(this,arguments)}function $d(f,c){return jd.apply(this,arguments)}function jd(){return(jd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f);return yield sc(!1,d,c.providerId),ic(d,c)})).apply(this,arguments)}function og(f,c){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,T.Z)(function*(f,c){return ig((0,q.m9)(f),c)})).apply(this,arguments)}function zd(){return(zd=(0,T.Z)(function*(f,c){return de(f,"POST","/v1/accounts:signInWithCustomToken",V(f,c))})).apply(this,arguments)}function Vv(f,c){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,T.Z)(function*(f,c){const d=Jt(f),p=yield function Js(f,c){return zd.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield Hr._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),Wd.apply(this,arguments)}class $n{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?qd._fromServerResponse(c,d):"totpInfo"in d?uc._fromServerResponse(c,d):Xe(c,"internal-error")}}class qd extends $n{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new qd(d)}}class uc extends $n{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new uc(d)}}function xe(f,c,d){var p;te((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),te(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(te(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(te(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function er(f){return it.apply(this,arguments)}function it(){return(it=(0,T.Z)(function*(f){const c=Jt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function jn(f,c,d){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,T.Z)(function*(f,c,d){const p=Jt(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&xe(p,_,d),yield Xn(p,_,"getOobCode",ue)})).apply(this,arguments)}function Bo(f,c,d){return dr.apply(this,arguments)}function dr(){return dr=(0,T.Z)(function*(f,c,d){yield Ua((0,q.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,T.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&er(f),_});return function(_){return p.apply(this,arguments)}}())}),dr.apply(this,arguments)}function ag(f,c){return cc.apply(this,arguments)}function cc(){return cc=(0,T.Z)(function*(f,c){yield function Td(f,c){return Ku.apply(this,arguments)}((0,q.m9)(f),{oobCode:c})}),cc.apply(this,arguments)}function ja(f,c){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f),p=yield Ua(d,{oobCode:c}),_=p.requestType;switch(te(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(p.mfaInfo,d,"internal-error");default:te(p.email,d,"internal-error")}let E=null;return p.mfaInfo&&(E=$n._fromServerResponse(Jt(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:_}})).apply(this,arguments)}function Fv(f,c){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,T.Z)(function*(f,c){const{data:d}=yield ja((0,q.m9)(f),c);return d.email})).apply(this,arguments)}function pe(f,c,d){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,T.Z)(function*(f,c,d){const p=Jt(f),P=yield Xn(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bi).catch(X=>{throw"auth/password-does-not-meet-requirements"===X.code&&er(f),X}),F=yield Hr._fromIdTokenResponse(p,"signIn",P);return yield p._updateCurrentUser(F.user),F})).apply(this,arguments)}function $t(f,c,d){return ac((0,q.m9)(f),Nd.credential(c,d)).catch(function(){var p=(0,T.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&er(f),_});return function(_){return p.apply(this,arguments)}}())}function Ei(f,c,d){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,T.Z)(function*(f,c,d){const p=Jt(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(P,F){te(F.handleCodeInApp,p,"argument-error"),F&&xe(p,P,F)})(_,d),yield Xn(p,_,"getOobCode",Dd)})).apply(this,arguments)}function tr(f,c){const d=Qs.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function $o(f,c,d){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=Nd.credentialWithLink(c,d||on());return te(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),ac(p,_)})).apply(this,arguments)}function Es(){return(Es=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:createAuthUri",V(f,c))})).apply(this,arguments)}function Be(f,c){return eo.apply(this,arguments)}function eo(){return eo=(0,T.Z)(function*(f,c){const p={identifier:c,continueUri:hn()?on():"http://localhost"},{signinMethods:_}=yield function Is(f,c){return Es.apply(this,arguments)}((0,q.m9)(f),p);return _||[]}),eo.apply(this,arguments)}function ug(f,c){return ws.apply(this,arguments)}function ws(){return ws=(0,T.Z)(function*(f,c){const d=(0,q.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&xe(d.auth,_,c);const{email:E}=yield function y0(f,c){return Xp.apply(this,arguments)}(d.auth,_);E!==f.email&&(yield f.reload())}),ws.apply(this,arguments)}function pn(f,c,d){return to.apply(this,arguments)}function to(){return to=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&xe(p.auth,E,d);const{email:P}=yield function Ad(f,c){return bd.apply(this,arguments)}(p.auth,E);P!==f.email&&(yield f.reload())}),to.apply(this,arguments)}function ii(){return(ii=(0,T.Z)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ha(f,c){return lc.apply(this,arguments)}function lc(){return lc=(0,T.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,q.m9)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},P=yield Qt(p,function jo(f,c){return ii.apply(this,arguments)}(p.auth,E));p.displayName=P.displayName||null,p.photoURL=P.photoUrl||null;const F=p.providerData.find(({providerId:X})=>"password"===X);F&&(F.displayName=p.displayName,F.photoURL=p.photoURL),yield p._updateTokensIfNecessary(P)}),lc.apply(this,arguments)}function Ts(f,c){return Ho((0,q.m9)(f),c,null)}function ns(f,c){return Ho((0,q.m9)(f),null,c)}function Ho(f,c,d){return no.apply(this,arguments)}function no(){return no=(0,T.Z)(function*(f,c,d){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),d&&(E.password=d);const P=yield Qt(f,function wd(f,c){return Zu.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(P,!0)}),no.apply(this,arguments)}class za{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class dc extends za{constructor(c,d,p,_){super(c,d,p),this.username=_}}class cg extends za{constructor(c,d){super(c,"facebook.com",d)}}class $i extends dc{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class hc extends za{constructor(c,d){super(c,"google.com",d)}}class zo extends dc{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Wa(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function nt(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const P=null===(d=null===(c=fn(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(P)return new za(E,"anonymous"!==P&&"custom"!==P?P:null)}if(!p)return null;switch(p){case"facebook.com":return new cg(E,_);case"github.com":return new $i(E,_);case"google.com":return new hc(E,_);case"twitter.com":return new zo(E,_,f.screenName||null);case"custom":case"anonymous":return new za(E,null);default:return new za(E,p,_)}}(d)}class io{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new io("enroll",c,d)}static _fromMfaPendingCredential(c){return new io("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return io._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return io._fromIdtoken(c.multiFactorSession.idToken)}return null}}class dg{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=Jt(c),_=d.customData._serverResponse,E=(_.mfaInfo||[]).map(F=>$n._fromServerResponse(p,F));te(_.mfaPendingCredential,p,"internal-error");const P=io._fromMfaPendingCredential(_.mfaPendingCredential);return new dg(P,E,function(){var F=(0,T.Z)(function*(X){const ye=yield X._process(p,P);delete _.mfaInfo,delete _.mfaPendingCredential;const Pe=Object.assign(Object.assign({},_),{idToken:ye.idToken,refreshToken:ye.refreshToken});switch(d.operationType){case"signIn":const st=yield Hr._fromIdTokenResponse(p,d.operationType,Pe);return yield p._updateCurrentUser(st.user),st;case"reauthenticate":return te(d.user,p,"internal-error"),Hr._forOperation(d.user,d.operationType,Pe);default:Xe(p,"internal-error")}});return function(X){return F.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,T.Z)(function*(){return d.signInResolver(c)})()}}function w0(f,c){var d;const p=(0,q.m9)(f),_=c;return te(c.customData.operationType,p,"argument-error"),te(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),dg._fromError(p,_)}class hg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>$n._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new hg(c)}getSession(){var c=this;return(0,T.Z)(function*(){return io._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,T.Z)(function*(){const _=c,E=yield p.getSession(),P=yield Qt(p.user,_._process(p.user.auth,E,d));return yield p.user._updateTokensIfNecessary(P),p.user.reload()})()}unenroll(c){var d=this;return(0,T.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const E=yield Qt(d.user,function A0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:withdraw",V(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:P})=>P!==p),yield d.user._updateTokensIfNecessary(E),yield d.user.reload()}catch(E){throw E}})()}}const fg=new WeakMap;function b0(f){const c=(0,q.m9)(f);return fg.has(c)||fg.set(c,hg._fromUser(c)),fg.get(c)}const Yd="__sak";class Lv{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Uv=(()=>{class f extends Lv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pg(){const f=(0,q.z$)();return De(f)||_e(f)}()&&function Ee(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),E=this.localCache[p];_!==E&&d(p,E,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((F,X,ye)=>{this.notifyListeners(F,ye)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const F=this.storage.getItem(_);if(d.newValue!==F)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const E=()=>{const F=this.storage.getItem(_);!p&&this.localCache[_]===F||this.notifyListeners(_,F)},P=this.storage.getItem(_);!function H(){return(0,q.w1)()&&10===document.documentMode}()||P===d.newValue||d.newValue===d.oldValue?E():setTimeout(E,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,E=this;return(0,T.Z)(function*(){yield _().call(E,d,p),E.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,T.Z)(function*(){const E=yield p().call(_,d);return _.localCache[d]=JSON.stringify(E),E})()}_remove(d){var p=()=>super._remove,_=this;return(0,T.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),Hi=(()=>{class f extends Lv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let P0=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(E=>E.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,T.Z)(function*(){const _=d,{eventId:E,eventType:P,data:F}=_.data,X=p.handlersMap[P];if(!X?.size)return;_.ports[0].postMessage({status:"ack",eventId:E,eventType:P});const ye=Array.from(X).map(function(){var st=(0,T.Z)(function*(pr){return pr(_.origin,F)});return function(pr){return st.apply(this,arguments)}}()),Pe=yield function R0(f){return Promise.all(f.map(function(){var c=(0,T.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(ye);_.ports[0].postMessage({status:"done",eventId:E,eventType:P,response:Pe})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function gn(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class fc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,T.Z)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let P,F;return new Promise((X,ye)=>{const Pe=gn("",20);E.port1.start();const st=setTimeout(()=>{ye(new Error("unsupported_event"))},p);F={messageChannel:E,onMessage(pr){const ss=pr;if(ss.data.eventId===Pe)switch(ss.data.status){case"ack":clearTimeout(st),P=setTimeout(()=>{ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),X(ss.data.response);break;default:clearTimeout(st),clearTimeout(P),ye(new Error("invalid_response"))}}},_.handlers.add(F),E.port1.addEventListener("message",F.onMessage),_.target.postMessage({eventType:c,eventId:Pe,data:d},[E.port2])}).finally(()=>{F&&_.removeMessageHandler(F)})})()}}function vt(){return window}function pc(){return typeof vt().WorkerGlobalScope<"u"&&"function"==typeof vt().importScripts}function gc(){return(gc=(0,T.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const mc="firebaseLocalStorageDb",qa="firebaseLocalStorage",eh="fbase_key";class qo{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function so(f,c){return f.transaction([qa],c?"readwrite":"readonly").objectStore(qa)}function Cs(){const f=indexedDB.open(mc,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(qa,{keyPath:eh})}catch(_){d(_)}}),f.addEventListener("success",(0,T.Z)(function*(){const p=f.result;p.objectStoreNames.contains(qa)?c(p):(p.close(),yield function Ga(){const f=indexedDB.deleteDatabase(mc);return new qo(f).toPromise()}(),c(yield Cs()))}))})}function th(f,c,d){return vg.apply(this,arguments)}function vg(){return(vg=(0,T.Z)(function*(f,c,d){const p=so(f,!0).put({[eh]:c,value:d});return new qo(p).toPromise()})).apply(this,arguments)}function Ig(){return(Ig=(0,T.Z)(function*(f,c){const d=so(f,!1).get(c),p=yield new qo(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Eg(f,c){const d=so(f,!0).delete(c);return new qo(d).toPromise()}const _c=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,T.Z)(function*(){return d.db||(d.db=yield Cs()),d.db})()}_withRetries(d){var p=this;return(0,T.Z)(function*(){let _=0;for(;;)try{const E=yield p._openDb();return yield d(E)}catch(E){if(_++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,T.Z)(function*(){return pc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,T.Z)(function*(){d.receiver=P0._getInstance(function yg(){return pc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,T.Z)(function*(_,E){return{keyProcessed:(yield d._poll()).includes(E.key)}});return function(_,E){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,T.Z)(function*(_,E){return["keyChanged"]});return function(_,E){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,T.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function _g(){return gc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new fc(d.activeServiceWorker);const E=yield d.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(_=E[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,T.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Jd(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Cs();return yield th(d,Yd,"1"),yield Eg(d,Yd),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,T.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,T.Z)(function*(){return _._withPendingWrite((0,T.Z)(function*(){return yield _._withRetries(E=>th(E,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,T.Z)(function*(){const _=yield p._withRetries(E=>function M0(f,c){return Ig.apply(this,arguments)}(E,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,T.Z)(function*(){return p._withPendingWrite((0,T.Z)(function*(){return yield p._withRetries(_=>Eg(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,T.Z)(function*(){const p=yield d._withRetries(P=>{const F=so(P,!1).getAll();return new qo(F).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],E=new Set;for(const{fbase_key:P,value:F}of p)E.add(P),JSON.stringify(d.localCache[P])!==JSON.stringify(F)&&(d.notifyListeners(P,F),_.push(P));for(const P of Object.keys(d.localCache))d.localCache[P]&&!E.has(P)&&(d.notifyListeners(P,null),_.push(P));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Za=1e12;class wg{constructor(c){this.auth=c,this.counter=Za,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new zv(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Za;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Za))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,T.Z)(function*(){var p;return null===(p=d._widgets.get(c||Za))||void 0===p||p.execute(),""})()}}class zv{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;te(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Wv(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rh=Sv("rcb"),Tg=new Or(3e4,6e4);class Cg{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=vt().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return te(function Gv(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&bn(vt().grecaptcha)?Promise.resolve(vt().grecaptcha):new Promise((p,_)=>{const E=vt().setTimeout(()=>{_(Et(c,"network-request-failed"))},Tg.get());vt()[rh]=()=>{vt().clearTimeout(E),delete vt()[rh];const F=vt().grecaptcha;if(!F||!bn(F))return void _(Et(c,"internal-error"));const X=F.render;F.render=(ye,Pe)=>{const st=X(ye,Pe);return this.counter++,st},this.hostLanguage=d,p(F)},Gp(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:rh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(E),_(Et(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=vt().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class k0{load(c){return(0,T.Z)(function*(){return new wg(c)})()}clearedOneInstance(){}}const Dg="recaptcha",si={theme:"light",type:"image"};class Ag{constructor(c,d,p=Object.assign({},si)){this.parameters=p,this.type=Dg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jt(c),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;te(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new k0:new Cg,this.validateStartingState()}verify(){var c=this;return(0,T.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(E=>{const P=F=>{F&&(c.tokenChangeListeners.delete(P),E(F))};c.tokenChangeListeners.add(P),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=vt()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,T.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,T.Z)(function*(){te(hn()&&!pc(),c.auth,"internal-error"),yield function Zv(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Er(f){return mi.apply(this,arguments)}(c.auth);te(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ih{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=vs._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function bg(f,c,d){return yc.apply(this,arguments)}function yc(){return(yc=(0,T.Z)(function*(f,c,d){const p=Jt(f),_=yield Qa(p,c,(0,q.m9)(d));return new ih(_,E=>ac(p,E))})).apply(this,arguments)}function Kv(f,c,d){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);yield sc(!1,p,"phone");const _=yield Qa(p.auth,c,(0,q.m9)(d));return new ih(_,E=>$d(p,E))})).apply(this,arguments)}function Qv(f,c,d){return oi.apply(this,arguments)}function oi(){return(oi=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f),_=yield Qa(p.auth,c,(0,q.m9)(d));return new ih(_,E=>og(p,E))})).apply(this,arguments)}function Qa(f,c,d){return vc.apply(this,arguments)}function vc(){return vc=(0,T.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let E;if(te("string"==typeof _,f,"argument-error"),te(d.type===Dg,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const P=E.session;if("phoneNumber"in E)return te("enroll"===P.type,f,"internal-error"),(yield function T0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:start",V(f,c))}(f,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{te("signin"===P.type,f,"internal-error");const F=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return te(F,f,"missing-multi-factor-info"),(yield function jv(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:start",V(f,c))}(f,{mfaPendingCredential:P.credential,mfaEnrollmentId:F,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function xv(f,c){return Pd.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:_});return P}}finally{d._reset()}}),vc.apply(this,arguments)}function xt(f,c){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,T.Z)(function*(f,c){yield ic((0,q.m9)(f),c)})).apply(this,arguments)}let Ic=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=Jt(d)}verifyPhoneNumber(d,p){return Qa(this.auth,d,(0,q.m9)(p))}static credential(d,p){return vs._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?vs._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function yn(f,c){return c?W(c):(te(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class sh extends Oo{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return _s(c,this._buildIdpRequest())}_linkToIdToken(c,d){return _s(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return _s(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function Sg(f){return sg(f.auth,new sh(f),f.bypassAuthState)}function Go(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),ig(d,new sh(f),f.bypassAuthState)}function qr(f){return oh.apply(this,arguments)}function oh(){return(oh=(0,T.Z)(function*(f){const{auth:c,user:d}=f;return te(d,c,"internal-error"),ic(d,new sh(f),f.bypassAuthState)})).apply(this,arguments)}class Rg{constructor(c,d,p,_,E=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,T.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,T.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:E,tenantId:P,error:F,type:X}=c;if(F)return void d.reject(F);const ye={auth:d.auth,requestUri:p,sessionId:_,tenantId:P||void 0,postBody:E||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(X)(ye))}catch(Pe){d.reject(Pe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Sg;case"linkViaPopup":case"linkViaRedirect":return qr;case"reauthViaPopup":case"reauthViaRedirect":return Go;default:Xe(this.auth,"internal-error")}}resolve(c){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yv=new Or(2e3,1e4);function Ds(f,c,d){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,T.Z)(function*(f,c,d){const p=Jt(f);mn(f,c,es);const _=yn(p,d);return new ah(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function Jv(f,c,d){return wc.apply(this,arguments)}function wc(){return(wc=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,es);const _=yn(p.auth,d);return new ah(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function Pg(f,c,d){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,es);const _=yn(p.auth,d);return new ah(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let ah=(()=>{class f extends Rg{constructor(d,p,_,E,P){super(d,p,E,P),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,T.Z)(function*(){const p=yield d.execute();return te(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,T.Z)(function*(){Ft(1===d.filter.length,"Popup operations only handle one event");const p=gn();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Et(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Yv.get())};d()}}return f.currentPopupAction=null,f})();const ke="pendingRedirect",Zo=new Map;class V0 extends Rg{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,T.Z)(function*(){let p=Zo.get(d.auth._key());if(!p){try{const E=(yield function Xv(f,c){return uh.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(E)}catch(_){p=()=>Promise.reject(_)}Zo.set(d.auth._key(),p)}return d.bypassAuthState||Zo.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,T.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function uh(){return(uh=(0,T.Z)(function*(f,c){const d=xg(c),p=Ng(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function ch(f,c){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,T.Z)(function*(f,c){return Ng(f)._set(xg(c),"true")})).apply(this,arguments)}function Ko(){Zo.clear()}function Mg(f,c){Zo.set(f._key(),c)}function Ng(f){return W(f._redirectPersistence)}function xg(f){return Oe(ke,f.config.apiKey,f.name)}function eI(f,c,d){return function tI(f,c,d){return Y.apply(this,arguments)}(f,c,d)}function Y(){return(Y=(0,T.Z)(function*(f,c,d){const p=Jt(f);mn(f,c,es),yield p._initializationPromise;const _=yn(p,d);return yield ch(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function dt(f,c,d){return function nI(f,c,d){return lh.apply(this,arguments)}(f,c,d)}function lh(){return(lh=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,es),yield p.auth._initializationPromise;const _=yn(p.auth,d);yield ch(_,p.auth);const E=yield rI(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function Wn(f,c,d){return function Og(f,c,d){return oo.apply(this,arguments)}(f,c,d)}function oo(){return(oo=(0,T.Z)(function*(f,c,d){const p=(0,q.m9)(f);mn(p.auth,c,es),yield p.auth._initializationPromise;const _=yn(p.auth,d);yield sc(!1,p,c.providerId),yield ch(_,p.auth);const E=yield rI(p);return _._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function zi(f,c){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,T.Z)(function*(f,c){return yield Jt(f)._initializationPromise,Xa(f,c,!1)})).apply(this,arguments)}function Xa(f,c){return dh.apply(this,arguments)}function dh(){return(dh=(0,T.Z)(function*(f,c,d=!1){const p=Jt(f),_=yn(p,c),P=yield new V0(p,_,d).execute();return P&&!d&&(delete P.user._redirectEventId,yield p._persistUserIfCurrent(P.user),yield p._setRedirectUser(null,c)),P})).apply(this,arguments)}function rI(f){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,T.Z)(function*(f){const c=gn(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class Wi{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function rs(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ao(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!ao(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Et(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hh(c))}saveEventToCache(c){this.cachedEventUids.add(hh(c)),this.lastProcessedEventTime=Date.now()}}function hh(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function ao({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function kg(f){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,T.Z)(function*(f,c={}){return Q(f,"GET","/v1/projects",c)})).apply(this,arguments)}const iI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sI=/^https?/;function eu(){return(eu=(0,T.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield kg(f);for(const d of c)try{if(Vg(d))return}catch{}Xe(f,"unauthorized-domain")})).apply(this,arguments)}function Vg(f){const c=on(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const P=new URL(f);return""===P.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&P.hostname===p}if(!sI.test(d))return!1;if(iI.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const ph=new Or(3e4,6e4);function Fg(){const f=vt().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Qo=null;const Bg=new Or(5e3,15e3),$g="__/auth/iframe",jg="emulator/auth/iframe",gh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aI(f){const c=f.config;te(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Ni(c,jg):`https://${f.config.authDomain}/${$g}`,p={apiKey:c.apiKey,appName:f.name,v:x.SDK_VERSION},_=oI.get(f.config.apiHost);_&&(p.eid=_);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${d}?${(0,q.xO)(p).slice(1)}`}function is(){return is=(0,T.Z)(function*(f){const c=yield function Ug(f){return Qo=Qo||function Lg(f){return new Promise((c,d)=>{var p,_,E;function P(){Fg(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Fg(),d(Et(f,"network-request-failed"))},timeout:ph.get()})}if(null!==(_=null===(p=vt().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(E=vt().gapi)||void 0===E||!E.load){const F=Sv("iframefcb");return vt()[F]=()=>{gapi.load?P():d(Et(f,"network-request-failed"))},Gp(`https://apis.google.com/js/api.js?onload=${F}`).catch(X=>d(X))}P()}}).catch(c=>{throw Qo=null,c})}(f),Qo}(f),d=vt().gapi;return te(d,f,"internal-error"),c.open({where:document.body,url:aI(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gh,dontclear:!0},p=>new Promise(function(){var _=(0,T.Z)(function*(E,P){yield p.restyle({setHideOnLeave:!1});const F=Et(f,"network-request-failed"),X=vt().setTimeout(()=>{P(F)},Bg.get());function ye(){vt().clearTimeout(X),E(p)}p.ping(ye).then(ye,()=>{P(F)})});return function(E,P){return _.apply(this,arguments)}}()))}),is.apply(this,arguments)}const en={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const As="__/auth/handler",hI="emulator/auth/handler",Sc=encodeURIComponent("fac");function Yo(f,c,d,p,_,E){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,T.Z)(function*(f,c,d,p,_,E){te(f.config.authDomain,f,"auth-domain-config-required"),te(f.config.apiKey,f,"invalid-api-key");const P={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:x.SDK_VERSION,eventId:_};if(c instanceof es){c.setDefaultLanguage(f.languageCode),P.providerId=c.providerId||"",(0,q.xb)(c.getCustomParameters())||(P.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Pe,st]of Object.entries(E||{}))P[Pe]=st}if(c instanceof Fo){const Pe=c.getScopes().filter(st=>""!==st);Pe.length>0&&(P.scopes=Pe.join(","))}f.tenantId&&(P.tid=f.tenantId);const F=P;for(const Pe of Object.keys(F))void 0===F[Pe]&&delete F[Pe];const X=yield f._getAppCheckToken(),ye=X?`#${Sc}=${encodeURIComponent(X)}`:"";return`${function _h({config:f}){return f.emulator?Ni(f,hI):`https://${f.authDomain}/${As}`}(f)}?${(0,q.xO)(F).slice(1)}${ye}`})).apply(this,arguments)}const Rc="webStorageSupport",Wg=class zg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hi,this._completeRedirectFn=Xa,this._overrideRedirectResult=Mg}_openPopup(c,d,p,_){var E=this;return(0,T.Z)(function*(){var P;Ft(null===(P=E.eventManagers[c._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const F=yield Yo(c,d,p,on(),_);return function Hg(f,c,d,p=500,_=600){const E=Math.max((window.screen.availHeight-_)/2,0).toString(),P=Math.max((window.screen.availWidth-p)/2,0).toString();let F="";const X=Object.assign(Object.assign({},en),{width:p.toString(),height:_.toString(),top:E,left:P}),ye=(0,q.z$)().toLowerCase();d&&(F=Vn(ye)?"_blank":d),Dt(ye)&&(c=c||"http://localhost",X.scrollbars="yes");const Pe=Object.entries(X).reduce((pr,[ss,iu])=>`${pr}${ss}=${iu},`,"");if(function tt(f=(0,q.z$)()){var c;return _e(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ye)&&"_self"!==F)return function bc(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",F),new mh(null);const st=window.open(c||"",F,Pe);te(st,f,"popup-blocked");try{st.focus()}catch{}return new mh(st)}(c,F,gn())})()}_openRedirect(c,d,p,_){var E=this;return(0,T.Z)(function*(){return yield E._originValidation(c),function mg(f){vt().location.href=f}(yield Yo(c,d,p,on(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:E}=this.eventManagers[d];return _?Promise.resolve(_):(Ft(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,T.Z)(function*(){const p=yield function fr(f){return is.apply(this,arguments)}(c),_=new Wi(c);return p.register("authEvent",E=>(te(E?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Rc,{type:Rc},_=>{var E;const P=null===(E=_?.[0])||void 0===E?void 0:E[Rc];void 0!==P&&d(!!P),Xe(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function fh(f){return eu.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return Yt()||De()||_e()}};class Xo{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return ot("unexpected MultiFactorSessionType")}}}class uo extends Xo{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new uo(c)}_finalizeEnroll(c,d,p){return function C0(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:finalize",V(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function nh(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:finalize",V(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fI=(()=>{class f{constructor(){}static assertion(d){return uo._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var qg="@firebase/auth";class F0{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,T.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,q.Pz)("authIdTokenMaxAge"),function nu(f){(0,x._registerComponent)(new Gt.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:P,authDomain:F}=p.options;te(P&&!P.includes(":"),"invalid-api-key",{appName:p.name});const X={apiKey:P,authDomain:F,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qe(f)},ye=new f0(p,_,E,X);return function Re(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(W);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(ye,d),ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,x._registerComponent)(new Gt.wA("auth-internal",c=>{const d=Jt(c.getProvider("auth").getImmediate());return new F0(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,x.registerVersion)(qg,"1.5.0",function yh(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(f)),(0,x.registerVersion)(qg,"1.5.0","esm2017")}("Browser")},58:(Mi,Dn,Me)=>{Me.d(Dn,{BH:()=>xr,G6:()=>Ni,L:()=>ct,LL:()=>K,P0:()=>Zt,Pz:()=>Et,Sg:()=>mn,UG:()=>ot,ZB:()=>Te,ZR:()=>Q,aH:()=>Xe,b$:()=>hn,eu:()=>$,hl:()=>L,jU:()=>Ft,m9:()=>Li,ne:()=>kr,pd:()=>yi,r3:()=>Sn,ru:()=>on,tV:()=>Z,uI:()=>te,vZ:()=>xi,w1:()=>gi,xO:()=>ki,xb:()=>Er,z$:()=>qe,zd:()=>_i});const Ce=function(S){const D=[];let I=0;for(let w=0;w<S.length;w++){let v=S.charCodeAt(w);v<128?D[I++]=v:v<2048?(D[I++]=v>>6|192,D[I++]=63&v|128):55296==(64512&v)&&w+1<S.length&&56320==(64512&S.charCodeAt(w+1))?(v=65536+((1023&v)<<10)+(1023&S.charCodeAt(++w)),D[I++]=v>>18|240,D[I++]=v>>12&63|128,D[I++]=v>>6&63|128,D[I++]=63&v|128):(D[I++]=v>>12|224,D[I++]=v>>6&63|128,D[I++]=63&v|128)}return D},Gt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,D){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const I=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let v=0;v<S.length;v+=3){const A=S[v],W=v+1<S.length,ve=W?S[v+1]:0,me=v+2<S.length,Oe=me?S[v+2]:0;let Dt=(15&ve)<<2|Oe>>6,De=63&Oe;me||(De=64,W||(Dt=64)),w.push(I[A>>2],I[(3&A)<<4|ve>>4],I[Dt],I[De])}return w.join("")},encodeString(S,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(S):this.encodeByteArray(Ce(S),D)},decodeString(S,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(S):function(S){const D=[];let I=0,w=0;for(;I<S.length;){const v=S[I++];if(v<128)D[w++]=String.fromCharCode(v);else if(v>191&&v<224){const A=S[I++];D[w++]=String.fromCharCode((31&v)<<6|63&A)}else if(v>239&&v<365){const me=((7&v)<<18|(63&S[I++])<<12|(63&S[I++])<<6|63&S[I++])-65536;D[w++]=String.fromCharCode(55296+(me>>10)),D[w++]=String.fromCharCode(56320+(1023&me))}else{const A=S[I++],W=S[I++];D[w++]=String.fromCharCode((15&v)<<12|(63&A)<<6|63&W)}}return D.join("")}(this.decodeStringToByteArray(S,D))},decodeStringToByteArray(S,D){this.init_();const I=D?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let v=0;v<S.length;){const A=I[S.charAt(v++)],ve=v<S.length?I[S.charAt(v)]:0;++v;const Oe=v<S.length?I[S.charAt(v)]:64;++v;const fe=v<S.length?I[S.charAt(v)]:64;if(++v,null==A||null==ve||null==Oe||null==fe)throw new dn;w.push(A<<2|ve>>4),64!==Oe&&(w.push(ve<<4&240|Oe>>2),64!==fe&&w.push(Oe<<6&192|fe))}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ct=function(S){return function(S){const D=Ce(S);return Gt.encodeByteArray(D,!0)}(S).replace(/\./g,"")},Z=function(S){try{return Gt.decodeString(S,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function Te(S,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return D}for(const I in D)!D.hasOwnProperty(I)||!He(I)||(S[I]=Te(S[I],D[I]));return S}function He(S){return"__proto__"!==S}const Fe=()=>{try{return function pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=S&&Z(S[1]);return D&&JSON.parse(D)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},Zt=S=>{const D=(S=>{var D,I;return null===(I=null===(D=Fe())||void 0===D?void 0:D.emulatorHosts)||void 0===I?void 0:I[S]})(S);if(!D)return;const I=D.lastIndexOf(":");if(I<=0||I+1===D.length)throw new Error(`Invalid host ${D} with no separate hostname and port!`);const w=parseInt(D.substring(I+1),10);return"["===D[0]?[D.substring(1,I-1),w]:[D.substring(0,I),w]},Xe=()=>{var S;return null===(S=Fe())||void 0===S?void 0:S.config},Et=S=>{var D;return null===(D=Fe())||void 0===D?void 0:D[`_${S}`]};class xr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,I)=>{this.resolve=D,this.reject=I})}wrapCallback(D){return(I,w)=>{I?this.reject(I):this.resolve(w),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(I):D(I,w))}}}function mn(S,D){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const w=D||"demo-project",v=S.iat||0,A=S.sub||S.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${w}`,aud:w,iat:v,exp:v+3600,auth_time:v,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},S);return[ct(JSON.stringify({alg:"none",type:"JWT"})),ct(JSON.stringify(W)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function ot(){var S;const D=null===(S=Fe())||void 0===S?void 0:S.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ft(){return"object"==typeof self&&self.self===self}function on(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function hn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function gi(){const S=qe();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Ni(){return!ot()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"==typeof indexedDB}catch{return!1}}function $(){return new Promise((S,D)=>{try{let I=!0;const w="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(w);v.onsuccess=()=>{v.result.close(),I||self.indexedDB.deleteDatabase(w),S(!0)},v.onupgradeneeded=()=>{I=!1},v.onerror=()=>{var A;D((null===(A=v.error)||void 0===A?void 0:A.message)||"")}}catch(I){D(I)}})}class Q extends Error{constructor(D,I,w){super(I),this.code=D,this.customData=w,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(D,I,w){this.service=D,this.serviceName=I,this.errors=w}create(D,...I){const w=I[0]||{},v=`${this.service}/${D}`,A=this.errors[D],W=A?function ae(S,D){return S.replace(Je,(I,w)=>{const v=D[w];return null!=v?String(v):`<${w}?>`})}(A,w):"Error";return new Q(v,`${this.serviceName}: ${W} (${v}).`,w)}}const Je=/\{\$([^}]+)}/g;function Sn(S,D){return Object.prototype.hasOwnProperty.call(S,D)}function Er(S){for(const D in S)if(Object.prototype.hasOwnProperty.call(S,D))return!1;return!0}function xi(S,D){if(S===D)return!0;const I=Object.keys(S),w=Object.keys(D);for(const v of I){if(!w.includes(v))return!1;const A=S[v],W=D[v];if(et(A)&&et(W)){if(!xi(A,W))return!1}else if(A!==W)return!1}for(const v of w)if(!I.includes(v))return!1;return!0}function et(S){return null!==S&&"object"==typeof S}function ki(S){const D=[];for(const[I,w]of Object.entries(S))Array.isArray(w)?w.forEach(v=>{D.push(encodeURIComponent(I)+"="+encodeURIComponent(v))}):D.push(encodeURIComponent(I)+"="+encodeURIComponent(w));return D.length?"&"+D.join("&"):""}function _i(S){const D={};return S.replace(/^\?/,"").split("&").forEach(w=>{if(w){const[v,A]=w.split("=");D[decodeURIComponent(v)]=decodeURIComponent(A)}}),D}function yi(S){const D=S.indexOf("?");if(!D)return"";const I=S.indexOf("#",D);return S.substring(D,I>0?I:void 0)}function kr(S,D){const I=new Vr(S,D);return I.subscribe.bind(I)}class Vr{constructor(D,I){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=I,this.task.then(()=>{D(this)}).catch(w=>{this.error(w)})}next(D){this.forEachObserver(I=>{I.next(D)})}error(D){this.forEachObserver(I=>{I.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,I,w){let v;if(void 0===D&&void 0===I&&void 0===w)throw new Error("Missing Observer.");v=function Bn(S,D){if("object"!=typeof S||null===S)return!1;for(const I of D)if(I in S&&"function"==typeof S[I])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:I,complete:w},void 0===v.next&&(v.next=yt),void 0===v.error&&(v.error=yt),void 0===v.complete&&(v.complete=yt);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),A}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let I=0;I<this.observers.length;I++)this.sendOne(I,D)}sendOne(D,I){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{I(this.observers[D])}catch(w){typeof console<"u"&&console.error&&console.error(w)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yt(){}function Li(S){return S&&S._delegate?S._delegate:S}},127:(Mi,Dn,Me)=>{function T(t){return"function"==typeof t}function q(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const x=q(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ce(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ft{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(T(r))try{r()}catch(s){e=s instanceof x?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Nt(s)}catch(o){e=e??[],o instanceof x?e=[...e,...o.errors]:e.push(o)}}if(e)throw new x(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Nt(e);else{if(e instanceof ft){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ce(n,e)}remove(e){const{_finalizers:n}=this;n&&Ce(n,e),e instanceof ft&&e._removeParent(this)}}ft.EMPTY=(()=>{const t=new ft;return t.closed=!0,t})();const Gt=ft.EMPTY;function dn(t){return t instanceof ft||t&&"closed"in t&&T(t.remove)&&T(t.add)&&T(t.unsubscribe)}function Nt(t){T(t)?t():t.unsubscribe()}const ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(t,e,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Z;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ie(t){Z.setTimeout(()=>{const{onUnhandledError:e}=ct;if(!e)throw t;e(t)})}function Te(){}const He=rt("C",void 0,void 0);function rt(t,e,n){return{kind:t,value:e,error:n}}let Ve=null;function Fe(t){if(ct.useDeprecatedSynchronousErrorHandling){const e=!Ve;if(e&&(Ve={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ve;if(Ve=null,n)throw r}}else t()}class Zt extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dn(e)&&e.add(this)):this.destination=Ft}static create(e,n,r){return new mn(e,n,r)}next(e){this.isStopped?ot(function An(t){return rt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ot(function pt(t){return rt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ot(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xe=Function.prototype.bind;function Et(t,e){return Xe.call(t,e)}class xr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qe(r)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qe(n)}}}class mn extends Zt{constructor(e,n,r){let i;if(super(),T(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&ct.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Et(e.next,s),error:e.error&&Et(e.error,s),complete:e.complete&&Et(e.complete,s)}):i=e}this.destination=new xr(i)}}function qe(t){ct.useDeprecatedSynchronousErrorHandling?function kn(t){ct.useDeprecatedSynchronousErrorHandling&&Ve&&(Ve.errorThrown=!0,Ve.error=t)}(t):ie(t)}function ot(t,e){const{onStoppedNotification:n}=ct;n&&Z.setTimeout(()=>n(t,e))}const Ft={closed:!0,next:Te,error:function te(t){throw t},complete:Te},on="function"==typeof Symbol&&Symbol.observable||"@@observable";function hn(t){return t}function gi(t){return 0===t.length?hn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function L(t){return t&&t instanceof Zt||function Ni(t){return t&&T(t.next)&&T(t.error)&&T(t.complete)}(t)&&dn(t)}(n)?n:new mn(n,r,i);return Fe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Or(r))((i,s)=>{const o=new mn({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[on](){return this}pipe(...n){return gi(n)(this)}toPromise(n){return new(n=Or(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Or(t){var e;return null!==(e=t??ct.Promise)&&void 0!==e?e:Promise}const $=q(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class t extends Le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new V(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $}next(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Fe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Gt:(this.currentObservers=null,s.push(n),new ft(()=>{this.currentObservers=null,Ce(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Le;return n.source=this,n}}return t.create=(e,n)=>new V(e,n),t})();class V extends j{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Gt}}function Q(t){return T(t?.lift)}function K(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new Je(t,e,n,r,i)}class Je extends Zt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function de(t,e){return K((n,r)=>{let i=0;n.subscribe(ae(r,s=>{r.next(t.call(e,s,i++))}))})}var Se=Me(582);const at=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ut(t){return T(t?.then)}function bt(t){return T(t[on])}function Kt(t){return Symbol.asyncIterator&&T(t?.[Symbol.asyncIterator])}function bn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Un=function Sn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Er(t){return T(t?.[Un])}function mi(t){return(0,Se.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Se.qq)(n.read());if(i)return yield(0,Se.qq)(void 0);yield yield(0,Se.qq)(r)}}finally{n.releaseLock()}})}function xi(t){return T(t?.getReader)}function et(t){if(t instanceof Le)return t;if(null!=t){if(bt(t))return function Oi(t){return new Le(e=>{const n=t[on]();if(T(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(at(t))return function ki(t){return new Le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Ut(t))return function _i(t){return new Le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ie)})}(t);if(Kt(t))return Yn(t);if(Er(t))return function yi(t){return new Le(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(xi(t))return function kr(t){return Yn(mi(t))}(t)}throw bn(t)}function Yn(t){return new Le(e=>{(function Vr(t,e){var n,r,i,s;return(0,Se.mG)(this,void 0,void 0,function*(){try{for(n=(0,Se.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Fr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function yt(t,e,n=1/0){return T(e)?yt((r,i)=>de((s,o)=>e(r,s,i,o))(et(t(r,i))),n):("number"==typeof e&&(n=e),K((r,i)=>function Bn(t,e,n,r,i,s,o,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},y=b=>l<r?C(b):u.push(b),C=b=>{s&&e.next(b),l++;let M=!1;et(n(b,h++)).subscribe(ae(e,U=>{i?.(U),s?y(U):e.next(U)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){const U=u.shift();o?Fr(e,o,()=>C(U)):C(U)}m()}catch(U){e.error(U)}}))};return t.subscribe(ae(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function Lr(t=1/0){return yt(hn,t)}const fn=new Le(t=>t.complete());function an(t){return t&&T(t.schedule)}function Vi(t){return t[t.length-1]}function Fi(t){return T(Vi(t))?t.pop():void 0}function vi(t){return an(Vi(t))?t.pop():void 0}function _n(t,e=0){return K((n,r)=>{n.subscribe(ae(r,i=>Fr(r,t,()=>r.next(i),e),()=>Fr(r,t,()=>r.complete(),e),i=>Fr(r,t,()=>r.error(i),e)))})}function Jn(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Li(t,e){if(!t)throw new Error("Iterable cannot be null");return new Le(n=>{Fr(n,e,()=>{const r=t[Symbol.asyncIterator]();Fr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function I(t,e){return e?function D(t,e){if(null!=t){if(bt(t))return function Ur(t,e){return et(t).pipe(Jn(e),_n(e))}(t,e);if(at(t))return function ms(t,e){return new Le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Ut(t))return function xo(t,e){return et(t).pipe(Jn(e),_n(e))}(t,e);if(Kt(t))return Li(t,e);if(Er(t))return function qs(t,e){return new Le(n=>{let r;return Fr(n,e,()=>{r=t[Un](),Fr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>T(r?.return)&&r.return()})}(t,e);if(xi(t))return function S(t,e){return Li(mi(t),e)}(t,e)}throw bn(t)}(t,e):et(t)}function w(...t){const e=vi(t),n=function Rn(t,e){return"number"==typeof Vi(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?et(r[0]):Lr(n)(I(r,e)):fn}class v extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function A(...t){return I(t,vi(t))}function W(t={}){const{connector:e=(()=>new j),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),o=u=void 0,h=g=!1},C=()=>{const b=o;y(),b?.unsubscribe()};return K((b,M)=>{l++,!g&&!h&&m();const U=u=u??e();M.add(()=>{l--,0===l&&!g&&!h&&(a=ve(C,i))}),U.subscribe(M),!o&&l>0&&(o=new mn({next:N=>U.next(N),error:N=>{g=!0,m(),a=ve(y,n,N),U.error(N)},complete:()=>{h=!0,m(),a=ve(y,r),U.complete()}}),et(b).subscribe(o))})(s)}}function ve(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new mn({next:()=>{r.unsubscribe(),t()}});return et(e(...n)).subscribe(r)}function me(t,e){return K((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0;const h=s++;et(t(u,h)).subscribe(i=ae(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Oe(t,e=hn){return t=t??lt,K((n,r)=>{let i,s=!0;n.subscribe(ae(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function lt(t,e){return t===e}function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function Dt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function De(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(De).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Vn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Gs=fe({__forward_ref__:fe});function k(t){return t.__forward_ref__=k,t.toString=function(){return De(this())},t}function R(t){return ee(t)?t():t}function ee(t){return"function"==typeof t&&t.hasOwnProperty(Gs)&&t.__forward_ref__===k}function _e(t){return t&&!!t.\u0275providers}const tt="https://g.co/ng/security#xss";class H extends Error{constructor(e,n){super(function Yt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Ee(t){return"string"==typeof t?t:null==t?"":String(t)}function Ed(t,e){throw new H(-201,!1)}function Xn(t,e){null==t&&function Ne(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Re(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gu(t){return Jp(t,ko)||Jp(t,Zu)}function Jp(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ua(t){return t&&(t.hasOwnProperty(wd)||t.hasOwnProperty(Nv))?t[wd]:null}const ko=fe({\u0275prov:fe}),wd=fe({\u0275inj:fe}),Zu=fe({ngInjectableDef:fe}),Nv=fe({ngInjectorDef:fe});var Ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ye||{});let Td;function wr(t){const e=Td;return Td=t,e}function Qu(t,e,n){const r=Gu(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ye.Optional?null:void 0!==e?e:void Ed(De(t))}const At=globalThis;class ue{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ks={},Rd="__NG_DI_FLAG__",$r="ngTempTokenPath",Pd=/\n/gm,Xu="__source";let Vo;function ys(t){const e=Vo;return Vo=t,e}function kv(t,e=Ye.Default){if(void 0===Vo)throw new H(-203,!1);return null===Vo?Qu(t,void 0,e):Vo.get(t,e&Ye.Optional?null:void 0,e)}function oe(t,e=Ye.Default){return(function Ku(){return Td}()||kv)(R(t),e)}function we(t,e=Ye.Default){return oe(t,ec(e))}function ec(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Qs(t){const e=[];for(let n=0;n<t.length;n++){const r=R(t[n]);if(Array.isArray(r)){if(0===r.length)throw new H(900,!1);let i,s=Ye.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Nd(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(oe(i,s))}else e.push(oe(r))}return e}function tc(t,e){return t[Rd]=e,t.prototype[Rd]=e,t}function Nd(t){return t[Rd]}function jr(t){return{toString:t}.toString()}var nc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(nc||{}),Ii=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ii||{});const Ui={},gt=[],ts=fe({\u0275cmp:fe}),xd=fe({\u0275dir:fe}),Lo=fe({\u0275pipe:fe}),ng=fe({\u0275mod:fe}),Bi=fe({\u0275fac:fe}),Ys=fe({__NG_ELEMENT_ID__:fe}),Hr=fe({__NG_ENV_ID__:fe});function Od(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function kd(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];$a(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function rc(t){return 3===t||4===t||6===t}function $a(t){return 64===t.charCodeAt(0)}function Uo(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Vd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Vd(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const rg="ng-template";function Fd(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==Od(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function ic(t){return 4===t.type&&t.value!==rg}function Ld(t,e,n){return e===(4!==t.type||n?t.value:rg)}function sc(t,e,n){let r=4;const i=t.attrs||[],s=function Ud(t){for(let e=0;e<t.length;e++)if(rc(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Ld(t,u,n)||""===u&&1===e.length){if(zr(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Fd(t.attrs,l,n)){if(zr(r))return!1;o=!0}continue}const g=ig(8&r?"class":u,i,ic(t),n);if(-1===g){if(zr(r))return!1;o=!0;continue}if(""!==l){let m;m=g>s?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==Od(y,l,0)||2&r&&l!==m){if(zr(r))return!1;o=!0}}}}else{if(!o&&!zr(r)&&!zr(u))return!1;if(o&&zr(u))continue;o=!1,r=u|1&r}}return zr(r)||o}function zr(t){return 0==(1&t)}function ig(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function ac(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function oc(t,e,n=!1){for(let r=0;r<e.length;r++)if(sc(t,e[r],n))return!0;return!1}function $d(t,e){return t?":not("+e.trim()+")":e}function jd(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!zr(o)&&(e+=$d(s,i),i=""),r=o,s=s||!zr(r);n++}return""!==i&&(e+=$d(s,i)),e}function Js(t){return jr(()=>{const e=ag(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ii.Emulated,styles:t.styles||gt,_:null,schemas:t.schemas||null,tView:null,id:""};cc(n);const r=t.dependencies;return n.directiveDefs=ja(r,!1),n.pipeDefs=ja(r,!0),n.id=function Fv(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Vv(t){return it(t)||jn(t)}function Wd(t){return null!==t}function $n(t){return jr(()=>({type:t.type,bootstrap:t.bootstrap||gt,declarations:t.declarations||gt,imports:t.imports||gt,exports:t.exports||gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function uc(t,e){if(null==t)return Ui;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function xe(t){return jr(()=>{const e=ag(t);return cc(e),e})}function er(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function it(t){return t[ts]||null}function jn(t){return t[xd]||null}function Hn(t){return t[Lo]||null}function dr(t,e){const n=t[ng]||null;if(!n&&!0===e)throw new Error(`Type ${De(t)} does not have '\u0275mod' property.`);return n}function ag(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ui,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uc(t.inputs,e),outputs:uc(t.outputs)}}function cc(t){t.features?.forEach(e=>e(t))}function ja(t,e){if(!t)return null;const n=e?Hn:Vv;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Wd)}const Bt=0,pe=1,Ue=2,$t=3,Ei=4,Xs=5,tr=6,$o=7,Xt=8,Is=9,Es=10,Be=11,eo=12,ug=13,ws=14,pn=15,to=16,jo=17,ii=18,Ha=19,lc=20,Ts=21,ns=22,Ho=23,no=24,nt=25,dc=1,cg=2,$i=7,zo=9,nr=11;function Wr(t){return Array.isArray(t)&&"object"==typeof t[dc]}function zn(t){return Array.isArray(t)&&!0===t[dc]}function Zd(t){return 0!=(4&t.flags)}function ro(t){return t.componentOffset>-1}function Kd(t){return 1==(1&t.flags)}function ji(t){return!!t.template}function lg(t){return 0!=(512&t[Ue])}function Wo(t,e){return t.hasOwnProperty(Bi)?t[Bi]:null}let gn=null,fc=!1;function vt(t){const e=gn;return gn=t,e}const mg={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function _g(t){if(!Ga(t)||t.dirty){if(!t.producerMustRecompute(t)&&!qa(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function yg(t){t.dirty=!0,function gc(t){if(void 0===t.liveConsumerNode)return;const e=fc;fc=!0;try{for(const n of t.liveConsumerNode)n.dirty||yg(n)}finally{fc=e}}(t),t.consumerMarkedDirty?.(t)}function mc(t){return t&&(t.nextProducerIndex=0),vt(t)}function Xd(t,e){if(vt(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ga(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)so(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function qa(t){Cs(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(_g(n),r!==n.version))return!0}return!1}function eh(t){if(Cs(t),Ga(t))for(let e=0;e<t.producerNode.length;e++)so(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function so(t,e){if(function th(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Cs(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)so(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Cs(i),i.producerIndexOfThis[r]=e}}function Ga(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let $v=null;function Tg(t){const e=vt(null);try{return t()}finally{vt(e)}}const Cg=()=>{},Gv=(()=>({...mg,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Cg}))();class Dg{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function si(){return Ag}function Ag(t){return t.type.prototype.ngOnChanges&&(t.setInput=ih),Zv}function Zv(){const t=yc(this),e=t?.current;if(e){const n=t.previous;if(n===Ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ih(t,e,n,r){const i=this.declaredInputs[n],s=yc(t)||function Kv(t,e){return t[bg]=e}(t,{previous:Ui,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new Dg(u&&u.currentValue,e,a===Ui),t[r]=e}si.ngInherit=!0;const bg="__ngSimpleChanges__";function yc(t){return t[bg]||null}const oi=function(t,e,n){};function xt(t){for(;Array.isArray(t);)t=t[Bt];return t}function Ic(t,e){return xt(e[t])}function yn(t,e){return xt(e[t.index])}function Sg(t,e){return t.data[e]}function qr(t,e){const n=e[t];return Wr(n)?n:n[Bt]}function Ds(t,e){return null==e?null:t[e]}function Ec(t){t[jo]=0}function Jv(t){1024&t[Ue]||(t[Ue]|=1024,Pg(t,1))}function wc(t){1024&t[Ue]&&(t[Ue]&=-1025,Pg(t,-1))}function Pg(t,e){let n=t[$t];if(null===n)return;n[Xs]+=e;let r=n;for(n=n[$t];null!==n&&(1===e&&1===r[Xs]||-1===e&&0===r[Xs]);)n[Xs]+=e,r=n,n=n[$t]}const ke={lFrame:Bg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Cc(){return ke.bindingsEnabled}function Y(){return ke.lFrame.lView}function dt(){return ke.lFrame.tView}function Wn(){let t=Og();for(;null!==t&&64===t.type;)t=t.parent;return t}function Og(){return ke.lFrame.currentTNode}function zi(t,e){const n=ke.lFrame;n.currentTNode=t,n.isParent=e}function Ja(){return ke.lFrame.isParent}function ao(){return ke.lFrame.bindingIndex++}function iI(t,e){const n=ke.lFrame;n.bindingIndex=n.bindingRootIndex=t,fh(e)}function fh(t){ke.lFrame.currentDirectiveIndex=t}function ph(t){ke.lFrame.currentQueryIndex=t}function Fg(t){const e=t[pe];return 2===e.type?e.declTNode:1===e.type?t[tr]:null}function Lg(t,e,n){if(n&Ye.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Ye.Host||(i=Fg(s),null===i||(s=s[ws],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ke.lFrame=Ug();return r.currentTNode=e,r.lView=t,!0}function Qo(t){const e=Ug(),n=t[pe];ke.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ug(){const t=ke.lFrame,e=null===t?null:t.child;return null===e?Bg(t):e}function Bg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function $g(){const t=ke.lFrame;return ke.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const jg=$g;function gh(){const t=$g();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fr(){return ke.lFrame.selectedIndex}function is(t){ke.lFrame.selectedIndex=t}function en(){const t=ke.lFrame;return Sg(t.tView,t.selectedIndex)}let Hg=!0;function bc(){return Hg}function As(t){Hg=t}function Sc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function Yo(t,e,n){Rc(t,e,3,n)}function Jo(t,e,n,r){(3&t[Ue])===n&&Rc(t,e,n,r)}function _h(t,e){let n=t[Ue];(3&n)===e&&(n&=8191,n+=1,t[Ue]=n)}function Rc(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[jo]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[jo]+=65536),(a<s||-1==s)&&(Wg(t,n,e,u),t[jo]=(4294901760&t[jo])+u+2),u++}function zg(t,e){oi(4,t,e);const n=vt(null);try{e.call(t)}finally{vt(n),oi(5,t,e)}}function Wg(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ue]>>13<t[jo]>>16&&(3&t[Ue])===e&&(t[Ue]+=8192,zg(a,s)):zg(a,s)}const Xo=-1;class uo{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function yh(t){return t!==Xo}function nu(t){return 32767&t}function ru(t,e){let n=function mI(t){return t>>16}(t),r=e;for(;n>0;)r=r[ws],n--;return r}let Mc=!0;function Nc(t){const e=Mc;return Mc=t,e}const f=255,c=5;let d=0;const p={};function E(t,e){const n=F(t,e);if(-1!==n)return n;const r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,P(r.data,t),P(e,null),P(r.blueprint,null));const i=X(t,e),s=t.injectorIndex;if(yh(i)){const o=nu(i),a=ru(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function P(t,e){t.push(0,0,0,0,0,0,0,0,e)}function F(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function X(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=L0(i),null===r)return Xo;if(n++,i=i[ws],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Xo}function ye(t,e,n){!function _(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ys)&&(r=n[Ys]),null==r&&(r=n[Ys]=d++);const i=r&f;e.data[t+(i>>c)]|=1<<i}(t,e,n)}function st(t,e,n){if(n&Ye.Optional||void 0!==t)return t;Ed()}function pr(t,e,n,r){if(n&Ye.Optional&&void 0===r&&(r=null),!(n&(Ye.Self|Ye.Host))){const i=t[Is],s=wr(void 0);try{return i?i.get(e,r,n&Ye.Optional):Qu(e,r,n&Ye.Optional)}finally{wr(s)}}return st(r,0,n)}function ss(t,e,n,r=Ye.Default,i){if(null!==t){if(2048&e[Ue]&&!(r&Ye.Self)){const o=function Q2(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Ue]&&!(512&o[Ue]);){const a=iu(s,o,n,r|Ye.Self,p);if(a!==p)return a;let u=s.parent;if(!u){const l=o[lc];if(l){const h=l.get(n,p,r);if(h!==p)return h}u=L0(o),o=o[ws]}s=u}return i}(t,e,n,r,p);if(o!==p)return o}const s=iu(t,e,n,r,p);if(s!==p)return s}return pr(e,n,r,i)}function iu(t,e,n,r,i){const s=function Zg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ys)?t[Ys]:void 0;return"number"==typeof e?e>=0?e&f:_I:e}(n);if("function"==typeof s){if(!Lg(e,t,r))return r&Ye.Host?st(i,0,r):pr(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Ye.Optional)return o;Ed()}finally{jg()}}else if("number"==typeof s){let o=null,a=F(t,e),u=Xo,l=r&Ye.Host?e[pn][tr]:null;for((-1===a||r&Ye.SkipSelf)&&(u=-1===a?X(t,e):e[a+8],u!==Xo&&vh(r,!1)?(o=e[pe],a=nu(u),e=ru(u,e)):a=-1);-1!==a;){const h=e[pe];if(xc(s,a,h.data)){const g=Gg(a,e,n,o,r,l);if(g!==p)return g}u=e[a+8],u!==Xo&&vh(r,e[pe].data[a+8]===l)&&xc(s,a,e)?(o=h,a=nu(u),e=ru(u,e)):a=-1}}return i}function Gg(t,e,n,r,i,s){const o=e[pe],a=o.data[t+8],h=function ea(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,h=s>>20,m=i?a+h:t.directiveEnd;for(let y=r?a:a+h;y<m;y++){const C=o[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){const y=o[u];if(y&&ji(y)&&y.type===n)return u}return null}(a,o,n,null==r?ro(a)&&Mc:r!=o&&0!=(3&a.type),i&Ye.Host&&s===a);return null!==h?bs(e,o,h,a):p}function bs(t,e,n,r){let i=t[n];const s=e.data;if(function fI(t){return t instanceof uo}(i)){const o=i;o.resolving&&function La(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ee(t)}(s[n]));const a=Nc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?wr(o.injectImpl):null;Lg(t,r,Ye.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function hI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Ag(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&wr(l),Nc(a),o.resolving=!1,jg()}}return i}function xc(t,e,n){return!!(n[e+(t>>c)]&1<<t)}function vh(t,e){return!(t&Ye.Self||t&Ye.Host&&e)}class rr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ss(this._tNode,this._lView,e,ec(r),n)}}function _I(){return new rr(Wn(),Y())}function Pn(t){return jr(()=>{const e=t.prototype.constructor,n=e[Bi]||Eh(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Bi]||Eh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Eh(t){return ee(t)?()=>{const e=Eh(R(t));return e&&e()}:Wo(t)}function L0(t){const e=t[pe],n=e.type;return 2===n?e.declTNode:1===n?t[tr]:null}const kc="__parameters__";function Fc(t,e,n){return jr(()=>{const r=function yI(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,h){const g=u.hasOwnProperty(kc)?u[kc]:Object.defineProperty(u,kc,{value:[]})[kc];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Uc(t,e){t.forEach(n=>Array.isArray(n)?Uc(n,e):e(n))}function B0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Qg(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wi(t,e,n){let r=Bc(t,e);return r>=0?t[1|r]=n:(r=~r,function rU(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function vI(t,e){const n=Bc(t,e);if(n>=0)return t[1|n]}function Bc(t,e){return function $0(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Ti=tc(Fc("Optional"),8),Jg=tc(Fc("SkipSelf"),4);function rm(t){return 128==(128&t.flags)}var na=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(na||{});const CI=new Map;let bU=0;const AI="__ngContext__";function Tr(t,e){Wr(e)?(t[AI]=e[Ha],function RU(t){CI.set(t[Ha],t)}(e)):t[AI]=e}let bI;function SI(t,e){return bI(t,e)}function Ah(t){const e=t[$t];return zn(e)?e[$t]:e}function ab(t){return cb(t[eo])}function ub(t){return cb(t[Ei])}function cb(t){for(;null!==t&&!zn(t);)t=t[Ei];return t}function Hc(t,e,n,r,i){if(null!=r){let s,o=!1;zn(r)?s=r:Wr(r)&&(o=!0,r=r[Bt]);const a=xt(r);0===t&&null!==n?null==i?fb(e,n,a):su(e,n,a,i||null,!0):1===t&&null!==n?su(e,n,a,i||null,!0):2===t?function lm(t,e,n){const r=um(t,e);r&&function ZU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function YU(t,e,n,r,i){const s=n[$i];s!==xt(n)&&Hc(e,t,r,s,i);for(let a=nr;a<n.length;a++){const u=n[a];Sh(u[pe],u,t,e,r,s)}}(e,t,s,n,i)}}function om(t,e,n){return t.createElement(e,n)}function db(t,e){const n=t[zo],r=n.indexOf(e);wc(e),n.splice(r,1)}function am(t,e){if(t.length<=nr)return;const n=nr+e,r=t[n];if(r){const i=r[to];null!==i&&i!==t&&db(i,r),e>0&&(t[n-1][Ei]=r[Ei]);const s=Qg(t,nr+e);!function BU(t,e){Sh(t,e,e[Be],2,null,null),e[Bt]=null,e[tr]=null}(r[pe],r);const o=s[ii];null!==o&&o.detachView(s[pe]),r[$t]=null,r[Ei]=null,r[Ue]&=-129}return r}function PI(t,e){if(!(256&e[Ue])){const n=e[Be];e[Ho]&&eh(e[Ho]),e[no]&&eh(e[no]),n.destroyNode&&Sh(t,e,n,3,null,null),function HU(t){let e=t[eo];if(!e)return MI(t[pe],t);for(;e;){let n=null;if(Wr(e))n=e[eo];else{const r=e[nr];r&&(n=r)}if(!n){for(;e&&!e[Ei]&&e!==t;)Wr(e)&&MI(e[pe],e),e=e[$t];null===e&&(e=t),Wr(e)&&MI(e[pe],e),n=e&&e[Ei]}e=n}}(e)}}function MI(t,e){if(!(256&e[Ue])){e[Ue]&=-129,e[Ue]|=256,function GU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof uo)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];oi(4,a,u);try{u.call(a)}finally{oi(5,a,u)}}else{oi(4,i,s);try{s.call(i)}finally{oi(5,i,s)}}}}}(t,e),function qU(t,e){const n=t.cleanup,r=e[$o];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[$o]=null);const i=e[Ts];if(null!==i){e[Ts]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[pe].type&&e[Be].destroy();const n=e[to];if(null!==n&&zn(e[$t])){n!==e[$t]&&db(n,e);const r=e[ii];null!==r&&r.detachView(t)}!function PU(t){CI.delete(t[Ha])}(e)}}function NI(t,e,n){return function hb(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Bt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ii.None||s===Ii.Emulated)return null}return yn(r,n)}}(t,e.parent,n)}function su(t,e,n,r,i){t.insertBefore(e,n,r,i)}function fb(t,e,n){t.appendChild(e,n)}function pb(t,e,n,r,i){null!==r?su(t,e,n,r,i):fb(t,e,n)}function um(t,e){return t.parentNode(e)}let xI,FI,hm,_b=function mb(t,e,n){return 40&t.type?yn(t,n):null};function cm(t,e,n,r){const i=NI(t,r,e),s=e[Be],a=function gb(t,e,n){return _b(t,e,n)}(r.parent||e[tr],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)pb(s,i,n[u],a,!1);else pb(s,i,n,a,!1);void 0!==xI&&xI(s,r,e,n,i)}function bh(t,e){if(null!==e){const n=e.type;if(3&n)return yn(e,t);if(4&n)return OI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return bh(t,r);{const i=t[e.index];return zn(i)?OI(-1,i):xt(i)}}if(32&n)return SI(e,t)()||xt(t[e.index]);{const r=vb(t,e);return null!==r?Array.isArray(r)?r[0]:bh(Ah(t[pn]),r):bh(t,e.next)}}return null}function vb(t,e){return null!==e?t[pn][tr].projection[e.projection]:null}function OI(t,e){const n=nr+t+1;if(n<e.length){const r=e[n],i=r[pe].firstChild;if(null!==i)return bh(r,i)}return e[$i]}function kI(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Tr(xt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)kI(t,e,n.child,r,i,s,!1),Hc(e,t,i,a,s);else if(32&u){const l=SI(n,r);let h;for(;h=l();)Hc(e,t,i,h,s);Hc(e,t,i,a,s)}else 16&u?Eb(t,e,r,n,i,s):Hc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Sh(t,e,n,r,i,s){kI(n,r,t.firstChild,e,i,s,!1)}function Eb(t,e,n,r,i,s){const o=n[pn],u=o[tr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Hc(e,t,i,u[l],s);else{let l=u;const h=o[$t];rm(r)&&(l.flags|=128),kI(t,e,l,h,i,s,!0)}}function wb(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Tb(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&kd(t,e,r),null!==i&&wb(t,e,i),null!==s&&function XU(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function Ab(t){return function LI(){if(void 0===hm&&(hm=null,At.trustedTypes))try{hm=At.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return hm}()?.createScriptURL(t)||t}class bb{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tt})`}}function ra(t){return t instanceof bb?t.changingThisBreaksApplicationSecurity:t}function Rh(t,e){const n=function cB(t){return t instanceof bb&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${tt})`)}return n===e}const fB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var qc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(qc||{});function Ob(t){const e=Mh();return e?e.sanitize(qc.URL,t)||"":Rh(t,"URL")?ra(t):function UI(t){return(t=String(t)).match(fB)?t:"unsafe:"+t}(Ee(t))}function kb(t){const e=Mh();if(e)return Ab(e.sanitize(qc.RESOURCE_URL,t)||"");if(Rh(t,"ResourceURL"))return Ab(ra(t));throw new H(904,!1)}function Mh(){const t=Y();return t&&t[Es].sanitizer}const Nh=new ue("ENVIRONMENT_INITIALIZER"),Fb=new ue("INJECTOR",-1),Lb=new ue("INJECTOR_DEF_TYPES");class HI{get(e,n=Ks){if(n===Ks){const r=new Error(`NullInjectorError: No provider for ${De(e)}!`);throw r.name="NullInjectorError",r}return n}}function AB(...t){return{\u0275providers:Ub(0,t),\u0275fromNgModule:!0}}function Ub(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Uc(e,o=>{const a=o;pm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Bb(i,s),n}function Bb(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];WI(i,s=>{e(s,r)})}}function pm(t,e,n,r){if(!(t=R(t)))return!1;let i=null,s=Ua(t);const o=!s&&it(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Ua(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)pm(l,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{Uc(s.imports,h=>{pm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&Bb(l,e)}if(!a){const l=Wo(i)||(()=>new i);e({provide:i,useFactory:l,deps:gt},i),e({provide:Lb,useValue:i,multi:!0},i),e({provide:Nh,useValue:()=>oe(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=t;WI(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function WI(t,e){for(let n of t)_e(n)&&(n=n.\u0275providers),Array.isArray(n)?WI(n,e):e(n)}const bB=fe({provide:String,useValue:fe});function qI(t){return null!==t&&"object"==typeof t&&bB in t}function ou(t){return"function"==typeof t}const GI=new ue("Set Injector scope."),gm={},RB={};let ZI;function mm(){return void 0===ZI&&(ZI=new HI),ZI}class Gi{}class Gc extends Gi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,QI(e,o=>this.processProvider(o)),this.records.set(Fb,Zc(void 0,this)),i.has("environment")&&this.records.set(Gi,Zc(void 0,this));const s=this.records.get(GI);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Lb.multi,gt,Ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ys(this),r=wr(void 0);try{return e()}finally{ys(n),wr(r)}}get(e,n=Ks,r=Ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Hr))return e[Hr](this);r=ec(r);const s=ys(this),o=wr(void 0);try{if(!(r&Ye.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function OB(t){return"function"==typeof t||"object"==typeof t&&t instanceof ue}(e)&&Gu(e);u=l&&this.injectableDefInScope(l)?Zc(KI(e),gm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Ye.Self?mm():this.parent).get(e,n=r&Ye.Optional&&n===Ks?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[$r]=a[$r]||[]).unshift(De(e)),s)throw a;return function es(t,e,n,r){const i=t[$r];throw e[Xu]&&i.unshift(e[Xu]),t.message=function Fo(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=De(e);if(Array.isArray(e))i=e.map(De).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):De(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Pd,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[$r]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{wr(o),ys(s)}}resolveInjectorInitializers(){const e=ys(this),n=wr(void 0);try{const i=this.get(Nh.multi,gt,Ye.Self);for(const s of i)s()}finally{ys(e),wr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(De(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){let n=ou(e=R(e))?e:R(e&&e.provide);const r=function MB(t){return qI(t)?Zc(void 0,t.useValue):Zc(Hb(t),gm)}(e);if(ou(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Zc(void 0,gm,!0),i.factory=()=>Qs(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===gm&&(n.value=RB,n.value=n.factory()),"object"==typeof n.value&&n.value&&function xB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=R(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function KI(t){const e=Gu(t),n=null!==e?e.factory:Wo(t);if(null!==n)return n;if(t instanceof ue)throw new H(204,!1);if(t instanceof Function)return function PB(t){const e=t.length;if(e>0)throw function Th(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new H(204,!1);const n=function Oo(t){return t&&(t[ko]||t[Zu])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new H(204,!1)}function Hb(t,e,n){let r;if(ou(t)){const i=R(t);return Wo(i)||KI(i)}if(qI(t))r=()=>R(t.useValue);else if(function jb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Qs(t.deps||[]));else if(function $b(t){return!(!t||!t.useExisting)}(t))r=()=>oe(R(t.useExisting));else{const i=R(t&&(t.useClass||t.provide));if(!function NB(t){return!!t.deps}(t))return Wo(i)||KI(i);r=()=>new i(...Qs(t.deps))}return r}function Zc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function QI(t,e){for(const n of t)Array.isArray(n)?QI(n,e):n&&_e(n)?QI(n.\u0275providers,e):e(n)}const _m=new ue("AppId",{providedIn:"root",factory:()=>kB}),kB="ng",zb=new ue("Platform Initializer"),os=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Wb=new ue("CSP nonce",{providedIn:"root",factory:()=>function Wc(){if(void 0!==FI)return FI;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let qb=(t,e,n)=>null;function iE(t,e,n=!1){return qb(t,e,n)}class WB{}class Kb{}class GB{resolveComponentFactory(e){throw function qB(t){const e=Error(`No component factory found for ${De(t)}.`);return e.ngComponent=t,e}(e)}}let Tm=(()=>{class t{static#e=this.NULL=new GB}return t})();function ZB(){return Yc(Wn(),Y())}function Yc(t,e){return new Ci(yn(t,e))}let Ci=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=ZB}return t})();class Yb{}let lo=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function QB(){const t=Y(),n=qr(Wn().index,t);return(Wr(n)?n:t)[Be]}()}return t})(),YB=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>null})}return t})();class Jc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Jb=new Jc("16.2.12"),aE={};function nS(t,e=null,n=null,r){const i=rS(t,e,n,r);return i.resolveInjectorInitializers(),i}function rS(t,e=null,n=null,r,i=new Set){const s=[n||gt,AB(t)];return r=r||("object"==typeof t?void 0:De(t)),new Gc(s,e||mm(),r||null,i)}let Cr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Ks;static#t=this.NULL=new HI;static create(n,r){if(Array.isArray(n))return nS({name:""},r,n,"");{const i=n.name??"";return nS({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Re({token:t,providedIn:"any",factory:()=>oe(Fb)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function cE(t){return t.ngOriginalError}class ho{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&cE(e);for(;n&&cE(n);)n=cE(n);return n||null}}function dE(t){return e=>{setTimeout(t,void 0,e)}}const vn=class i$ extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=dE(s),i&&(i=dE(i)),o&&(o=dE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ft&&e.add(a),a}};function sS(...t){}class It{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vn(!1),this.onMicrotaskEmpty=new vn(!1),this.onStable=new vn(!1),this.onError=new vn(!1),typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function s$(){const t="function"==typeof At.requestAnimationFrame;let e=At[t?"requestAnimationFrame":"setTimeout"],n=At[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function u$(t){const e=()=>{!function a$(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fE(t),t.isCheckStableRunning=!0,hE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function l$(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return oS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),aS(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return oS(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),aS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,fE(t),hE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!It.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(It.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,o$,sS,sS);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const o$={};function hE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function oS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function aS(t){t._nesting--,hE(t)}class c${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vn,this.onMicrotaskEmpty=new vn,this.onStable=new vn,this.onError=new vn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const uS=new ue("",{providedIn:"root",factory:cS});function cS(){const t=we(It);let e=!0;return w(new Le(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Le(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{It.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(W()))}function fo(t){return t instanceof Function?t():t}let pE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new t})}return t})();function kh(t){for(;t;){t[Ue]|=64;const e=Ah(t);if(lg(t)&&!e)return t;t=e}return null}const pS=new ue("",{providedIn:"root",factory:()=>!1});let Dm=null;function yS(t,e){return t[e]??ES()}function vS(t,e){const n=ES();n.producerNode?.length&&(t[e]=Dm,n.lView=t,Dm=IS())}const I$={...mg,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{kh(t.lView)},lView:null};function IS(){return Object.create(I$)}function ES(){return Dm??=IS(),Dm}const We={};function Gr(t){wS(dt(),Y(),fr()+t,!1)}function wS(t,e,n,r){if(!r)if(3==(3&e[Ue])){const s=t.preOrderCheckHooks;null!==s&&Yo(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Jo(e,s,0,n)}is(n)}function ne(t,e=Ye.Default){const n=Y();return null===n?oe(t,e):ss(Wn(),n,R(t),e)}function Am(t,e,n,r,i,s,o,a,u,l,h){const g=e.blueprint.slice();return g[Bt]=i,g[Ue]=140|r,(null!==l||t&&2048&t[Ue])&&(g[Ue]|=2048),Ec(g),g[$t]=g[ws]=t,g[Xt]=n,g[Es]=o||t&&t[Es],g[Be]=a||t&&t[Be],g[Is]=u||t&&t[Is]||null,g[tr]=s,g[Ha]=function SU(){return bU++}(),g[ns]=h,g[lc]=l,g[pn]=2==e.type?t[pn]:g,g}function tl(t,e,n,r,i){let s=t.data[e];if(null===s)s=function gE(t,e,n,r,i){const s=Og(),o=Ja(),u=t.data[e]=function S$(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Ko(){return null!==ke.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function kg(){return ke.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function oo(){const t=ke.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return zi(s,!0),s}function Vh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function CS(t,e,n,r,i){const s=yS(e,Ho),o=fr(),a=2&r;try{is(-1),a&&e.length>nt&&wS(t,e,nt,!1),oi(a?2:0,i);const l=a?s:null,h=mc(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{Xd(l,h)}}finally{a&&null===e[Ho]&&vS(e,Ho),is(o),oi(a?3:1,i)}}function mE(t,e,n){if(Zd(e)){const r=vt(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{vt(r)}}}function _E(t,e,n){Cc()&&(function k$(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;ro(n)&&function j$(t,e,n){const r=yn(e,t),i=DS(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=bm(t,Am(t,i,null,o,r,e,null,t[Es].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||E(n,e),Tr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],l=bs(e,t,a,n);Tr(l,e),null!==o&&H$(0,a-i,l,u,0,o),ji(u)&&(qr(n.index,e)[Xt]=bs(e,t,a,n))}}(t,e,n,yn(n,e)),64==(64&n.flags)&&PS(t,e,n))}function yE(t,e,n=yn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function DS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function vE(t,e,n,r,i,s,o,a,u,l,h){const g=nt+r,m=g+i,y=function w$(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:We);return n}(g,m),C="function"==typeof l?l():l;return y[pe]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}let AS=t=>null;function bS(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?SS(n,e,i,s):r.hasOwnProperty(i)&&SS(n,e,r[i],s)}return n}function SS(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Di(t,e,n,r,i,s,o,a){const u=yn(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(CE(t,n,h,r,i),ro(e)&&function M$(t,e){const n=qr(e,t);16&n[Ue]||(n[Ue]|=64)}(n,e.index)):3&e.type&&(r=function P$(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function IE(t,e,n,r){if(Cc()){const i=null===r?null:{"":-1},s=function F$(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(oc(e,o.selectors,!1))if(r||(r=[]),ji(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),EE(t,e,a.length)}else r.unshift(o),EE(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&RS(t,e,n,o,i,a),i&&function L$(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new H(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Uo(n.mergedAttrs,n.attrs)}function RS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)ye(E(n,e),t,r[l].type);!function B$(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Vh(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=Uo(n.mergedAttrs,h.hostAttrs),$$(t,n,e,u,h),U$(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function R$(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],m=n?n.get(g):null,C=m?m.outputs:null;u=bS(g.inputs,h,u,m?m.inputs:null),l=bS(g.outputs,h,l,C);const b=null===u||null===o||ic(e)?null:z$(u,h,o);a.push(b)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,s)}function PS(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function sI(){return ke.lFrame.currentDirectiveIndex}();try{is(s);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];fh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&V$(u,l)}}finally{is(-1),fh(o)}}function V$(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function EE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function U$(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ji(e)&&(n[""]=t)}}function $$(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Wo(i.type)),o=new uo(s,ji(i),ne);t.blueprint[r]=o,n[r]=o,function x$(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function O$(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Vh(t,n,i.hostVars,We),i)}function Ss(t,e,n,r,i,s){const o=yn(t,e);!function wE(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?Ee(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Be],o,s,t.value,n,r,i)}function H$(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)MS(r,n,o[a++],o[a++],o[a++])}function MS(t,e,n,r,i){const s=vt(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{vt(s)}}function z$(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function NS(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function xS(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];ph(n[r]),o.contentQueries(2,e[s],s)}}}function bm(t,e){return t[eo]?t[ug][Ei]=e:t[eo]=e,t[ug]=e,e}function TE(t,e,n){ph(0);const r=vt(null);try{e(t,n)}finally{vt(r)}}function FS(t,e){const n=t[Is],r=n?n.get(ho,null):null;r&&r.handleError(e)}function CE(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];MS(t.data[o],e[o],r,a,i)}}function W$(t,e){const n=qr(e,t),r=n[pe];!function q$(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Bt];null!==i&&null===n[ns]&&(n[ns]=iE(i,n[Is])),DE(r,n,n[Xt])}function DE(t,e,n){Qo(e);try{const r=t.viewQuery;null!==r&&TE(1,r,n);const i=t.template;null!==i&&CS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&xS(t,e),t.staticViewQueries&&TE(2,t.viewQuery,n);const s=t.components;null!==s&&function G$(t,e){for(let n=0;n<e.length;n++)W$(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ue]&=-5,gh()}}let LS=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function qv(t,e,n){const r=Object.create(Gv);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>yg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!qa(r))return;r.hasRun=!0;const o=mc(r);try{r.cleanupFn(),r.cleanupFn=Cg,r.fn(i)}finally{Xd(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new t})}return t})();function Sm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Vn(i,a):2==s&&(r=Vn(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Fh(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(xt(s)),zn(s)&&US(s,r);const o=n.type;if(8&o)Fh(t,e,n.child,r);else if(32&o){const a=SI(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=vb(e,n);if(Array.isArray(a))r.push(...a);else{const u=Ah(e[pn]);Fh(u[pe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function US(t,e){for(let n=nr;n<t.length;n++){const r=t[n],i=r[pe].firstChild;null!==i&&Fh(r[pe],r,i,e)}t[$i]!==t[Bt]&&e.push(t[$i])}function Rm(t,e,n,r=!0){const i=e[Es],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{BS(t,e,t.template,n)}catch(u){throw r&&FS(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function BS(t,e,n,r){const i=e[Ue];if(256!=(256&i)){e[Es].effectManager?.flush(),Qo(e);try{Ec(e),function hh(t){return ke.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&CS(t,e,n,2,r);const o=3==(3&i);if(o){const l=t.preOrderCheckHooks;null!==l&&Yo(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Jo(e,l,0,null),_h(e,0)}if(function Q$(t){for(let e=ab(t);null!==e;e=ub(e)){if(!e[cg])continue;const n=e[zo];for(let r=0;r<n.length;r++){Jv(n[r])}}}(e),$S(e,2),null!==t.contentQueries&&xS(t,e),o){const l=t.contentCheckHooks;null!==l&&Yo(e,l)}else{const l=t.contentHooks;null!==l&&Jo(e,l,1),_h(e,1)}!function E$(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=yS(e,no);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)is(~s);else{const o=s,a=n[++i],u=n[++i];iI(a,o),r.dirty=!1;const l=mc(r);try{u(2,e[o])}finally{Xd(r,l)}}}}finally{null===e[no]&&vS(e,no),is(-1)}}(t,e);const a=t.components;null!==a&&HS(e,a,0);const u=t.viewQuery;if(null!==u&&TE(2,u,r),o){const l=t.viewCheckHooks;null!==l&&Yo(e,l)}else{const l=t.viewHooks;null!==l&&Jo(e,l,2),_h(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Ue]&=-73,wc(e)}finally{gh()}}}function $S(t,e){for(let n=ab(t);null!==n;n=ub(n))for(let r=nr;r<n.length;r++)jS(n[r],e)}function Y$(t,e,n){jS(qr(e,t),n)}function jS(t,e){if(!function Rg(t){return 128==(128&t[Ue])}(t))return;const n=t[pe],r=t[Ue];if(80&r&&0===e||1024&r||2===e)BS(n,t,n.template,t[Xt]);else if(t[Xs]>0){$S(t,1);const i=n.components;null!==i&&HS(t,i,1)}}function HS(t,e,n){for(let r=0;r<e.length;r++)Y$(t,e[r],n)}class Lh{get rootNodes(){const e=this._lView,n=e[pe];return Fh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xt]}set context(e){this._lView[Xt]=e}get destroyed(){return 256==(256&this._lView[Ue])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[$t];if(zn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(am(e,r),Qg(n,r))}this._attachedToViewContainer=!1}PI(this._lView[pe],this._lView)}onDestroy(e){!function Tc(t,e){if(256==(256&t[Ue]))throw new H(911,!1);null===t[Ts]&&(t[Ts]=[]),t[Ts].push(e)}(this._lView,e)}markForCheck(){kh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ue]&=-129}reattach(){this._lView[Ue]|=128}detectChanges(){Rm(this._lView[pe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function jU(t,e){Sh(t,e,e[Be],2,null,null)}(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e}}class J$ extends Lh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Rm(e[pe],e,e[Xt],!1)}checkNoChanges(){}get context(){return null}}class zS extends Tm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=it(e);return new Uh(n,this.ngModule)}}function WS(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class ej{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ec(r);const i=this.injector.get(e,aE,r);return i!==aE||n===aE?i:this.parentInjector.get(e,n,r)}}class Uh extends Kb{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=WS(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return WS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function og(t){return t.map(jd).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Gi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new ej(e,s):e,a=o.get(Yb,null);if(null===a)throw new H(407,!1);const g={rendererFactory:a,sanitizer:o.get(YB,null),effectManager:o.get(LS,null),afterRenderEventManager:o.get(pE,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?function T$(t,e,n,r){const s=r.get(pS,!1)||n===Ii.ShadowDom,o=t.selectRootElement(e,s);return function C$(t){AS(t)}(o),o}(m,r,this.componentDef.encapsulation,o):om(m,y,function X$(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),U=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let N=null;null!==C&&(N=iE(C,o,!0));const z=vE(0,null,null,1,0,null,null,null,null,null,null),se=Am(null,z,null,U,null,null,g,m,o,null,N);let he,je;Qo(se);try{const Ct=this.componentDef;let Qn,qp=null;Ct.findHostDirectiveDefs?(Qn=[],qp=new Map,Ct.findHostDirectiveDefs(Ct,Qn,qp),Qn.push(Ct)):Qn=[Ct];const Av=function nj(t,e){const n=t[pe],r=nt;return t[r]=e,tl(n,r,2,"#host",null)}(se,C),sX=function rj(t,e,n,r,i,s,o){const a=i[pe];!function ij(t,e,n,r){for(const i of t)e.mergedAttrs=Uo(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Sm(e,e.mergedAttrs,!0),null!==n&&Tb(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=iE(e,i[Is]));const l=s.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=Am(i,DS(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&EE(a,t,r.length-1),bm(i,g),i[t.index]=g}(Av,C,Ct,Qn,se,g,m);je=Sg(z,nt),C&&function oj(t,e,n,r){if(r)kd(t,n,["ng-version",Jb.full]);else{const{attrs:i,classes:s}=function Hd(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!zr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&kd(t,n,i),s&&s.length>0&&wb(t,n,s.join(" "))}}(m,Ct,C,r),void 0!==n&&function aj(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(je,this.ngContentSelectors,n),he=function sj(t,e,n,r,i,s){const o=Wn(),a=i[pe],u=yn(o,i);RS(a,i,o,n,null,r);for(let h=0;h<n.length;h++)Tr(bs(i,a,o.directiveStart+h,o),i);PS(a,i,o),u&&Tr(u,i);const l=bs(i,a,o.directiveStart+o.componentOffset,o);if(t[Xt]=i[Xt]=l,null!==s)for(const h of s)h(l,e);return mE(a,o,t),l}(sX,Ct,Qn,qp,se,[uj]),DE(z,se,null)}finally{gh()}return new tj(this.componentType,he,Yc(je,se),se,je)}}class tj extends WB{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new J$(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;CE(s[pe],s,i,e,n),this.previousInputValues.set(e,n),kh(qr(this._tNode.index,s))}}get injector(){return new rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function uj(){const t=Wn();Sc(Y()[pe],t)}function St(t){let e=function qS(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(ji(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Pm(t.inputs),o.inputTransforms=Pm(t.inputTransforms),o.declaredInputs=Pm(t.declaredInputs),o.outputs=Pm(t.outputs);const a=i.hostBindings;a&&hj(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&lj(t,u),l&&dj(t,l),Dt(t.inputs,i.inputs),Dt(t.declaredInputs,i.declaredInputs),Dt(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Dt(o.inputTransforms,i.inputTransforms)),ji(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===St&&(n=!1)}}e=Object.getPrototypeOf(e)}!function cj(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Uo(i.hostAttrs,n=Uo(n,i.hostAttrs))}}(r)}function Pm(t){return t===Ui?{}:t===gt?[]:t}function lj(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function dj(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function hj(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function QS(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function Mm(t){return!!function AE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Dr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ps(t,e,n,r){const i=Y();return Dr(i,ao(),e)&&(dt(),Ss(en(),i,t,e,n,r)),Ps}function rl(t,e,n,r){return Dr(t,ao(),n)?e+Ee(n)+r:We}function NE(t,e,n,r,i,s,o,a){const u=Y(),l=dt(),h=t+nt,g=l.firstCreatePass?function Fj(t,e,n,r,i,s,o,a,u){const l=e.consts,h=tl(e,t,4,o||null,Ds(l,a));IE(e,n,h,Ds(l,u)),Sc(e,h);const g=h.tView=vE(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,s,o):l.data[h];zi(g,!1);const m=cR(l,u,g,t);bc()&&cm(l,u,m,g),Tr(m,u),bm(u,u[h]=NS(m,u,m,g)),Kd(g)&&_E(l,u,g),null!=o&&yE(u,g,a)}let cR=function lR(t,e,n,r){return As(!0),e[Be].createComment("")};function go(t,e,n){const r=Y();return Dr(r,ao(),e)&&Di(dt(),en(),r,t,e,r[Be],n,!1),go}function xE(t,e,n,r,i){const o=i?"class":"style";CE(t,n,e.inputs[o],o,r)}function jt(t,e,n,r){const i=Y(),s=dt(),o=nt+t,a=i[Be],u=s.firstCreatePass?function jj(t,e,n,r,i,s){const o=e.consts,u=tl(e,t,2,r,Ds(o,i));return IE(e,n,u,Ds(o,s)),null!==u.attrs&&Sm(u,u.attrs,!1),null!==u.mergedAttrs&&Sm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],l=dR(s,i,u,a,e,t);i[o]=l;const h=Kd(u);return zi(u,!0),Tb(a,l,u),32!=(32&u.flags)&&bc()&&cm(s,i,l,u),0===function Xv(){return ke.lFrame.elementDepthCount}()&&Tr(l,i),function uh(){ke.lFrame.elementDepthCount++}(),h&&(_E(s,i,u),mE(s,u,i)),null!==r&&yE(i,u),jt}function Ot(){let t=Wn();Ja()?function Xa(){ke.lFrame.isParent=!1}():(t=t.parent,zi(t,!1));const e=t;(function Mg(t){return ke.skipHydrationRootTNode===t})(e)&&function tI(){ke.skipHydrationRootTNode=null}(),function ch(){ke.lFrame.elementDepthCount--}();const n=dt();return n.firstCreatePass&&(Sc(n,t),Zd(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Pc(t){return 0!=(8&t.flags)}(e)&&xE(n,e,Y(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function qg(t){return 0!=(16&t.flags)}(e)&&xE(n,e,Y(),e.stylesWithoutHost,!1),Ot}function Ar(t,e,n,r){return jt(t,e,n,r),Ot(),Ar}let dR=(t,e,n,r,i,s)=>(As(!0),om(r,i,function mh(){return ke.lFrame.currentNamespace}()));function zh(t){return!!t&&"function"==typeof t.then}function pR(t){return!!t&&"function"==typeof t.subscribe}function Mn(t,e,n,r){const i=Y(),s=dt(),o=Wn();return function mR(t,e,n,r,i,s,o){const a=Kd(r),l=t.firstCreatePass&&function kS(t){return t.cleanup||(t.cleanup=[])}(t),h=e[Xt],g=function OS(t){return t[$o]||(t[$o]=[])}(e);let m=!0;if(3&r.type||o){const b=yn(r,e),M=o?o(b):b,U=g.length,N=o?se=>o(xt(se[r.index])):r.index;let z=null;if(!o&&a&&(z=function Kj(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[$o],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==z)(z.__ngLastListenerFn__||z).__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1;else{s=yR(r,e,h,s,!1);const se=n.listen(M,i,s);g.push(s,se),l&&l.push(i,N,U,U+1)}}else s=yR(r,e,h,s,!1);const y=r.outputs;let C;if(m&&null!==y&&(C=y[i])){const b=C.length;if(b)for(let M=0;M<b;M+=2){const he=e[C[M]][C[M+1]].subscribe(s),je=g.length;g.push(s,he),l&&l.push(i,r.index,je,-(je+1))}}}(s,i,i[Be],o,t,e,r),Mn}function _R(t,e,n,r){try{return oi(6,e,n),!1!==n(r)}catch(i){return FS(t,i),!1}finally{oi(7,e,n)}}function yR(t,e,n,r,i){return function s(o){if(o===Function)return r;kh(t.componentOffset>-1?qr(t.index,e):e);let u=_R(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=_R(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function Vm(t,e,n,r,i){const s=Y(),o=rl(s,e,n,r);return o!==We&&Di(dt(),en(),s,t,o,s[Be],i,!1),Vm}function Fm(t,e){return t<<17|e<<2}function ia(t){return t>>17&32767}function VE(t){return 2|t}function uu(t){return(131068&t)>>2}function FE(t,e){return-131069&t|e<<2}function LE(t){return 1|t}function SR(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ia(s):uu(s),u=!1;for(;0!==a&&(!1===u||o);){const h=t[a+1];sH(t[a],e)&&(u=!0,t[a+1]=r?LE(h):VE(h)),a=r?ia(h):uu(h)}u&&(t[n+1]=r?VE(s):LE(s))}function sH(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Bc(t,e)>=0}function Lm(t,e){return function as(t,e,n,r){const i=Y(),s=dt(),o=function rs(t){const e=ke.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function FR(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[fr()],o=function VR(t,e){return e>=t.expandoStartIndex}(t,n);(function $R(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function pH(t,e,n,r){const i=function eu(t){const e=ke.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Wh(n=UE(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=UE(i,t,e,n,r),null===s){let u=function gH(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==uu(r))return t[ia(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=UE(null,t,e,u[1],r),u=Wh(u,e.attrs,r),function mH(t,e,n,r){t[ia(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function _H(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Wh(r,t[s].hostAttrs,n);return Wh(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function rH(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ia(o),u=uu(o);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||Bc(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=ia(t[a+1]);t[r+1]=Fm(m,a),0!==m&&(t[m+1]=FE(t[m+1],r)),t[a+1]=function tH(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Fm(a,0),0!==a&&(t[a+1]=FE(t[a+1],r)),a=r;else t[r+1]=Fm(u,0),0===a?a=r:t[u+1]=FE(t[u+1],r),u=r;l&&(t[r+1]=VE(t[r+1])),SR(t,h,r,!0),SR(t,h,r,!1),function iH(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Bc(s,e)>=0&&(n[r+1]=LE(n[r+1]))}(e,h,t,r,s),o=Fm(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==We&&Dr(i,o,e)&&function UR(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function nH(t){return 1==(1&t)}(l)?BR(u,e,n,i,uu(l),o):void 0;Um(h)||(Um(s)||function eH(t){return 2==(2&t)}(l)&&(s=BR(u,null,n,i,a,o)),function JU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:na.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=na.Important),t.setStyle(n,r,i,s))}}(r,o,Ic(fr(),n),i,s))}(s,s.data[fr()],i,i[Be],t,i[o+1]=function EH(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=De(ra(t)))),t}(e,n),r,o)}(t,e,null,!0),Lm}function UE(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Wh(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Wh(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),wi(t,o,!!n||e[++s]))}return void 0===t?null:t}function BR(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===We&&(m=g?gt:void 0);let y=g?vI(m,r):h===r?m:void 0;if(l&&!Um(y)&&(y=vI(u,r)),Um(y)&&(a=y,o))return a;const C=t[i+1];i=o?ia(C):uu(C)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=vI(u,r))}return a}function Um(t){return void 0!==t}function In(t,e=""){const n=Y(),r=dt(),i=t+nt,s=r.firstCreatePass?tl(r,i,1,e,null):r.data[i],o=jR(r,n,s,e,t);n[i]=o,bc()&&cm(r,n,o,s),zi(s,!1)}let jR=(t,e,n,r,i)=>(As(!0),function sm(t,e){return t.createText(e)}(e[Be],r));function Bm(t){return cu("",t,""),Bm}function cu(t,e,n){const r=Y(),i=rl(r,t,e,n);return i!==We&&function po(t,e,n){const r=Ic(e,t);!function lb(t,e,n){t.setValue(e,n)}(t[Be],r,n)}(r,fr(),i),cu}const fl="en-US";let lP=fl;function jE(t,e,n,r,i){if(t=R(t),Array.isArray(t))for(let s=0;s<t.length;s++)jE(t[s],e,n,r,i);else{const s=dt(),o=Y(),a=Wn();let u=ou(t)?t:R(t.provide);const l=Hb(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(ou(t)||!t.multi){const y=new uo(l,i,ne),C=zE(u,e,i?h:h+m,g);-1===C?(ye(E(a,o),s,u),HE(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[C]=y,o[C]=y)}else{const y=zE(u,e,h+m,g),C=zE(u,e,h,h+m),M=C>=0&&n[C];if(i&&!M||!i&&!(y>=0&&n[y])){ye(E(a,o),s,u);const U=function jz(t,e,n,r,i){const s=new uo(t,n,ne);return s.multi=[],s.index=e,s.componentProviders=0,kP(s,i,r&&!n),s}(i?$z:Bz,n.length,i,r,l);!i&&M&&(n[C].providerFactory=U),HE(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),o.push(U)}else HE(s,t,y>-1?y:C,kP(n[i?C:y],l,!i&&r));!i&&r&&M&&n[C].componentProviders++}}}function HE(t,e,n,r){const i=ou(e),s=function SB(t){return!!t.useClass}(e);if(i||s){const u=(s?R(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function kP(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function zE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Bz(t,e,n,r){return WE(this.multi,[])}function $z(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=bs(n,n[pe],this.providerFactory.index,r);s=a.slice(0,o),WE(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],WE(i,s);return s}function WE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function un(t,e=[]){return n=>{n.providersResolver=(r,i)=>function Uz(t,e,n){const r=dt();if(r.firstCreatePass){const i=ji(t);jE(n,r.data,r.blueprint,i,!0),jE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class du{}class VP{}class qE extends du{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zS(this);const i=dr(e);this._bootstrapComponents=fo(i.bootstrap),this._r3Injector=rS(e,n,[{provide:du,useValue:this},{provide:Tm,useValue:this.componentFactoryResolver},...r],De(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class GE extends VP{constructor(e){super(),this.moduleType=e}create(e){return new qE(this.moduleType,e,[])}}class FP extends du{constructor(e){super(),this.componentFactoryResolver=new zS(this),this.instance=null;const n=new Gc([...e.providers,{provide:du,useValue:this},{provide:Tm,useValue:this.componentFactoryResolver}],e.parent||mm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ZE(t,e,n=null){return new FP({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Wz=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Ub(0,n.type),i=r.length>0?ZE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Re({token:t,providedIn:"environment",factory:()=>new t(oe(Gi))})}return t})();function LP(t){t.getStandaloneInjector=e=>e.get(Wz).getOrCreateStandaloneInjector(t)}function WP(t,e,n,r,i,s){const o=e+n;return Dr(t,o,i)?function Rs(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function Yh(t,e){const n=t[e];return n===We?void 0:n}(t,o+1)}function YP(t,e,n){const r=t+nt,i=Y(),s=function Go(t,e){return t[e]}(i,r);return function Jh(t,e){return t[pe].data[e].pure}(i,r)?WP(i,function hr(){const t=ke.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function _4(t,e,n,r=!0){const i=e[pe];if(function zU(t,e,n,r){const i=nr+r,s=n.length;r>0&&(n[i-1][Ei]=e),r<s-nr?(e[Ei]=n[i],B0(n,nr+r,e)):(n.push(e),e[Ei]=null),e[$t]=n;const o=e[to];null!==o&&n!==o&&function WU(t,e){const n=t[zo];e[pn]!==e[$t][$t][pn]&&(t[cg]=!0),null===n?t[zo]=[e]:n.push(e)}(o,e);const a=e[ii];null!==a&&a.insertView(t),e[Ue]|=128}(i,e,t,n),r){const s=OI(n,t),o=e[Be],a=um(o,t[$i]);null!==a&&function $U(t,e,n,r,i,s){r[Bt]=i,r[tr]=e,Sh(t,r,n,1,i,s)}(i,t[tr],o,e,a,s)}}Symbol;let mo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=I4}return t})();const y4=mo,v4=class extends y4{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function m4(t,e,n,r){const i=e.tView,a=Am(t,i,n,4096&t[Ue]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[to]=t[e.index];const l=t[ii];return null!==l&&(a[ii]=l.createEmbeddedView(i)),DE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Lh(i)}};function I4(){return function Wm(t,e){return 4&t.type?new v4(e,t,Yc(t,e)):null}(Wn(),Y())}let cs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=A4}return t})();function A4(){return function iM(t,e){let n;const r=e[t.index];return zn(r)?n=r:(n=NS(r,e,null,t),e[t.index]=n,bm(e,n)),sM(n,e,t,r),new nM(n,t,e)}(Wn(),Y())}const b4=cs,nM=class extends b4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Yc(this._hostTNode,this._hostLView)}get injector(){return new rr(this._hostTNode,this._hostLView)}get parentInjector(){const e=X(this._hostTNode,this._hostLView);if(yh(e)){const n=ru(e,this._hostLView),r=nu(e);return new rr(n[pe].data[r+8],n)}return new rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=rM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-nr}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function wh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}const u=o?e:new Uh(it(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?l:this.parentInjector).get(Gi,null);M&&(s=M)}it(u.componentType??{});const y=u.create(l,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Yv(t){return zn(t[$t])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[$t],h=new nM(l,l[tr],l[$t]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return _4(a,i,o,!r),e.attachToViewContainerRef(),B0(YE(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=rM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=am(this._lContainer,n);r&&(Qg(YE(this._lContainer),n),PI(r[pe],r))}detach(e){const n=this._adjustIndex(e,-1),r=am(this._lContainer,n);return r&&null!=Qg(YE(this._lContainer),n)?new Lh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function rM(t){return t[8]}function YE(t){return t[8]||(t[8]=[])}let sM=function oM(t,e,n,r){if(t[$i])return;let i;i=8&n.type?xt(r):function S4(t,e){const n=t[Be],r=n.createComment(""),i=yn(e,t);return su(n,um(n,i),r,function KU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[$i]=i};const Zm=new ue("Application Initializer");let uw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=we(Zm,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(zh(s))n.push(s);else if(pR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),MM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const _o=new ue("LocaleId",{providedIn:"root",factory:()=>we(_o,Ye.Optional|Ye.SkipSelf)||function sW(){return typeof $localize<"u"&&$localize.locale||fl}()});let NM=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class uW{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let xM=(()=>{class t{compileModuleSync(n){return new GE(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=fo(dr(n).declarations).reduce((o,a)=>{const u=it(a);return u&&o.push(new Uh(u)),o},[]);return new uW(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const FM=new ue(""),Qm=new ue("");let fw,dw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,fw||(function PW(t){fw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{It.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(oe(It),oe(hw),oe(Qm))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})(),hw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return fw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),sa=null;const LM=new ue("AllowMultipleToken"),pw=new ue("PlatformDestroyListeners"),gw=new ue("appBootstrapListener");class BM{constructor(e,n){this.name=e,this.token=n}}function jM(t,e,n=[]){const r=`Platform: ${e}`,i=new ue(r);return(s=[])=>{let o=mw();if(!o||o.injector.get(LM,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function xW(t){if(sa&&!sa.get(LM,!1))throw new H(400,!1);(function UM(){!function jv(t){$v=t}(()=>{throw new H(600,!1)})})(),sa=t;const e=t.get(zM);(function $M(t){t.get(zb,null)?.forEach(n=>n())})(t)}(function HM(t=[],e){return Cr.create({name:e,providers:[{provide:GI,useValue:"platform"},{provide:pw,useValue:new Set([()=>sa=null])},...t]})}(a,r))}return function kW(t){const e=mw();if(!e)throw new H(401,!1);return e}()}}function mw(){return sa?.get(zM)??null}let zM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function VW(t="zone.js",e){return"noop"===t?new c$:"zone.js"===t?new It(e):t}(r?.ngZone,function WM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function zz(t,e,n){return new qE(t,e,n)}(n.moduleType,this.injector,function QM(t){return[{provide:It,useFactory:t},{provide:Nh,multi:!0,useFactory:()=>{const e=we(LW,{optional:!0});return()=>e.initialize()}},{provide:KM,useFactory:FW},{provide:uS,useFactory:cS}]}(()=>i)),o=s.injector.get(ho,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{Ym(this._modules,s),a.unsubscribe()})}),function qM(t,e,n){try{const r=n();return zh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(uw);return a.runInitializers(),a.donePromise.then(()=>(function dP(t){Xn(t,"Expected localeId to be defined"),"string"==typeof t&&(lP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(_o,fl)||fl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=GM({},r);return function MW(t,e,n){const r=new GE(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(hu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new H(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new H(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(pw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Cr))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function GM(t,e){return Array.isArray(e)?e.reduce(GM,t):{...t,...e}}let hu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=we(KM),this.zoneIsStable=we(uS),this.componentTypes=[],this.components=[],this.isStable=we(NM).hasPendingTasks.pipe(me(n=>n?A(!1):this.zoneIsStable),Oe(),W()),this._injector=we(Gi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Kb;if(!this._injector.get(uw).done)throw!i&&function Bo(t){const e=it(t)||jn(t)||Hn(t);return null!==e&&e.standalone}(n),new H(405,!1);let o;o=i?n:this._injector.get(Tm).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function NW(t){return t.isBoundToModule}(o)?void 0:this._injector.get(du),l=o.create(Cr.NULL,[],r||o.selector,a),h=l.location.nativeElement,g=l.injector.get(FM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Ym(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new H(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Ym(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(gw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ym(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ym(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const KM=new ue("",{providedIn:"root",factory:()=>we(ho).handleError.bind(void 0)});function FW(){const t=we(It),e=we(ho);return n=>t.runOutsideAngular(()=>e.handleError(n))}let LW=(()=>{class t{constructor(){this.zone=we(It),this.applicationRef=we(hu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let Jm=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=BW}return t})();function BW(t){return function $W(t,e,n){if(ro(t)&&!n){const r=qr(t.index,e);return new Lh(r,r)}return 47&t.type?new Lh(e[pn],e):null}(Wn(),Y(),16==(16&t))}class eN{constructor(){}supports(e){return Mm(e)}create(e){return new GW(e)}}const qW=(t,e)=>e;class GW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||qW}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<nN(r,i,s)?n:r,a=nN(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const y=m<s.length?s[m]:s[m]=0,C=y+m;h<=C&&C<l&&(s[m]=y+1)}s[o.previousIndex]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Mm(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function vj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new ZW(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new tN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ZW{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KW{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class tN{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new KW,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nN(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function iN(){return new t_([new eN])}let t_=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:iN});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||iN()),deps:[[t,new Jg,new Ti]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new H(901,!1)}}return t})();const eq=jM(null,"core",[]);let tq=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(oe(hu))};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({})}return t})();function ml(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let Tw=null;function oa(){return Tw}class gq{}const Ki=new ue("DocumentToken");let Cw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(_q)},providedIn:"platform"})}return t})();const mq=new ue("Location Initialized");let _q=(()=>{class t extends Cw{constructor(){super(),this._doc=we(Ki),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oa().getBaseHref(this._doc)}onPopState(n){const r=oa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=oa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function Dw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function pN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function yo(t){return t&&"?"!==t[0]?"?"+t:t}let pu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(mN)},providedIn:"root"})}return t})();const gN=new ue("appBaseHref");let mN=(()=>{class t extends pu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??we(Ki).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Dw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+yo(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+yo(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+yo(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Cw),oe(gN,8))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yq=(()=>{class t extends pu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Dw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+yo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+yo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Cw),oe(gN,8))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})(),Aw=(()=>{class t{constructor(n){this._subject=new vn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Eq(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(pN(_N(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+yo(r))}normalize(n){return t.stripTrailingSlash(function Iq(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,_N(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+yo(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+yo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=yo;static#t=this.joinWithSlash=Dw;static#n=this.stripTrailingSlash=pN;static#r=this.\u0275fac=function(r){return new(r||t)(oe(pu))};static#i=this.\u0275prov=Re({token:t,factory:function(){return function vq(){return new Aw(oe(pu))}()},providedIn:"root"})}return t})();function _N(t){return t.replace(/\/index.html$/,"")}class uG{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fw=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new uG(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),SN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{SN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(ne(cs),ne(mo),ne(t_))};static#t=this.\u0275dir=xe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function SN(t,e){t.context.$implicit=e.item}class fG{createSubscription(e,n){return Tg(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Tg(()=>e.unsubscribe())}}class pG{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const gG=new pG,mG=new fG;let MN=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(zh(n))return gG;if(pR(n))return mG;throw function ds(t,e){return new H(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Jm,16))};static#t=this.\u0275pipe=er({name:"async",type:t,pure:!1,standalone:!0})}return t})(),OG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({})}return t})();const xN="browser";function ON(t){return t===xN}function f_(t){return"server"===t}let LG=(()=>{class t{static#e=this.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new UG(oe(Ki),window)})}return t})();class UG{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function BG(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class l3 extends gq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class zw extends l3{static makeCurrent(){!function pq(t){Tw||(Tw=t)}(new zw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function d3(){return af=af||document.querySelector("base"),af?af.getAttribute("href"):null}();return null==n?null:function h3(t){m_=m_||document.createElement("a"),m_.setAttribute("href",t);const e=m_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){af=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sG(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let m_,af=null,p3=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const Ww=new ue("EventManagerPlugins");let UN=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ww),oe(It))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();class BN{constructor(e){this._doc=e}}const qw="ng-app-id";let $N=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=f_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${qw}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(qw),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(qw,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ki),oe(_m),oe(Wb,8),oe(os))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const Gw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zw=/%COMP%/g,y3=new ue("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function HN(t,e){return e.map(n=>n.replace(Zw,t))}let zN=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=f_(a),this.defaultRenderer=new Kw(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ii.ShadowDom&&(r={...r,encapsulation:Ii.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof qN?i.applyToHost(n):i instanceof Qw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Ii.Emulated:s=new qN(u,l,r,this.appId,h,o,a,g);break;case Ii.ShadowDom:return new w3(u,l,n,r,o,a,this.nonce,g);default:s=new Qw(u,l,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(UN),oe($N),oe(_m),oe(y3),oe(Ki),oe(os),oe(It),oe(Wb))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();class Kw{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Gw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(WN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(WN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Gw[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Gw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(na.DashCase|na.Important)?e.style.setProperty(n,r,i&na.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&na.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=oa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function WN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class w3 extends Kw{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=HN(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Qw extends Kw{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?HN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class qN extends Qw{constructor(e,n,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=function v3(t){return"_ngcontent-%COMP%".replace(Zw,t)}(l),this.hostAttr=function I3(t){return"_nghost-%COMP%".replace(Zw,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let T3=(()=>{class t extends BN{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ki))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const GN=["alt","control","meta","shift"],C3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},D3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let A3=(()=>{class t extends BN{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>oa().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),GN.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=C3[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),GN.forEach(o=>{o!==i&&(0,D3[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ki))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const KN=[{provide:os,useValue:xN},{provide:zb,useValue:function b3(){zw.makeCurrent()},multi:!0},{provide:Ki,useFactory:function R3(){return function rB(t){FI=t}(document),document},deps:[]}],P3=jM(eq,"browser",KN),M3=new ue(""),QN=[{provide:Qm,useClass:class f3{addToWindow(e){At.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new H(5103,!1);return s},At.getAllAngularTestabilities=()=>e.getAllTestabilities(),At.getAllAngularRootElements=()=>e.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(r=>{const i=At.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?oa().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:FM,useClass:dw,deps:[It,hw,Qm]},{provide:dw,useClass:dw,deps:[It,hw,Qm]}],YN=[{provide:GI,useValue:"root"},{provide:ho,useFactory:function S3(){return new ho},deps:[]},{provide:Ww,useClass:T3,multi:!0,deps:[Ki,It,os]},{provide:Ww,useClass:A3,multi:!0,deps:[Ki]},zN,$N,UN,{provide:Yb,useExisting:zN},{provide:class $G{},useClass:p3,deps:[]},[]];let N3=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:_m,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(M3,12))};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({providers:[...YN,...QN],imports:[OG,tq]})}return t})(),JN=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Ki))};static#t=this.\u0275prov=Re({token:t,factory:function(r){let i=null;return i=r?new r:function O3(){return new JN(oe(Ki))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;var __=Me(106);__.Z.registerVersion("firebase","10.7.0","app-compat");const $3=["ngOnDestroy"];class nx{constructor(e){return e}}const y_=new ue("angularfire2.app.options"),Jw=new ue("angularfire2.app.name");function Xw(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=__.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>__.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;z3("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new nx(o)}const z3=(t,...e)=>{};function rx(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function W3(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(ix("error",`${e} was already initialized on the ${n} Firebase App with different settings.${q3?" You may need to reload as Firebase is not HMR aware.":""}`),ix("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const q3=typeof module<"u"&&!!module.hot,ix=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];const{isArray:Z3}=Array,{getPrototypeOf:K3,prototype:Q3,keys:Y3}=Object;function sx(t){if(1===t.length){const e=t[0];if(Z3(e))return{args:e,keys:null};if(function J3(t){return t&&"object"==typeof t&&K3(t)===Q3}(e)){const n=Y3(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:X3}=Array;function eT(t){return de(e=>function e9(t,e){return X3(e)?t(...e):t(e)}(t,e))}function ox(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function tT(...t){const e=vi(t),n=Fi(t),{args:r,keys:i}=sx(t);if(0===r.length)return I([],e);const s=new Le(function t9(t,e,n=hn){return r=>{ax(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)ax(e,()=>{const l=I(t[u],e);let h=!1;l.subscribe(ae(r,g=>{s[u]=g,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>ox(i,o):hn));return n?s.pipe(eT(n)):s}function ax(t,e,n){t?Fr(n,t,e):e()}const v_=q(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function uf(...t){return function n9(){return Lr(1)}()(I(t,vi(t)))}function I_(t){return new Le(e=>{et(t()).subscribe(e)})}function yl(t,e){const n=T(t)?t:()=>t,r=i=>i.error(n());return new Le(e?i=>e.schedule(r,0,i):r)}function nT(){return K((t,e)=>{let n=null;t._refCount++;const r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class rT extends Le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;const n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return nT()(this)}}function li(t){return t<=0?()=>fn:K((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function E_(...t){const e=vi(t);return K((n,r)=>{(e?uf(t,n,e):uf(t,n)).subscribe(r)})}function gr(t,e){return K((n,r)=>{let i=0;n.subscribe(ae(r,s=>t.call(e,s,i++)&&r.next(s)))})}function w_(t){return K((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ux(t=r9){return K((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function r9(){return new v_}function ua(t,e){const n=arguments.length>=2;return r=>r.pipe(t?gr((i,s)=>t(i,s,r)):hn,li(1),n?w_(e):ux(()=>new v_))}function cf(t,e){return T(e)?yt(t,e,1):yt(t,1)}function ir(t,e,n){const r=T(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ae(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):hn}function gu(t){return K((e,n)=>{let s,r=null,i=!1;r=e.subscribe(ae(n,void 0,void 0,o=>{s=et(t(o,gu(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function T_(t,e){return K(function i9(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ae(o,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function iT(t){return t<=0?()=>fn:K((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function cx(t){return de(()=>t)}function sT(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ge="primary",lf=Symbol("RouteTitle");class a9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function vl(t){return new a9(t)}function u9(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function xs(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!lx(t[i],e[i]))return!1;return!0}function lx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function dx(t){return t.length>0?t[t.length-1]:null}function ca(t){return function G3(t){return!!t&&(t instanceof Le||T(t.lift)&&T(t.subscribe))}(t)?t:zh(t)?I(Promise.resolve(t)):A(t)}const l9={exact:function px(t,e,n){if(!mu(t.segments,e.segments)||!C_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!px(t.children[r],e.children[r],n))return!1;return!0},subset:gx},hx={exact:function d9(t,e){return xs(t,e)},subset:function h9(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>lx(t[n],e[n]))},ignored:()=>!0};function fx(t,e,n){return l9[n.paths](t.root,e.root,n.matrixParams)&&hx[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function gx(t,e,n){return mx(t,e,e.segments,n)}function mx(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!mu(i,n)||e.hasChildren()||!C_(i,n,r))}if(t.segments.length===n.length){if(!mu(t.segments,n)||!C_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!gx(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(mu(t.segments,i)&&C_(t.segments,i,r)&&t.children[Ge])&&mx(t.children[Ge],e,s,r)}}function C_(t,e,n){return e.every((r,i)=>hx[n](t[i].parameters,r.parameters))}class Il{constructor(e=new Rt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vl(this.queryParams)),this._queryParamMap}toString(){return g9.serialize(this)}}class Rt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return D_(this)}}class df{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=vl(this.parameters)),this._parameterMap}toString(){return vx(this)}}function mu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let hf=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return new oT},providedIn:"root"})}return t})();class oT{parse(e){const n=new A9(e);return new Il(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${ff(e.root,!0)}`,r=function y9(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${A_(n)}=${A_(i)}`).join("&"):`${A_(n)}=${A_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function m9(t){return encodeURI(t)}(e.fragment)}`:""}`}}const g9=new oT;function D_(t){return t.segments.map(e=>vx(e)).join("/")}function ff(t,e){if(!t.hasChildren())return D_(t);if(e){const n=t.children[Ge]?ff(t.children[Ge],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ge&&r.push(`${i}:${ff(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function p9(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ge&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ge&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ge?[ff(t.children[Ge],!1)]:[`${i}:${ff(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ge]?`${D_(t)}/${n[0]}`:`${D_(t)}/(${n.join("//")})`}}function _x(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function A_(t){return _x(t).replace(/%3B/gi,";")}function aT(t){return _x(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function b_(t){return decodeURIComponent(t)}function yx(t){return b_(t.replace(/\+/g,"%20"))}function vx(t){return`${aT(t.path)}${function _9(t){return Object.keys(t).map(e=>`;${aT(e)}=${aT(t[e])}`).join("")}(t.parameters)}`}const v9=/^[^\/()?;#]+/;function uT(t){const e=t.match(v9);return e?e[0]:""}const I9=/^[^\/()?;=#]+/,w9=/^[^=?&#]+/,C9=/^[^&#]+/;class A9{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ge]=new Rt(e,n)),r}parseSegment(){const e=uT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new df(b_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function E9(t){const e=t.match(I9);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=uT(this.remaining);i&&(r=i,this.capture(r))}e[b_(n)]=b_(r)}parseQueryParam(e){const n=function T9(t){const e=t.match(w9);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function D9(t){const e=t.match(C9);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=yx(n),s=yx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=uT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ge);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ge]:new Rt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}}function Ix(t){return t.segments.length>0?new Rt([],{[Ge]:t}):t}function Ex(t){const e={};for(const r of Object.keys(t.children)){const s=Ex(t.children[r]);if(r===Ge&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function b9(t){if(1===t.numberOfChildren&&t.children[Ge]){const e=t.children[Ge];return new Rt(t.segments.concat(e.segments),e.children)}return t}(new Rt(t.segments,e))}function _u(t){return t instanceof Il}function wx(t){let e;const i=Ix(function n(s){const o={};for(const u of s.children){const l=n(u);o[u.outlet]=l}const a=new Rt(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function Tx(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return cT(i,i,i,n,r);const s=function R9(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Dx(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Dx(n,e,r)}(e);if(s.toRoot())return cT(i,i,new Rt([],{}),n,r);const o=function P9(t,e,n){if(t.isAbsolute)return new R_(e,!0,0);if(!n)return new R_(e,!1,NaN);if(null===n.parent)return new R_(n,!0,0);const r=S_(t.commands[0])?0:1;return function M9(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new R_(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?gf(o.segmentGroup,o.index,s.commands):Ax(o.segmentGroup,o.index,s.commands);return cT(i,o.segmentGroup,a,n,r)}function S_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function pf(t){return"object"==typeof t&&null!=t&&t.outlets}function cT(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=t===e?n:Cx(t,e,n);const a=Ix(Ex(o));return new Il(a,s,i)}function Cx(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:Cx(s,e,n)}),new Rt(t.segments,r)}class Dx{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&S_(r[0]))throw new H(4003,!1);const i=r.find(pf);if(i&&i!==dx(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function Ax(t,e,n){if(t||(t=new Rt([],{})),0===t.segments.length&&t.hasChildren())return gf(t,e,n);const r=function x9(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(pf(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!Sx(u,l,o))return s;r+=2}else{if(!Sx(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Rt(t.segments.slice(0,r.pathIndex),{});return s.children[Ge]=new Rt(t.segments.slice(r.pathIndex),t.children),gf(s,0,i)}return r.match&&0===i.length?new Rt(t.segments,{}):r.match&&!t.hasChildren()?lT(t,e,n):r.match?gf(t,0,i):lT(t,e,n)}function gf(t,e,n){if(0===n.length)return new Rt(t.segments,{});{const r=function N9(t){return pf(t[0])?t[0].outlets:{[Ge]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ge)&&t.children[Ge]&&1===t.numberOfChildren&&0===t.children[Ge].segments.length){const s=gf(t.children[Ge],e,n);return new Rt(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Ax(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Rt(t.segments,i)}}function lT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(pf(s)){const u=O9(s.outlets);return new Rt(r,u)}if(0===i&&S_(n[0])){r.push(new df(t.segments[e].path,bx(n[0]))),i++;continue}const o=pf(s)?s.outlets[Ge]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&S_(a)?(r.push(new df(o,bx(a))),i+=2):(r.push(new df(o,{})),i++)}return new Rt(r,{})}function O9(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=lT(new Rt([],{}),0,r))}),e}function bx(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Sx(t,e,n){return t==n.path&&xs(e,n.parameters)}const mf="imperative";class Os{constructor(e,n){this.id=e,this.url=n}}class P_ extends Os{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class la extends Os{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _f extends Os{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class El extends Os{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class M_ extends Os{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rx extends Os{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k9 extends Os{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V9 extends Os{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class F9 extends Os{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L9 extends Os{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U9{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class B9{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $9{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j9{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H9{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z9{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Px{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class dT{}class hT{constructor(e){this.url=e}}class W9{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new yf,this.attachRef=null}}let yf=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new W9,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Mx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=fT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=fT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=pT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pT(e,this._root).map(n=>n.value)}}function fT(t,e){if(t===e.value)return e;for(const n of e.children){const r=fT(t,n);if(r)return r}return null}function pT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=pT(t,n);if(r.length)return r.unshift(e),r}return[]}class Eo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function wl(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class Nx extends Mx{constructor(e,n){super(e),this.snapshot=n,gT(this,e)}toString(){return this.snapshot.toString()}}function xx(t,e){const n=function q9(t,e){const o=new N_([],{},{},"",{},Ge,e,null,{});return new kx("",new Eo(o,[]))}(0,e),r=new v([new df("",{})]),i=new v({}),s=new v({}),o=new v({}),a=new v(""),u=new yu(r,i,o,a,s,Ge,e,n.root);return u.snapshot=n.root,new Nx(new Eo(u,[]),n)}class yu{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(de(l=>l[lf]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(de(e=>vl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(de(e=>vl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ox(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function G9(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class N_{get title(){return this.data?.[lf]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kx extends Mx{constructor(e,n){super(n),this.url=e,gT(this,n)}toString(){return Vx(this._root)}}function gT(t,e){e.value._routerState=t,e.children.forEach(n=>gT(t,n))}function Vx(t){const e=t.children.length>0?` { ${t.children.map(Vx).join(", ")} } `:"";return`${t.value}${e}`}function mT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,xs(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),xs(e.params,n.params)||t.paramsSubject.next(n.params),function c9(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!xs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),xs(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function _T(t,e){const n=xs(t.params,e.params)&&function f9(t,e){return mu(t,e)&&t.every((n,r)=>xs(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||_T(t.parent,e.parent))}let yT=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ge,this.activateEvents=new vn,this.deactivateEvents=new vn,this.attachEvents=new vn,this.detachEvents=new vn,this.parentContexts=we(yf),this.location=we(cs),this.changeDetector=we(Jm),this.environmentInjector=we(Gi),this.inputBinder=we(x_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Z9(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[si]})}return t})();class Z9{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===yu?this.route:e===yf?this.childContexts:this.parent.get(e,n)}}const x_=new ue("");let Fx=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=tT([r.queryParams,r.params,r.data]).pipe(me(([s,o,a],u)=>(a={...s,...o,...a},0===u?A(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function fq(t){const e=it(t);if(!e)return null;const n=new Uh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();function vf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Q9(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return vf(t,r,i);return vf(t,r)})}(t,e,n);return new Eo(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>vf(t,a)),o}}const r=function Y9(t){return new yu(new v(t.url),new v(t.params),new v(t.queryParams),new v(t.fragment),new v(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>vf(t,s));return new Eo(r,i)}}const vT="ngNavigationCancelingError";function Lx(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=_u(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ux(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function Ux(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[vT]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Bx(t){return t&&t[vT]}let $x=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Js({type:t,selectors:[["ng-component"]],standalone:!0,features:[LP],decls:1,vars:0,template:function(r,i){1&r&&Ar(0,"router-outlet")},dependencies:[yT],encapsulation:2})}return t})();function IT(t){const e=t.children&&t.children.map(IT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ge&&(n.component=$x),n}function hs(t){return t.outlet||Ge}function If(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class s6{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),mT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=wl(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=wl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=wl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=wl(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new z9(s.value.snapshot))}),e.children.length&&this.forwardEvent(new j9(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(mT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),mT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=If(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class jx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class O_{constructor(e,n){this.component=e,this.route=n}}function o6(t,e,n){const r=t._root;return Ef(r,e?e._root:null,n,[r.value])}function Tl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Yp(t){return null!==Gu(t)}(t)?e.get(t):t:r}function Ef(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=wl(e);return t.children.forEach(o=>{(function u6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function c6(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!mu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!mu(t.url,e.url)||!xs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_T(t,e)||!xs(t.queryParams,e.queryParams);default:return!_T(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new jx(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Ef(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new O_(a.outlet.component,o))}else o&&wf(e,a,i),i.canActivateChecks.push(new jx(r)),Ef(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>wf(a,n.getContext(o),i)),i}function wf(t,e,n){const r=wl(t),i=t.value;Object.entries(r).forEach(([s,o])=>{wf(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new O_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Tf(t){return"function"==typeof t}function Hx(t){return t instanceof v_||"EmptyError"===t?.name}const k_=Symbol("INITIAL_VALUE");function Cl(){return me(t=>tT(t.map(e=>e.pipe(li(1),E_(k_)))).pipe(de(e=>{for(const n of e)if(!0!==n){if(n===k_)return k_;if(!1===n||n instanceof Il)return n}return!0}),gr(e=>e!==k_),li(1)))}function zx(t){return function pi(...t){return gi(t)}(ir(e=>{if(_u(e))throw Lx(0,e)}),de(e=>!0===e))}class V_{constructor(e){this.segmentGroup=e||null}}class Wx{constructor(e){this.urlTree=e}}function Dl(t){return yl(new V_(t))}function qx(t){return yl(new Wx(t))}class R6{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new H(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return A(r);if(i.numberOfChildren>1||!i.children[Ge])return yl(new H(4e3,!1));i=i.children[Ge]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Il(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Rt(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const ET={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function P6(t,e,n,r,i){const s=wT(t,e,n);return s.matched?(r=function X9(t,e){return t.providers&&!t._injector&&(t._injector=ZE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function A6(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?A(i.map(o=>{const a=Tl(o,t);return ca(function g6(t){return t&&Tf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Cl(),zx()):A(!0)}(r,e,n).pipe(de(o=>!0===o?s:{...ET}))):A(s)}function wT(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...ET}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||u9)(n,t,e);if(!i)return{...ET};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Gx(t,e,n,r){return n.length>0&&function x6(t,e,n){return n.some(r=>F_(t,e,r)&&hs(r)!==Ge)}(t,n,r)?{segmentGroup:new Rt(e,N6(r,new Rt(n,t.children))),slicedSegments:[]}:0===n.length&&function O6(t,e,n){return n.some(r=>F_(t,e,r))}(t,n,r)?{segmentGroup:new Rt(t.segments,M6(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Rt(t.segments,t.children),slicedSegments:n}}function M6(t,e,n,r,i){const s={};for(const o of r)if(F_(t,n,o)&&!i[hs(o)]){const a=new Rt([],{});s[hs(o)]=a}return{...i,...s}}function N6(t,e){const n={};n[Ge]=e;for(const r of t)if(""===r.path&&hs(r)!==Ge){const i=new Rt([],{});n[hs(r)]=i}return n}function F_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class L6{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new R6(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,!1)}recognize(){const e=Gx(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ge).pipe(gu(n=>{if(n instanceof Wx)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof V_?this.noMatchError(n):n}),de(n=>{const r=new N_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ge,this.rootComponentType,null,{}),i=new Eo(r,n),s=new kx("",i),o=function S9(t,e,n=null,r=null){return Tx(wx(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ge).pipe(gu(r=>{throw r instanceof V_?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=Ox(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return I(i).pipe(cf(s=>{const o=r.children[s],a=function r6(t,e){const n=t.filter(r=>hs(r)===e);return n.push(...t.filter(r=>hs(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),T_((s,o)=>(s.push(...o),s)),w_(null),function s9(t,e){const n=arguments.length>=2;return r=>r.pipe(t?gr((i,s)=>t(i,s,r)):hn,iT(1),n?w_(e):ux(()=>new v_))}(),yt(s=>{if(null===s)return Dl(r);const o=Zx(s);return function U6(t){t.sort((e,n)=>e.value.outlet===Ge?-1:n.value.outlet===Ge?1:e.value.outlet.localeCompare(n.value.outlet))}(o),A(o)}))}processSegment(e,n,r,i,s,o){return I(n).pipe(cf(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(gu(u=>{if(u instanceof V_)return A(null);throw u}))),ua(a=>!!a),gu(a=>{if(Hx(a))return function V6(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?A([]):Dl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function k6(t,e,n,r){return!!(hs(t)===r||r!==Ge&&F_(e,n,t))&&("**"===t.path||wT(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Dl(i):Dl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?qx(s):this.applyRedirects.lineralizeSegments(r,s).pipe(yt(o=>{const a=new Rt(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=wT(n,i,s);if(!a)return Dl(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?qx(g):this.applyRedirects.lineralizeSegments(i,g).pipe(yt(m=>this.processSegment(e,r,n,m.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?dx(i).parameters:{};a=A({snapshot:new N_(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kx(r),hs(r),r.component??r._loadedComponent??null,r,Qx(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=P6(n,r,i,e).pipe(de(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new N_(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kx(r),hs(r),r.component??r._loadedComponent??null,r,Qx(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(me(u=>null===u?Dl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(me(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=u,{segmentGroup:C,slicedSegments:b}=Gx(n,m,y,l);if(0===b.length&&C.hasChildren())return this.processChildren(h,l,C).pipe(de(U=>null===U?null:[new Eo(g,U)]));if(0===l.length&&0===b.length)return A([new Eo(g,[])]);const M=hs(r)===s;return this.processSegment(h,l,C,b,M?Ge:s,!0).pipe(de(U=>[new Eo(g,U)]))}))))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?A({routes:n._loadedRoutes,injector:n._loadedInjector}):function D6(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?A(!0):A(i.map(o=>{const a=Tl(o,t);return ca(function d6(t){return t&&Tf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Cl(),zx())}(e,n,r).pipe(yt(i=>i?this.configLoader.loadChildren(e,n).pipe(ir(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function S6(t){return yl(Ux(!1,3))}())):A({routes:[],injector:e})}}function B6(t){const e=t.value.routeConfig;return e&&""===e.path}function Zx(t){const e=[],n=new Set;for(const r of t){if(!B6(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=Zx(r.children);e.push(new Eo(r.value,i))}return e.filter(r=>!n.has(r))}function Kx(t){return t.data||{}}function Qx(t){return t.resolve||{}}function Yx(t){return"string"==typeof t.title||null===t.title}function TT(t){return me(e=>{const n=t(e);return n?I(n).pipe(de(()=>e)):A(e)})}const Al=new ue("ROUTES");let CT=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=we(xM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return A(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ca(n.loadComponent()).pipe(de(Jx),ir(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),sT(()=>{this.componentLoaders.delete(n)})),i=new rT(r,()=>new j).pipe(nT());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function G6(t,e,n,r){return ca(t.loadChildren()).pipe(de(Jx),yt(i=>i instanceof VP||Array.isArray(i)?A(i):I(e.compileModuleAsync(i))),de(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Al,[],{optional:!0,self:!0}).flat()),{routes:o.map(IT),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(sT(()=>{this.childrenLoaders.delete(r)})),o=new rT(s,()=>new j).pipe(nT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Jx(t){return function Z6(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let L_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new j,this.transitionAbortSubject=new j,this.configLoader=we(CT),this.environmentInjector=we(Gi),this.urlSerializer=we(hf),this.rootContexts=we(yf),this.inputBindingEnabled=null!==we(x_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new B9(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new U9(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new v({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:mf,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gr(s=>0!==s.id),de(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),me(s=>{this.currentTransition=s;let o=!1,a=!1;return A(s).pipe(ir(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),me(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new El(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),fn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return A(u).pipe(me(m=>{const y=this.transitions?.getValue();return this.events.next(new P_(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?fn:Promise.resolve(m)}),function $6(t,e,n,r,i,s){return yt(o=>function F6(t,e,n,r,i,s,o="emptyOnly"){return new L6(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(de(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ir(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new Rx(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:C,restoredState:b,extras:M}=u,U=new P_(m,this.urlSerializer.serialize(y),C,b);this.events.next(U);const N=xx(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:N,urlAfterRedirects:y,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},A(s)}{const m="";return this.events.next(new El(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),fn}}),ir(u=>{const l=new k9(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),de(u=>(this.currentTransition=s={...u,guards:o6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function _6(t,e){return yt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?A({...n,guardsResult:!0}):function y6(t,e,n,r){return I(t).pipe(yt(i=>function C6(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?A(s.map(a=>{const u=If(e)??i,l=Tl(a,u);return ca(function p6(t){return t&&Tf(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(ua())})).pipe(Cl()):A(!0)}(i.component,i.route,n,e,r)),ua(i=>!0!==i,!0))}(o,r,i,t).pipe(yt(a=>a&&function l6(t){return"boolean"==typeof t}(a)?function v6(t,e,n,r){return I(e).pipe(cf(i=>uf(function E6(t,e){return null!==t&&e&&e(new $9(t)),A(!0)}(i.route.parent,r),function I6(t,e){return null!==t&&e&&e(new H9(t)),A(!0)}(i.route,r),function T6(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function a6(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>I_(()=>A(o.guards.map(u=>{const l=If(o.node)??n,h=Tl(u,l);return ca(function f6(t){return t&&Tf(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(ua())})).pipe(Cl())));return A(s).pipe(Cl())}(t,i.path,n),function w6(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return A(!0);const i=r.map(s=>I_(()=>{const o=If(e)??n,a=Tl(s,o);return ca(function h6(t){return t&&Tf(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(ua())}));return A(i).pipe(Cl())}(t,i.route,n))),ua(i=>!0!==i,!0))}(r,s,t,e):A(a)),de(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),ir(u=>{if(s.guardsResult=u.guardsResult,_u(u.guardsResult))throw Lx(0,u.guardsResult);const l=new V9(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),gr(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),TT(u=>{if(u.guards.canActivateChecks.length)return A(u).pipe(ir(l=>{const h=new F9(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),me(l=>{let h=!1;return A(l).pipe(function j6(t,e){return yt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let s=0;return I(i).pipe(cf(o=>function H6(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!Yx(i)&&(s[lf]=i.title),function z6(t,e,n,r){const i=function W6(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return A({});const s={};return I(i).pipe(yt(o=>function q6(t,e,n,r){const i=If(e)??r,s=Tl(t,i);return ca(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(ua(),ir(a=>{s[o]=a}))),iT(1),cx(s),gu(o=>Hx(o)?fn:yl(o)))}(s,t,e,r).pipe(de(o=>(t._resolvedData=o,t.data=Ox(t,n).resolve,i&&Yx(i)&&(t.data[lf]=i.title),null)))}(o.route,r,t,e)),ir(()=>s++),iT(1),yt(o=>s===i.length?A(n):fn))})}(n.paramsInheritanceStrategy,this.environmentInjector),ir({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),ir(l=>{const h=new L9(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),TT(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(ir(m=>{h.component=m}),de(()=>{})));for(const m of h.children)g.push(...l(m));return g};return tT(l(u.targetSnapshot.root)).pipe(w_(),li(1))}),TT(()=>this.afterPreactivation()),de(u=>{const l=function K9(t,e,n){const r=vf(t,e._root,n?n._root:void 0);return new Nx(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),ir(()=>{this.events.next(new dT)}),((t,e,n,r)=>de(i=>(new s6(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),li(1),ir({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new la(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function o9(t){return K((e,n)=>{et(t).subscribe(ae(n,()=>n.complete(),Te)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(ir(u=>{throw u}))),sT(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),gu(u=>{if(a=!0,Bx(u))this.events.next(new _f(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function J9(t){return Bx(t)&&_u(t.url)}(u)?this.events.next(new hT(u.url)):s.resolve(!1);else{this.events.next(new M_(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){s.reject(l)}}return fn}))}))}cancelNavigationTransition(n,r,i){const s=new _f(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Xx(t){return t!==mf}let eO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ge);return r}getResolvedTitleForRoute(n){return n.data[lf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(K6)},providedIn:"root"})}return t})(),K6=(()=>{class t extends eO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(JN))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Q6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(J6)},providedIn:"root"})}return t})();class Y6{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let J6=(()=>{class t extends Y6{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Pn(t)))(i||t)}}();static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const U_=new ue("",{providedIn:"root",factory:()=>({})});let X6=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:function(){return we(e5)},providedIn:"root"})}return t})(),e5=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Cf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Cf||{});function tO(t,e){t.events.pipe(gr(n=>n instanceof la||n instanceof _f||n instanceof M_||n instanceof El),de(n=>n instanceof la||n instanceof El?Cf.COMPLETE:n instanceof _f&&(0===n.code||1===n.code)?Cf.REDIRECTING:Cf.FAILED),gr(n=>n!==Cf.REDIRECTING),li(1)).subscribe(()=>{e()})}function t5(t){throw t}function n5(t,e,n){return e.parse("/")}const r5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},i5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yr=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=we(MM),this.isNgZoneEnabled=!1,this._events=new j,this.options=we(U_,{optional:!0})||{},this.pendingTasks=we(NM),this.errorHandler=this.options.errorHandler||t5,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||n5,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=we(X6),this.routeReuseStrategy=we(Q6),this.titleStrategy=we(eO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=we(Al,{optional:!0})?.flat()??[],this.navigationTransitions=we(L_),this.urlSerializer=we(hf),this.location=we(Aw),this.componentInputBindingEnabled=!!we(x_,{optional:!0}),this.eventsSubscription=new ft,this.isNgZoneEnabled=we(It)instanceof It&&It.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Il,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xx(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(nO(r)&&this._events.next(r));if(r instanceof P_)Xx(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof El)this.rawUrlTree=i.rawUrl;else if(r instanceof Rx){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof dT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof _f)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof hT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xx(i.source)};this.scheduleNavigation(s,mf,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof M_&&this.restoreHistory(i,!0),r instanceof la&&(this.navigated=!0),nO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),mf,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(IT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=wx(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return Tx(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=_u(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,mf,null,r)}navigate(n,r={skipLocationChange:!1}){return function s5(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new H(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...r5}:!1===r?{...i5}:r,_u(n))return fx(this.currentUrlTree,n,i);const s=this.parseUrl(n);return fx(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return tO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nO(t){return!(t instanceof dT||t instanceof hT)}let Df=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new j,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof la&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function Vb(t,e,n){return function DB(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?kb:Ob}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Yr),ne(yu),function Kg(t){return function Pe(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(rc(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(Wn(),t)}("tabindex"),ne(lo),ne(Ci),ne(pu))};static#t=this.\u0275dir=xe({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Mn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Ps("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ml],skipLocationChange:["skipLocationChange","skipLocationChange",ml],replaceUrl:["replaceUrl","replaceUrl",ml],routerLink:"routerLink"},standalone:!0,features:[QS,si]})}return t})();class rO{}let u5=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(gr(n=>n instanceof la),cf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=ZE(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return I(i).pipe(Lr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):A(null);const s=i.pipe(yt(o=>null===o?A(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?I([s,this.loader.loadComponent(r)]).pipe(Lr()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Yr),oe(xM),oe(Gi),oe(rO),oe(CT))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const DT=new ue("");let iO=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof P_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof la?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof El&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Px&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Px(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function TS(){throw new Error("invalid")}()};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();function wo(t,e){return{\u0275kind:t,\u0275providers:e}}function oO(){const t=we(Cr);return e=>{const n=t.get(hu);if(e!==n.components[0])return;const r=t.get(Yr),i=t.get(aO);1===t.get(AT)&&r.initialNavigation(),t.get(uO,null,Ye.Optional)?.setUpPreloading(),t.get(DT,null,Ye.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const aO=new ue("",{factory:()=>new j}),AT=new ue("",{providedIn:"root",factory:()=>1}),uO=new ue("");function h5(t){return wo(0,[{provide:uO,useExisting:u5},{provide:rO,useExisting:t}])}const cO=new ue("ROUTER_FORROOT_GUARD"),p5=[Aw,{provide:hf,useClass:oT},Yr,yf,{provide:yu,useFactory:function sO(t){return t.routerState.root},deps:[Yr]},CT,[]];function g5(){return new BM("Router",Yr)}let lO=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[p5,[],{provide:Al,multi:!0,useValue:n},{provide:cO,useFactory:v5,deps:[[Yr,new Ti,new Jg]]},{provide:U_,useValue:r||{}},r?.useHash?{provide:pu,useClass:yq}:{provide:pu,useClass:mN},{provide:DT,useFactory:()=>{const t=we(LG),e=we(It),n=we(U_),r=we(L_),i=we(hf);return n.scrollOffset&&t.setOffset(n.scrollOffset),new iO(i,r,t,e,n)}},r?.preloadingStrategy?h5(r.preloadingStrategy).\u0275providers:[],{provide:BM,multi:!0,useFactory:g5},r?.initialNavigation?I5(r):[],r?.bindToComponentInputs?wo(8,[Fx,{provide:x_,useExisting:Fx}]).\u0275providers:[],[{provide:dO,useFactory:oO},{provide:gw,multi:!0,useExisting:dO}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Al,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(oe(cO,8))};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({})}return t})();function v5(t){return"guarded"}function I5(t){return["disabled"===t.initialNavigation?wo(3,[{provide:Zm,multi:!0,useFactory:()=>{const e=we(Yr);return()=>{e.setUpLocationChangeListener()}}},{provide:AT,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?wo(2,[{provide:AT,useValue:0},{provide:Zm,multi:!0,deps:[Cr],useFactory:e=>{const n=e.get(mq,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Yr),s=e.get(aO);tO(i,()=>{r(!0)}),e.get(L_).afterPreactivation=()=>(r(!0),s.closed?A(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const dO=new ue("");var Jr=Me(534);(0,Jr.registerVersion)("firebase","10.7.0","app");class C5 extends ft{constructor(e,n){super()}schedule(e,n=0){return this}}const B_={setInterval(t,e,...n){const{delegate:r}=B_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=B_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class hO extends C5{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return B_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&B_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ce(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const bT={now:()=>(bT.delegate||Date).now(),delegate:void 0};class Af{constructor(e,n=Af.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Af.now=bT.now;class fO extends Af{constructor(e,n=Af.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const b5=new class A5 extends fO{}(class D5 extends hO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),$_=new fO(hO),S5=$_,ST=new Jc("ANGULARFIRE2_VERSION");const RT=(t,e)=>{const n=e?[e]:(0,Jr.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class PT{constructor(){return RT(R5)}}const R5="app-check";function bl(){}class gO{zone;delegate;constructor(e,n=b5){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class P5{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bl,{},bl,bl)),n.pipe(ir({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let j_=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new gO(Zone.current)),this.insideAngular=n.run(()=>new gO(Zone.current,$_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(oe(It))};static \u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function vu(t){return Sl().ngZone.run(()=>t())}function bi(t){return function N5(t){return function(n){return(n=n.lift(new P5(t.ngZone))).pipe(Jn(t.outsideAngular),_n(t.insideAngular))}}(Sl())(t)}const x5=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),vu(()=>t.apply(void 0,r))},mO=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||=vu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bl,{},bl,bl))),r[s]=x5(r[s],n));const i=function M5(t){return Sl().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof Le){const s=Sl();return i.pipe(Jn(s.outsideAngular),_n(s.insideAngular))}return vu(()=>i)}return i instanceof Le?i.pipe(bi):i instanceof Promise?vu(()=>new Promise((s,o)=>i.then(a=>vu(()=>s(a)),a=>vu(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:vu(()=>i)};Me(365);class O5 extends j{constructor(e=1/0,n=1/0,r=bT){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function _O(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,W({connector:()=>new O5(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function yO(t,e){return T(e)?me(()=>t,e):me(()=>t)}const vO=new ue("angularfire2.auth.use-emulator"),IO=new ue("angularfire2.auth.settings"),EO=new ue("angularfire2.auth.tenant-id"),wO=new ue("angularfire2.auth.langugage-code"),TO=new ue("angularfire2.auth.use-device-language"),CO=new ue("angularfire.auth.persistence"),DO=(t,e,n,r,i,s,o,a)=>rx(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,h]of Object.entries(o))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let AO=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,l,h,g,m,y){const C=new j,b=A(void 0).pipe(_n(o.outsideAngular),me(()=>s.runOutsideAngular(()=>Promise.resolve().then(Me.bind(Me,365)))),de(()=>Xw(n,s,r)),de(M=>DO(M,s,a,l,h,g,u,m)),_O({bufferSize:1,refCount:!1}));if(f_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=A(null);else{b.pipe(ua()).subscribe();const M=b.pipe(me(z=>z.getRedirectResult().then(se=>se,()=>null)),bi,_O({bufferSize:1,refCount:!1})),U=b.pipe(me(z=>new Le(se=>({unsubscribe:s.runOutsideAngular(()=>z.onAuthStateChanged(he=>se.next(he),he=>se.error(he),()=>se.complete()))})))),N=b.pipe(me(z=>new Le(se=>({unsubscribe:s.runOutsideAngular(()=>z.onIdTokenChanged(he=>se.next(he),he=>se.error(he),()=>se.complete()))}))));this.authState=M.pipe(yO(U),Jn(o.outsideAngular),_n(o.insideAngular)),this.user=M.pipe(yO(N),Jn(o.outsideAngular),_n(o.insideAngular)),this.idToken=this.user.pipe(me(z=>z?I(z.getIdToken()):A(null))),this.idTokenResult=this.user.pipe(me(z=>z?I(z.getIdTokenResult()):A(null))),this.credential=w(M,C,this.authState.pipe(gr(z=>!z))).pipe(de(z=>z?.user?z:null),Jn(o.outsideAngular),_n(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if($3.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,b,s,{spy:{apply:(M,U,N)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&N.then(z=>C.next(z))}}})}static \u0275fac=function(r){return new(r||t)(oe(y_),oe(Jw,8),oe(os),oe(It),oe(j_),oe(vO,8),oe(IO,8),oe(EO,8),oe(wO,8),oe(TO,8),oe(CO,8),oe(PT,8))};static \u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function MT(){return K((t,e)=>{let n,r=!1;t.subscribe(ae(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var ge,G=Me(861),bO=Me(537),ks=Me(879),kt=Me(58),V5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fs={},NT=NT||{},ze=V5||self;function H_(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function bf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var xT="closure_uid_"+(1e9*Math.random()>>>0),L5=0;function U5(t,e,n){return t.call.apply(t.bind,arguments)}function B5(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function br(t,e,n){return(br=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?U5:B5).apply(null,arguments)}function z_(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function sr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function da(){this.s=this.s,this.o=this.o}da.prototype.s=!1,da.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function F5(t){Object.prototype.hasOwnProperty.call(t,xT)&&t[xT]||(t[xT]=++L5)}(this)},da.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SO=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function OT(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function RO(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(H_(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Sr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Sr.prototype.h=function(){this.defaultPrevented=!0};var j5=function(){if(!ze.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};ze.addEventListener("test",n,e),ze.removeEventListener("test",n,e)}catch{}return t}();function Sf(t){return/^[\s\xa0]*$/.test(t)}function W_(){var t=ze.navigator;return t&&(t=t.userAgent)?t:""}function Vs(t){return-1!=W_().indexOf(t)}function kT(t){return kT[" "](t),t}kT[" "]=function(){};var FT,t,z5=Vs("Opera"),Rl=Vs("Trident")||Vs("MSIE"),PO=Vs("Edge"),VT=PO||Rl,MO=Vs("Gecko")&&!(-1!=W_().toLowerCase().indexOf("webkit")&&!Vs("Edge"))&&!(Vs("Trident")||Vs("MSIE"))&&!Vs("Edge"),W5=-1!=W_().toLowerCase().indexOf("webkit")&&!Vs("Edge");function NO(){var t=ze.document;return t?t.documentMode:void 0}e:{var LT="",UT=(t=W_(),MO?/rv:([^\);]+)(\)|;)/.exec(t):PO?/Edge\/([\d\.]+)/.exec(t):Rl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):W5?/WebKit\/(\S+)/.exec(t):z5?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(UT&&(LT=UT?UT[1]:""),Rl){var BT=NO();if(null!=BT&&BT>parseFloat(LT)){FT=String(BT);break e}}FT=LT}var q5=ze.document&&Rl&&(NO()||parseInt(FT,10))||void 0;function Rf(t,e){if(Sr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(MO){e:{try{kT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:G5[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Rf.$.h.call(this)}}sr(Rf,Sr);var G5={2:"touch",3:"pen",4:"mouse"};Rf.prototype.h=function(){Rf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Pf="closure_listenable_"+(1e6*Math.random()|0),Z5=0;function K5(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Z5,this.fa=this.ia=!1}function q_(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function jT(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function OO(t){const e={};for(const n in t)e[n]=t[n];return e}const kO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function VO(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<kO.length;s++)n=kO[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function G_(t){this.src=t,this.g={},this.h=0}function HT(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=SO(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(q_(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function zT(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}G_.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=zT(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new K5(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var WT="closure_lm_"+(1e6*Math.random()|0),qT={};function FO(t,e,n,r,i){if(r&&r.once)return UO(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)FO(t,e[s],n,r,i);return null}return n=QT(n),t&&t[Pf]?t.O(e,n,bf(r)?!!r.capture:!!r,i):LO(t,e,n,!1,r,i)}function LO(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=bf(i)?!!i.capture:!!i,a=ZT(t);if(a||(t[WT]=a=new G_(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function Y5(){const e=J5;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)j5||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($O(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function UO(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)UO(t,e[s],n,r,i);return null}return n=QT(n),t&&t[Pf]?t.P(e,n,bf(r)?!!r.capture:!!r,i):LO(t,e,n,!0,r,i)}function BO(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)BO(t,e[s],n,r,i);else r=bf(r)?!!r.capture:!!r,n=QT(n),t&&t[Pf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=zT(s=t.g[e],n,r,i))&&(q_(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=ZT(t))&&(e=t.g[e.toString()],t=-1,e&&(t=zT(e,n,r,i)),(n=-1<t?e[t]:null)&&GT(n))}function GT(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Pf])HT(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($O(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ZT(e))?(HT(n,t),0==n.h&&(n.src=null,e[WT]=null)):q_(t)}}}function $O(t){return t in qT?qT[t]:qT[t]="on"+t}function J5(t,e){if(t.fa)t=!0;else{e=new Rf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&GT(t),t=n.call(r,e)}return t}function ZT(t){return(t=t[WT])instanceof G_?t:null}var KT="__closure_events_fn_"+(1e9*Math.random()>>>0);function QT(t){return"function"==typeof t?t:(t[KT]||(t[KT]=function(e){return t.handleEvent(e)}),t[KT])}function or(){da.call(this),this.i=new G_(this),this.S=this,this.J=null}function mr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Sr(e,t);else if(e instanceof Sr)e.target=e.target||t;else{var i=e;VO(e=new Sr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Z_(o,r,!0,e)&&i}if(i=Z_(o=e.g=t,r,!0,e)&&i,i=Z_(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Z_(o=e.g=n[s],r,!1,e)&&i}function Z_(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&HT(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}sr(or,da),or.prototype[Pf]=!0,or.prototype.removeEventListener=function(t,e,n,r){BO(this,t,e,n,r)},or.prototype.N=function(){if(or.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)q_(n[r]);delete t.g[e],t.h--}}this.J=null},or.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},or.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var YT=ze.JSON.stringify;function e8(){var t=JT;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var jO=new class X5{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new n8,t=>t.reset());class n8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function r8(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function i8(t){ze.setTimeout(()=>{throw t},0)}let Mf,Nf=!1,JT=new class t8{constructor(){this.h=this.g=null}add(e,n){const r=jO.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},HO=()=>{const t=ze.Promise.resolve(void 0);Mf=()=>{t.then(s8)}};var s8=()=>{for(var t;t=e8();){try{t.h.call(t.g)}catch(n){i8(n)}var e=jO;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Nf=!1};function K_(t,e){or.call(this),this.h=t||1,this.g=e||ze,this.j=br(this.qb,this),this.l=Date.now()}function XT(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function eC(t,e,n){if("function"==typeof t)n&&(t=br(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=br(t.handleEvent,t)}return 2147483647<Number(e)?-1:ze.setTimeout(t,e||0)}function zO(t){t.g=eC(()=>{t.g=null,t.i&&(t.i=!1,zO(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}sr(K_,or),(ge=K_.prototype).ga=!1,ge.T=null,ge.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mr(this,"tick"),this.ga&&(XT(this),this.start()))}},ge.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ge.N=function(){K_.$.N.call(this),XT(this),delete this.g};class o8 extends da{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zO(this)}N(){super.N(),this.g&&(ze.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xf(t){da.call(this),this.h=t,this.g={}}sr(xf,da);var WO=[];function qO(t,e,n,r){Array.isArray(n)||(n&&(WO[0]=n.toString()),n=WO);for(var i=0;i<n.length;i++){var s=FO(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function GO(t){jT(t.g,function(e,n){this.g.hasOwnProperty(n)&&GT(e)},t),t.g={}}function Q_(){this.g=!0}function Pl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function l8(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return YT(n)}catch{return e}}(t,n)+(r?" "+r:"")})}xf.prototype.N=function(){xf.$.N.call(this),GO(this)},xf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Q_.prototype.Ea=function(){this.g=!1},Q_.prototype.info=function(){};var Iu={},ZO=null;function Y_(){return ZO=ZO||new or}function KO(t){Sr.call(this,Iu.Ta,t)}function Of(t){const e=Y_();mr(e,new KO(e))}function QO(t,e){Sr.call(this,Iu.STAT_EVENT,t),this.stat=e}function Xr(t){const e=Y_();mr(e,new QO(e,t))}function YO(t,e){Sr.call(this,Iu.Ua,t),this.size=e}function kf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ze.setTimeout(function(){t()},e)}Iu.Ta="serverreachability",sr(KO,Sr),Iu.STAT_EVENT="statevent",sr(QO,Sr),Iu.Ua="timingevent",sr(YO,Sr);var J_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},JO={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tC(){}function e1(){}tC.prototype.h=null;var iC,Vf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nC(){Sr.call(this,"d")}function rC(){Sr.call(this,"c")}function X_(){}function Ff(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new xf(this),this.P=d8,this.V=new K_(t=VT?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new t1}function t1(){this.i=null,this.g="",this.h=!1}sr(nC,Sr),sr(rC,Sr),sr(X_,tC),X_.prototype.g=function(){return new XMLHttpRequest},X_.prototype.i=function(){return{}},iC=new X_;var d8=45e3,n1={},sC={};function oC(t,e,n){t.L=1,t.A=ry(To(e)),t.u=n,t.S=!0,r1(t,null)}function r1(t,e){t.G=Date.now(),Lf(t),t.B=To(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),f1(n.i,"t",r),t.o=0,n=t.l.J,t.h=new t1,t.g=F1(t.l,n?e:null,!t.u),0<t.O&&(t.M=new o8(br(t.Pa,t,t.g),t.O)),qO(t.U,t.g,"readystatechange",t.nb),e=t.I?OO(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Of(),function a8(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");o=2<=g.length&&"type"==g[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function i1(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function s1(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=h8(t,n),i==sC){4==e&&(t.s=4,Xr(14),r=!1),Pl(t.j,t.m,null,"[Incomplete Response]");break}if(i==n1){t.s=4,Xr(15),Pl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Pl(t.j,t.m,i,null),aC(t,i)}i1(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Xr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),pC(e),e.M=!0,Xr(11))):(Pl(t.j,t.m,n,"[Invalid Chunked Response]"),Eu(t),Uf(t))}function h8(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?sC:(n=Number(e.substring(n,r)),isNaN(n)?n1:(r+=1)+n>e.length?sC:(e=e.slice(r,r+n),t.o=r+n,e))}function Lf(t){t.Y=Date.now()+t.P,o1(t,t.P)}function o1(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=kf(br(t.lb,t),e)}function ey(t){t.C&&(ze.clearTimeout(t.C),t.C=null)}function Uf(t){0==t.l.H||t.J||x1(t.l,t)}function Eu(t){ey(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,XT(t.V),GO(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function aC(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||uC(n.i,t)))if(!t.K&&uC(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;cy(n),ay(n)}fC(n),Xr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=kf(br(n.ib,n),6e3));if(1>=m1(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Tu(n,11)}else if((t.K||n.g==t)&&cy(n),!Sf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const C=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=r.i;s.g||-1==C.indexOf("spdy")&&-1==C.indexOf("quic")&&-1==C.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(cC(s,s.h),s.h=null))}if(r.F){const b=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(r.Da=b,tn(r.I,r.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=V1(r,r.J?r.pa:null,r.Y),o.K){_1(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(ey(a),Lf(a)),r.g=o}else M1(r);0<n.j.length&&uy(n)}else"stop"!=l[0]&&"close"!=l[0]||Tu(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Tu(n,7):hC(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Of()}catch{}}function a1(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(H_(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function p8(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(H_(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function f8(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(H_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(ge=Ff.prototype).setTimeout=function(t){this.P=t},ge.nb=function(t){t=t.target;const e=this.M;e&&3==Fs(t)?e.l():this.Pa(t)},ge.Pa=function(t){try{if(t==this.g)e:{const h=Fs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||VT||this.g&&(this.h.h||this.g.ja()||D1(this.g)))){this.J||4!=h||7==e||Of(),ey(this);var n=this.g.da();this.ca=n;t:if(i1(this)){var r=D1(this.g);t="";var i=r.length,s=4==Fs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Eu(this),Uf(this);var o="";break t}this.h.i=new ze.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function u8(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sf(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Xr(12),Eu(this),Uf(this);break e}Pl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aC(this,n)}this.S?(s1(this,h,o),VT&&this.i&&3==h&&(qO(this.U,this.V,"tick",this.mb),this.V.start())):(Pl(this.j,this.m,o,null),aC(this,o)),4==h&&Eu(this),this.i&&!this.J&&(4==h?x1(this.l,this):(this.i=!1,Lf(this)))}else(function N8(t){const e={};t=(t.g&&2<=Fs(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Sf(t[r]))continue;var n=r8(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function Q5(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Xr(12)):(this.s=0,Xr(13)),Eu(this),Uf(this)}}}catch{}},ge.mb=function(){if(this.g){var t=Fs(this.g),e=this.g.ja();this.o<e.length&&(ey(this),s1(this,t,e),this.i&&4!=t&&Lf(this))}},ge.cancel=function(){this.J=!0,Eu(this)},ge.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function c8(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Of(),Xr(17)),Eu(this),this.s=2,Uf(this)):o1(this,this.Y-t)};var u1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof wu){this.h=t.h,ty(this,t.j),this.s=t.s,this.g=t.g,ny(this,t.m),this.l=t.l;var e=t.i,n=new jf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),c1(this,n),this.o=t.o}else t&&(e=String(t).match(u1))?(this.h=!1,ty(this,e[1]||"",!0),this.s=Bf(e[2]||""),this.g=Bf(e[3]||"",!0),ny(this,e[4]),this.l=Bf(e[5]||"",!0),c1(this,e[6]||"",!0),this.o=Bf(e[7]||"")):(this.h=!1,this.i=new jf(null,this.h))}function To(t){return new wu(t)}function ty(t,e,n){t.j=n?Bf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ny(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function c1(t,e,n){e instanceof jf?(t.i=e,function E8(t,e){e&&!t.j&&(ha(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(d1(this,r),f1(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=$f(e,v8)),t.i=new jf(e,t.h))}function tn(t,e,n){t.i.set(e,n)}function ry(t){return tn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Bf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $f(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,m8),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function m8(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}wu.prototype.toString=function(){var t=[],e=this.j;e&&t.push($f(e,l1,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push($f(e,l1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push($f(n,"/"==n.charAt(0)?y8:_8,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$f(n,I8)),t.join("")};var l1=/[#\/\?@]/g,_8=/[#\?:]/g,y8=/[#\?]/g,v8=/[#\?@]/g,I8=/#/g;function jf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ha(t){t.g||(t.g=new Map,t.h=0,t.i&&function g8(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function d1(t,e){ha(t),e=Ml(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function h1(t,e){return ha(t),e=Ml(t,e),t.g.has(e)}function f1(t,e,n){d1(t,e),0<n.length&&(t.i=null,t.g.set(Ml(t,e),OT(n)),t.h+=n.length)}function Ml(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function p1(t){this.l=t||T8,t=ze.PerformanceNavigationTiming?0<(t=ze.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ze.g&&ze.g.Ka&&ze.g.Ka()&&ze.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ge=jf.prototype).add=function(t,e){ha(this),this.i=null,t=Ml(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ge.forEach=function(t,e){ha(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},ge.ta=function(){ha(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},ge.Z=function(t){ha(this);let e=[];if("string"==typeof t)h1(this,t)&&(e=e.concat(this.g.get(Ml(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},ge.set=function(t,e){return ha(this),this.i=null,h1(this,t=Ml(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ge.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var T8=10;function g1(t){return!!t.h||!!t.g&&t.g.size>=t.j}function m1(t){return t.h?1:t.g?t.g.size:0}function uC(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function cC(t,e){t.g?t.g.add(e):t.h=e}function _1(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function y1(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return OT(t.i)}p1.prototype.cancel=function(){if(this.i=y1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var C8=class{stringify(t){return ze.JSON.stringify(t,void 0)}parse(t){return ze.JSON.parse(t,void 0)}};function D8(){this.g=new C8}function A8(t,e,n){const r=n||"";try{a1(t,function(i,s){let o=i;bf(i)&&(o=YT(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function iy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Hf(t){this.l=t.ec||null,this.j=t.ob||!1}function sy(t,e){or.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=lC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sr(Hf,tC),Hf.prototype.g=function(){return new sy(this.l,this.j)},Hf.prototype.i=function(t){return function(){return t}}({}),sr(sy,or);var lC=0;function v1(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function zf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wf(t)}function Wf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ge=sy.prototype).open=function(t,e){if(this.readyState!=lC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wf(this)},ge.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ze).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zf(this)),this.readyState=lC},ge.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wf(this)),this.g&&(this.readyState=3,Wf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ze.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;v1(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},ge.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zf(this):Wf(this),3==this.readyState&&v1(this)}},ge.Za=function(t){this.g&&(this.response=this.responseText=t,zf(this))},ge.Ya=function(t){this.g&&(this.response=t,zf(this))},ge.ka=function(){this.g&&zf(this)},ge.setRequestHeader=function(t,e){this.v.append(t,e)},ge.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ge.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(sy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var S8=ze.JSON.parse;function wn(t){or.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=I1,this.L=this.M=!1}sr(wn,or);var I1="",R8=/^https?$/i,P8=["POST","PUT"];function E1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,w1(t),oy(t)}function w1(t){t.F||(t.F=!0,mr(t,"complete"),mr(t,"error"))}function T1(t){if(t.h&&typeof NT<"u"&&(!t.C[1]||4!=Fs(t)||2!=t.da()))if(t.v&&4==Fs(t))eC(t.La,0,t);else if(mr(t,"readystatechange"),4==Fs(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(u1)[1]||null;!i&&ze.self&&ze.self.location&&(i=ze.self.location.protocol.slice(0,-1)),r=!R8.test(i?i.toLowerCase():"")}n=r}if(n)mr(t,"complete"),mr(t,"success");else{t.m=6;try{var s=2<Fs(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",w1(t)}}finally{oy(t)}}}function oy(t,e){if(t.g){C1(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||mr(t,"ready");try{n.onreadystatechange=r}catch{}}}function C1(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ze.clearTimeout(t.A),t.A=null)}function Fs(t){return t.g?t.g.readyState:0}function D1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case I1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function A1(t){let e="";return jT(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function dC(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=A1(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):tn(t,e,n))}function qf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function b1(t){this.Ga=0,this.j=[],this.l=new Q_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qf("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qf("baseRetryDelayMs",5e3,t),this.hb=qf("retryDelaySeedMs",1e4,t),this.eb=qf("forwardChannelMaxRetries",2,t),this.xa=qf("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new p1(t&&t.concurrentRequestLimit),this.Ja=new D8,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function hC(t){if(S1(t),3==t.H){var e=t.W++,n=To(t.I);if(tn(n,"SID",t.K),tn(n,"RID",e),tn(n,"TYPE","terminate"),Gf(t,n),(e=new Ff(t,t.l,e)).L=2,e.A=ry(To(n)),n=!1,ze.navigator&&ze.navigator.sendBeacon)try{n=ze.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ze.Image&&((new Image).src=e.A,n=!0),n||(e.g=F1(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Lf(e)}k1(t)}function ay(t){t.g&&(pC(t),t.g.cancel(),t.g=null)}function S1(t){ay(t),t.u&&(ze.clearTimeout(t.u),t.u=null),cy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ze.clearTimeout(t.m),t.m=null)}function uy(t){if(!g1(t.i)&&!t.m){t.m=!0;var e=t.Na;Mf||HO(),Nf||(Mf(),Nf=!0),JT.add(e,t),t.C=0}}function R1(t,e){var n;n=e?e.m:t.W++;const r=To(t.I);tn(r,"SID",t.K),tn(r,"RID",n),tn(r,"AID",t.V),Gf(t,r),t.o&&t.s&&dC(r,t.o,t.s),n=new Ff(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=P1(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),cC(t.i,n),oC(n,r,e)}function Gf(t,e){t.na&&jT(t.na,function(n,r){tn(e,r,n)}),t.h&&a1({},function(n,r){tn(e,r,n)})}function P1(t,e,n){n=Math.min(t.j.length,n);var r=t.h?br(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{A8(h,o,"req"+l+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function M1(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Mf||HO(),Nf||(Mf(),Nf=!0),JT.add(e,t),t.A=0}}function fC(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=kf(br(t.Ma,t),O1(t,t.A)),t.A++,0))}function pC(t){null!=t.B&&(ze.clearTimeout(t.B),t.B=null)}function N1(t){t.g=new Ff(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=To(t.wa);tn(e,"RID","rpc"),tn(e,"SID",t.K),tn(e,"AID",t.V),tn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&tn(e,"TO",t.qa),tn(e,"TYPE","xmlhttp"),Gf(t,e),t.o&&t.s&&dC(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ry(To(e)),n.u=null,n.S=!0,r1(n,t)}function cy(t){null!=t.v&&(ze.clearTimeout(t.v),t.v=null)}function x1(t,e){var n=null;if(t.g==e){cy(t),pC(t),t.g=null;var r=2}else{if(!uC(t.i,e))return;n=e.F,_1(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;mr(r=Y_(),new YO(r,n)),uy(t)}else M1(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function x8(t,e){return!(m1(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=kf(br(t.Na,t,e),O1(t,t.C)),t.C++,0)))}(t,e)||2==r&&fC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Tu(t,5);break;case 4:Tu(t,10);break;case 3:Tu(t,6);break;default:Tu(t,2)}}function O1(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Tu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=br(t.pb,t);n||(n=new wu("//www.google.com/images/cleardot.gif"),ze.location&&"http"==ze.location.protocol||ty(n,"https"),ry(n)),function b8(t,e){const n=new Q_;if(ze.Image){const r=new Image;r.onload=z_(iy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=z_(iy,n,r,"TestLoadImage: error",!1,e),r.onabort=z_(iy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=z_(iy,n,r,"TestLoadImage: timeout",!1,e),ze.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xr(2);t.H=0,t.h&&t.h.za(e),k1(t),S1(t)}function k1(t){if(t.H=0,t.ma=[],t.h){const e=y1(t.i);(0!=e.length||0!=t.j.length)&&(RO(t.ma,e),RO(t.ma,t.j),t.i.i.length=0,OT(t.j),t.j.length=0),t.h.ya()}}function V1(t,e,n){var r=n instanceof wu?To(n):new wu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),ny(r,r.m);else{var i=ze.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new wu(null);r&&ty(s,r),e&&(s.g=e),i&&ny(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&tn(r,n,e),tn(r,"VER",t.ra),Gf(t,r),r}function F1(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Ha&&!t.va?new Hf({ob:n}):t.va)).Oa(t.J),e}function L1(){}function ly(){if(Rl&&!(10<=Number(q5)))throw Error("Environmental error: no available transport.")}function Si(t,e){or.call(this),this.g=new b1(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Sf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Nl(this)}function U1(t){nC.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function B1(){rC.call(this),this.status=1}function Nl(t){this.g=t}function ps(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gC(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Pt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(ge=wn.prototype).Oa=function(t){this.M=t},ge.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iC.g(),this.C=function XO(t){return t.h||(t.h=t.i())}(this.u?this.u:iC),this.g.onreadystatechange=br(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void E1(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=ze.FormData&&t instanceof ze.FormData,!(0<=SO(P8,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{C1(this),0<this.B&&((this.L=function M8(t){return Rl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=br(this.ua,this)):this.A=eC(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){E1(this,s)}},ge.ua=function(){typeof NT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mr(this,"timeout"),this.abort(8))},ge.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,mr(this,"complete"),mr(this,"abort"),oy(this))},ge.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oy(this,!0)),wn.$.N.call(this)},ge.La=function(){this.s||(this.G||this.v||this.l?T1(this):this.kb())},ge.kb=function(){T1(this)},ge.isActive=function(){return!!this.g},ge.da=function(){try{return 2<Fs(this)?this.g.status:-1}catch{return-1}},ge.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ge.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),S8(e)}},ge.Ia=function(){return this.m},ge.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ge=b1.prototype).ra=8,ge.H=1,ge.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Ff(this,this.l,t);let s=this.s;if(this.U&&(s?(s=OO(s),VO(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=P1(this,i,e),tn(n=To(this.I),"RID",t),tn(n,"CVER",22),this.F&&tn(n,"X-HTTP-Session-Id",this.F),Gf(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(A1(s)))+"&"+e:this.o&&dC(n,this.o,s)),cC(this.i,i),this.bb&&tn(n,"TYPE","init"),this.P?(tn(n,"$req",e),tn(n,"SID","null"),i.aa=!0,oC(i,n,null)):oC(i,n,e),this.H=2}}else 3==this.H&&(t?R1(this,t):0==this.j.length||g1(this.i)||R1(this))},ge.Ma=function(){if(this.u=null,N1(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=kf(br(this.jb,this),t)}},ge.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xr(10),ay(this),N1(this))},ge.ib=function(){null!=this.v&&(this.v=null,ay(this),fC(this),Xr(19))},ge.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Xr(2)):(this.l.info("Failed to ping google.com"),Xr(1))},ge.isActive=function(){return!!this.h&&this.h.isActive(this)},(ge=L1.prototype).Ba=function(){},ge.Aa=function(){},ge.za=function(){},ge.ya=function(){},ge.isActive=function(){return!0},ge.Va=function(){},ly.prototype.g=function(t,e){return new Si(t,e)},sr(Si,or),Si.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Xr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=V1(t,null,t.Y),uy(t)},Si.prototype.close=function(){hC(this.g)},Si.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=YT(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&uy(e)},Si.prototype.N=function(){this.g.h=null,delete this.j,hC(this.g),delete this.g,Si.$.N.call(this)},sr(U1,nC),sr(B1,rC),sr(Nl,L1),Nl.prototype.Ba=function(){mr(this.g,"a")},Nl.prototype.Aa=function(t){mr(this.g,new U1(t))},Nl.prototype.za=function(t){mr(this.g,new B1)},Nl.prototype.ya=function(){mr(this.g,"b")},sr(ps,function O8(){this.blockSize=-1}),ps.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ps.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)gC(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){gC(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){gC(this,r),i=0;break}}this.h=i,this.i+=e},ps.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var k8={};function mC(t){return-128<=t&&128>t?function H5(t,e){var n=k8;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Pt([0|e],0>e?-1:0)}):new Pt([0|t],0>t?-1:0)}function Ls(t){if(isNaN(t)||!isFinite(t))return xl;if(0>t)return _r(Ls(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=_C;return new Pt(e,0)}var _C=4294967296,xl=mC(0),yC=mC(1),j1=mC(16777216);function Co(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ji(t){return-1==t.h}function _r(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Pt(n,~t.h).add(yC)}function dy(t,e){return t.add(_r(e))}function hy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Zf(t,e){this.g=t,this.h=e}function fy(t,e){if(Co(e))throw Error("division by zero");if(Co(t))return new Zf(xl,xl);if(Ji(t))return e=fy(_r(t),e),new Zf(_r(e.g),_r(e.h));if(Ji(e))return e=fy(t,_r(e)),new Zf(_r(e.g),e.h);if(30<t.g.length){if(Ji(t)||Ji(e))throw Error("slowDivide_ only works with positive integers.");for(var n=yC,r=e;0>=r.X(t);)n=H1(n),r=H1(r);var i=Ol(n,1),s=Ol(r,1);for(r=Ol(r,2),n=Ol(n,2);!Co(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ol(r,1),n=Ol(n,1)}return e=dy(t,i.R(e)),new Zf(i,e)}for(i=xl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ls(n)).R(e);Ji(o)||0<o.X(t);)o=(s=Ls(n-=r)).R(e);Co(s)&&(s=yC),i=i.add(s),t=dy(t,o)}return new Zf(i,t)}function H1(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Pt(n,t.h)}function Ol(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Pt(i,t.h)}(ge=Pt.prototype).ea=function(){if(Ji(this))return-_r(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:_C+r)*e,e*=_C}return t},ge.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Co(this))return"0";if(Ji(this))return"-"+_r(this).toString(t);for(var e=Ls(Math.pow(t,6)),n=this,r="";;){var i=fy(n,e).g,s=((0<(n=dy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Co(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ge.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},ge.X=function(t){return Ji(t=dy(this,t))?-1:Co(t)?0:1},ge.abs=function(){return Ji(this)?_r(this):this},ge.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Pt(n,-2147483648&n[n.length-1]?-1:0)},ge.R=function(t){if(Co(this)||Co(t))return xl;if(Ji(this))return Ji(t)?_r(this).R(_r(t)):_r(_r(this).R(t));if(Ji(t))return _r(this.R(_r(t)));if(0>this.X(j1)&&0>t.X(j1))return Ls(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,hy(n,2*r+2*i),n[2*r+2*i+1]+=s*u,hy(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,hy(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,hy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Pt(n,0)},ge.gb=function(t){return fy(this,t).h},ge.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Pt(n,this.h&t.h)},ge.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Pt(n,this.h|t.h)},ge.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Pt(n,this.h^t.h)},ly.prototype.createWebChannel=ly.prototype.g,Si.prototype.send=Si.prototype.u,Si.prototype.open=Si.prototype.m,Si.prototype.close=Si.prototype.close,J_.NO_ERROR=0,J_.TIMEOUT=8,J_.HTTP_ERROR=6,JO.COMPLETE="complete",e1.EventType=Vf,Vf.OPEN="a",Vf.CLOSE="b",Vf.ERROR="c",Vf.MESSAGE="d",or.prototype.listen=or.prototype.O,wn.prototype.listenOnce=wn.prototype.P,wn.prototype.getLastError=wn.prototype.Sa,wn.prototype.getLastErrorCode=wn.prototype.Ia,wn.prototype.getStatus=wn.prototype.da,wn.prototype.getResponseJson=wn.prototype.Wa,wn.prototype.getResponseText=wn.prototype.ja,wn.prototype.send=wn.prototype.ha,wn.prototype.setWithCredentials=wn.prototype.Oa,ps.prototype.digest=ps.prototype.l,ps.prototype.reset=ps.prototype.reset,ps.prototype.update=ps.prototype.j,Pt.prototype.add=Pt.prototype.add,Pt.prototype.multiply=Pt.prototype.R,Pt.prototype.modulo=Pt.prototype.gb,Pt.prototype.compare=Pt.prototype.X,Pt.prototype.toNumber=Pt.prototype.ea,Pt.prototype.toString=Pt.prototype.toString,Pt.prototype.getBits=Pt.prototype.D,Pt.fromNumber=Ls,Pt.fromString=function $1(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return _r($1(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ls(Math.pow(e,8)),r=xl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ls(Math.pow(e,s)),r=r.R(s).add(Ls(o))):r=(r=r.R(n)).add(Ls(o))}return r};var V8=fs.createWebChannelTransport=function(){return new ly},F8=fs.getStatEventTarget=function(){return Y_()},vC=fs.ErrorCode=J_,L8=fs.EventType=JO,U8=fs.Event=Iu,z1=fs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},py=(fs.FetchXmlHttpFactory=Hf,fs.WebChannel=e1),B8=fs.XhrIo=wn,$8=fs.Md5=ps,kl=fs.Integer=Pt;const W1="@firebase/firestore";class ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ar.UNAUTHENTICATED=new ar(null),ar.GOOGLE_CREDENTIALS=new ar("google-credentials-uid"),ar.FIRST_PARTY=new ar("first-party-uid"),ar.MOCK_USER=new ar("mock-user");let Vl="10.7.0";const fa=new ks.Yd("@firebase/firestore");function Fl(){return fa.logLevel}function re(t,...e){if(fa.logLevel<=ks.in.DEBUG){const n=e.map(IC);fa.debug(`Firestore (${Vl}): ${t}`,...n)}}function xn(t,...e){if(fa.logLevel<=ks.in.ERROR){const n=e.map(IC);fa.error(`Firestore (${Vl}): ${t}`,...n)}}function di(t,...e){if(fa.logLevel<=ks.in.WARN){const n=e.map(IC);fa.warn(`Firestore (${Vl}): ${t}`,...n)}}function IC(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Ie(t="Unexpected state"){const e=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: `+t;throw xn(e),new Error(e)}function Ae(t,e){t||Ie()}function ce(t,e){return t}const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends kt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class q1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ar.UNAUTHENTICATED))}shutdown(){}}class W8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class q8{constructor(e){this.t=e,this.currentUser=ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let o=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,G.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae("string"==typeof r.accessToken),new q1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(null===e||"string"==typeof e),new ar(e)}}class G8{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ar.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Z8{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new G8(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae("string"==typeof n.token),this.R=n.token,new G1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Q8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Z1{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Q8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function Ll(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function K1(t){return t+"\0"}class cn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cn.fromMillis(Date.now())}static fromDate(e){return cn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new cn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new cn(0,0))}static max(){return new be(new cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kf{constructor(e,n,r){void 0===n?n=0:n>e.length&&Ie(),void 0===r?r=e.length-n:r>e.length-n&&Ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Kf.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mt extends Kf{construct(e,n,r){return new mt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const Y8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Kf{construct(e,n,r){return new nn(e,n,r)}static isValidIdentifier(e){return Y8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new J(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new J(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new J(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(mt.fromString(e))}static fromName(e){return new le(mt.fromString(e).popFirst(5))}static empty(){return new le(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new mt(e.slice()))}}class Ul{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function EC(t){return t.fields.find(e=>2===e.kind)}function Cu(t){return t.fields.filter(e=>2!==e.kind)}Ul.UNKNOWN_ID=-1;class Du{constructor(e,n){this.fieldPath=e,this.kind=n}}class Bl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Bl(0,Ri.min())}}function Q1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(1e9===r?new cn(n+1,0):new cn(n,r));return new Ri(i,le.empty(),e)}function Y1(t){return new Ri(t.readTime,t.key,-1)}class Ri{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ri(be.min(),le.empty(),-1)}static max(){return new Ri(be.max(),le.empty(),-1)}}function wC(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=le.comparator(t.documentKey,e.documentKey),0!==n?n:$e(t.largestBatchId,e.largestBatchId))}const J1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function pa(t){return TC.apply(this,arguments)}function TC(){return TC=(0,G.Z)(function*(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==J1)throw t;re("LocalStore","Unexpectedly lost primary lease")}),TC.apply(this,arguments)}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class gy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Zn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Qf(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=CC(r.target.error);this.V.reject(new Qf(e,i))}}static open(e,n,r,i){try{return new gy(n,e.transaction(i,r))}catch(s){throw new Qf(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tZ(n)}}class gs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===gs.S((0,kt.z$)())&&xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return re("SimpleDb","Removing database:",e),Au(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,kt.hl)())return!1;if(gs.C())return!0;const e=(0,kt.z$)(),n=gs.S(e),r=0<n&&n<10,i=gs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,G.Z)(function*(){return n.db||(re("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Qf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new J(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new J(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Qf(e,a))},s.onupgradeneeded=o=>{re("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{re("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,G.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=gy.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),O.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(re("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eZ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Au(this.k.delete())}}class Qf extends J{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ga(t){return"IndexedDbTransactionError"===t.name}class tZ{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(re("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Au(r)}add(e){return re("SimpleDb","ADD",this.store.name,e,e),Au(this.store.add(e))}get(e){return Au(this.store.get(e)).next(n=>(void 0===n&&(n=null),re("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return re("SimpleDb","DELETE",this.store.name,e),Au(this.store.delete(e))}count(){return re("SimpleDb","COUNT",this.store.name),Au(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new O((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=CC(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new eZ(a),l=n(a.primaryKey,a.value,u);if(l instanceof O){const h=l.catch(g=>(u.done(),O.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>O.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Au(t){return new O((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=CC(r.target.error);n(i)}})}let ek=!1;function CC(t){const e=gs.S((0,kt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ek||(ek=!0,setTimeout(()=>{throw r},0)),r}}return t}class nZ{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,G.Z)(function*(){n.task=null;try{re("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){ga(r)?re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield pa(r)}yield n.ee(6e4)}))}}class rZ{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,G.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return re("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(re("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Y1(s);wC(o,r)>0&&(r=o)}),new Ri(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Pi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Yf(t){return null==t}function Jf(t){return 0===t&&1/t==-1/0}function tk(t){return"number"==typeof t&&Number.isInteger(t)&&!Jf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Rr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nk(e)),e=iZ(t.get(n),e);return nk(e)}function iZ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function nk(t){return t+"\x01\x01"}function Us(t){const e=t.length;if(Ae(e>=2),2===e)return Ae("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),mt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&Ie(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Ie()}s=o+2}return new mt(r)}const rk=["userId","batchId"];function my(t,e){return[t,Rr(e)]}function ik(t,e,n){return[t,Rr(e),n]}const sZ={},oZ=["prefixPath","collectionGroup","readTime","documentId"],aZ=["prefixPath","collectionGroup","documentId"],uZ=["collectionGroup","readTime","prefixPath","documentId"],cZ=["canonicalId","targetId"],lZ=["targetId","path"],dZ=["path","targetId"],hZ=["collectionId","parent"],fZ=["indexId","uid"],pZ=["uid","sequenceNumber"],gZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mZ=["indexId","uid","orderedDocumentKey"],_Z=["userId","collectionPath","documentId"],yZ=["userId","collectionPath","largestBatchId"],vZ=["userId","collectionGroup","largestBatchId"],sk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IZ=[...sk,"documentOverlays"],ok=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ak=ok,EZ=[...ak,"indexConfiguration","indexState","indexEntries"];class DC extends X1{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function ur(t,e){const n=ce(t);return gs.M(n.ae,e)}function uk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ma(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ck(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Wt{constructor(e,n){this.comparator=e,this.root=n||yr.EMPTY}insert(e,n){return new Wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _y(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _y(this.root,e,this.comparator,!1)}getReverseIterator(){return new _y(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _y(this.root,e,this.comparator,!0)}}class _y{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??yr.RED,this.left=i??yr.EMPTY,this.right=s??yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new yr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1,yr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,n,r,i,s){return this}insert(e,n,r){return new yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vt{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lk(this.data.getIterator())}getIteratorFrom(e){return new lk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class lk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $l(t){return t.hasNext()?t.getNext():void 0}class hi{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Vt(nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ll(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class dk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dk("Invalid base64 string: "+s):s}}(e);return new Kn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const TZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(t){if(Ae(!!t),"string"==typeof t){let e=0;const n=TZ.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tn(t.seconds),nanos:Tn(t.nanos)}}function Tn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Do(t){return"string"==typeof t?Kn.fromBase64String(t):Kn.fromUint8Array(t)}function yy(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function vy(t){const e=t.mapValue.fields.__previous_value__;return yy(e)?vy(e):e}function Xf(t){const e=_a(t.mapValue.fields.__local_write_time__.timestampValue);return new cn(e.seconds,e.nanos)}class CZ{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class ya{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ya("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}const va={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Iy={nullValue:"NULL_VALUE"};function Ia(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yy(t)?4:gk(t)?9007199254740991:10:Ie()}function Bs(t,e){if(t===e)return!0;const n=Ia(t);if(n!==Ia(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xf(t).isEqual(Xf(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_a(i.timestampValue),a=_a(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Do(t.bytesValue).isEqual(Do(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Tn(i.geoPointValue.latitude)===Tn(s.geoPointValue.latitude)&&Tn(i.geoPointValue.longitude)===Tn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Tn(i.integerValue)===Tn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Tn(i.doubleValue),a=Tn(s.doubleValue);return o===a?Jf(o)===Jf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ll(t.arrayValue.values||[],e.arrayValue.values||[],Bs);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uk(o)!==uk(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Bs(o[u],a[u])))return!1;return!0}(t,e);default:return Ie()}var s}function ep(t,e){return void 0!==(t.values||[]).find(n=>Bs(n,e))}function Ea(t,e){if(t===e)return 0;const n=Ia(t),r=Ia(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Tn(s.integerValue||s.doubleValue),u=Tn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return hk(t.timestampValue,e.timestampValue);case 4:return hk(Xf(t),Xf(e));case 5:return $e(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Do(s),u=Do(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=$e(a[l],u[l]);if(0!==h)return h}return $e(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=$e(Tn(s.latitude),Tn(o.latitude));return 0!==a?a:$e(Tn(s.longitude),Tn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=Ea(a[l],u[l]);if(h)return h}return $e(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===va.mapValue&&o===va.mapValue)return 0;if(s===va.mapValue)return 1;if(o===va.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=$e(u[g],h[g]);if(0!==m)return m;const y=Ea(a[u[g]],l[h[g]]);if(0!==y)return y}return $e(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Ie()}}function hk(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $e(t,e);const n=_a(t),r=_a(e),i=$e(n.seconds,r.seconds);return 0!==i?i:$e(n.nanos,r.nanos)}function jl(t){return AC(t)}function AC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_a(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Do(t.bytesValue).toBase64():"referenceValue"in t?le.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=AC(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${AC(n.fields[o])}`;return i+"}"}(t.mapValue):Ie()}function bu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bC(t){return!!t&&"integerValue"in t}function tp(t){return!!t&&"arrayValue"in t}function fk(t){return!!t&&"nullValue"in t}function pk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wy(t){return!!t&&"mapValue"in t}function np(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ma(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=np(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=np(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gk(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function DZ(t){return"nullValue"in t?Iy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?bu(ya.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Ie()}function AZ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?bu(ya.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?va:Ie()}function mk(t,e){const n=Ea(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function _k(t,e){const n=Ea(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=np(n)}setAll(e){let n=nn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=np(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());wy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ma(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vr(np(this.value))}}function yk(t){const e=[];return ma(t.fields,(n,r)=>{const i=new nn([n]);if(wy(r)){const s=yk(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hi(e)}class rn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,be.min(),be.min(),be.min(),vr.empty(),0)}static newFoundDocument(e,n,r,i){return new rn(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new rn(e,2,n,be.min(),be.min(),vr.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,be.min(),be.min(),vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wa{constructor(e,n){this.position=e,this.inclusive=n}}function vk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?le.comparator(le.fromName(o.referenceValue),n.key):Ea(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ik(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bs(t.position[n],e.position[n]))return!1;return!0}class rp{constructor(e,n="asc"){this.field=e,this.dir=n}}function bZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Ek{}class ht extends Ek{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new SZ(e,n,r):"array-contains"===n?new MZ(e,r):"in"===n?new bk(e,r):"not-in"===n?new NZ(e,r):"array-contains-any"===n?new xZ(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new RZ(e,r):new PZ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ea(n,this.value)):null!==n&&Ia(this.value)===Ia(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mt extends Ek{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Mt(e,n)}matches(e){return Hl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Hl(t){return"and"===t.op}function SC(t){return"or"===t.op}function RC(t){return wk(t)&&Hl(t)}function wk(t){for(const e of t.filters)if(e instanceof Mt)return!1;return!0}function PC(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+jl(t.value);if(RC(t))return t.filters.map(e=>PC(e)).join(",");{const e=t.filters.map(n=>PC(n)).join(",");return`${t.op}(${e})`}}function Tk(t,e){return t instanceof ht?(r=t,(i=e)instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&Bs(r.value,i.value)):t instanceof Mt?function(r,i){return i instanceof Mt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Tk(o,i.filters[a]),!0)}(t,e):void Ie();var r,i}function Ck(t,e){const n=t.filters.concat(e);return Mt.create(n,t.op)}function Dk(t){return t instanceof ht?`${(n=t).field.canonicalString()} ${n.op} ${jl(n.value)}`:t instanceof Mt?function(n){return n.op.toString()+" {"+n.getFilters().map(Dk).join(" ,")+"}"}(t):"Filter";var n}class SZ extends ht{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class RZ extends ht{constructor(e,n){super(e,"in",n),this.keys=Ak(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PZ extends ht{constructor(e,n){super(e,"not-in",n),this.keys=Ak(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ak(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class MZ extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tp(n)&&ep(n.arrayValue,this.value)}}class bk extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&ep(this.value.arrayValue,n)}}class NZ extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(ep(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!ep(this.value.arrayValue,n)}}class xZ extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ep(this.value.arrayValue,r))}}class OZ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function MC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new OZ(t,e,n,r,i,s,o)}function Su(t){const e=ce(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>PC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Yf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jl(r)).join(",")),e.ce=n}return e.ce}function ip(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Tk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ik(t.startAt,e.startAt)&&Ik(t.endAt,e.endAt)}function Ty(t){return le.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Cy(t,e){return t.filters.filter(n=>n instanceof ht&&n.field.isEqual(e))}function Sk(t,e,n){let r=Iy,i=!0;for(const s of Cy(t,e)){let o=Iy,a=!0;switch(s.op){case"<":case"<=":o=DZ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Iy}mk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];mk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function Rk(t,e,n){let r=va,i=!0;for(const s of Cy(t,e)){let o=va,a=!0;switch(s.op){case">=":case">":o=AZ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=va}_k({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];_k({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Ao{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function Pk(t,e,n,r,i,s,o,a){return new Ao(t,e,n,r,i,s,o,a)}function zl(t){return new Ao(t)}function Mk(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function NC(t){return null!==t.collectionGroup}function Wl(t){const e=ce(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vt(nn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new rp(s,r))}),n.has(nn.keyField().canonicalString())||e.le.push(new rp(nn.keyField(),r))}return e.le}function ei(t){const e=ce(t);return e.he||(e.he=function Nk(t,e){if("F"===t.limitType)return MC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new rp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new wa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wa(t.startAt.position,t.startAt.inclusive):null;return MC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Wl(t))),e.he}function xC(t,e){const n=t.filters.concat([e]);return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dy(t,e,n){return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sp(t,e){return ip(ei(t),ei(e))&&t.limitType===e.limitType}function xk(t){return`${Su(ei(t))}|lt:${t.limitType}`}function ql(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Dk(i)).join(", ")}]`),Yf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>jl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>jl(i)).join(",")),`Target(${r})`}(ei(t))}; limitType=${t.limitType})`}function op(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wl(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const l=vk(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Wl(r),i)||r.endAt&&!function(o,a,u){const l=vk(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Wl(r),i)));var r,i}function Ok(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kk(t){return(e,n)=>{let r=!1;for(const i of Wl(t)){const s=kZ(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function kZ(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?Ea(u,l):Ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}class bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ck(this.inner)}size(){return this.innerSize}}const VZ=new Wt(le.comparator);function fi(){return VZ}const Vk=new Wt(le.comparator);function ap(...t){let e=Vk;for(const n of t)e=e.insert(n.key,n);return e}function Fk(t){let e=Vk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $s(){return up()}function Lk(){return up()}function up(){return new bo(t=>t.toString(),(t,e)=>t.isEqual(e))}const FZ=new Wt(le.comparator),LZ=new Vt(le.comparator);function Ze(...t){let e=LZ;for(const n of t)e=e.add(n);return e}const UZ=new Vt($e);function OC(){return UZ}function Uk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jf(e)?"-0":e}}function Bk(t){return{integerValue:""+t}}function $k(t,e){return tk(e)?Bk(e):Uk(t,e)}class Ay{constructor(){this._=void 0}}function BZ(t,e,n){return t instanceof Gl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yy(s)&&(s=vy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ru?Hk(t,e):t instanceof Pu?zk(t,e):function(i,s){const o=jk(i,s),a=Wk(o)+Wk(i.Ie);return bC(o)&&bC(i.Ie)?Bk(a):Uk(i.serializer,a)}(t,e)}function $Z(t,e,n){return t instanceof Ru?Hk(t,e):t instanceof Pu?zk(t,e):n}function jk(t,e){return t instanceof Zl?bC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Gl extends Ay{}class Ru extends Ay{constructor(e){super(),this.elements=e}}function Hk(t,e){const n=qk(e);for(const r of t.elements)n.some(i=>Bs(i,r))||n.push(r);return{arrayValue:{values:n}}}class Pu extends Ay{constructor(e){super(),this.elements=e}}function zk(t,e){let n=qk(e);for(const r of t.elements)n=n.filter(i=>!Bs(i,r));return{arrayValue:{values:n}}}class Zl extends Ay{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Wk(t){return Tn(t.integerValue||t.doubleValue)}function qk(t){return tp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class cp{constructor(e,n){this.field=e,this.transform=n}}class HZ{constructor(e,n){this.version=e,this.transformResults=n}}class ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function by(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Sy{}function Gk(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ql(t.key,ln.none()):new Kl(t.key,t.data,ln.none());{const n=t.data,r=vr.empty();let i=new Vt(nn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new So(t.key,r,new hi(i.toArray()),ln.none())}}function zZ(t,e,n){t instanceof Kl?function(i,s,o){const a=i.value.clone(),u=Qk(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof So?function(i,s,o){if(!by(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Qk(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Kk(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function lp(t,e,n,r){return t instanceof Kl?function(s,o,a,u){if(!by(s.precondition,o))return a;const l=s.value.clone(),h=Yk(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof So?function(s,o,a,u){if(!by(s.precondition,o))return a;const l=Yk(s.fieldTransforms,u,o),h=o.data;return h.setAll(Kk(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,by(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function WZ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=jk(r.transform,i||null);null!=s&&(null===n&&(n=vr.empty()),n.set(r.field,s))}return n||null}function Zk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Ll(r,i,(s,o)=>function jZ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Ru&&i instanceof Ru||r instanceof Pu&&i instanceof Pu?Ll(r.elements,i.elements,Bs):r instanceof Zl&&i instanceof Zl?Bs(r.Ie,i.Ie):r instanceof Gl&&i instanceof Gl);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Kl extends Sy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class So extends Sy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Kk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Qk(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$Z(o,a,n[i]))}return r}function Yk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,BZ(s,o,e))}return r}class Ql extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kC extends Sy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zZ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Lk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=Gk(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&Ll(this.mutations,e.mutations,(n,r)=>Zk(n,r))&&Ll(this.baseMutations,e.baseMutations,(n,r)=>Zk(n,r))}}class FC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=FZ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new FC(e,n,r,i)}}class LC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class GZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ln,_t;function Jk(t){switch(t){default:return Ie();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function Xk(t){if(void 0===t)return xn("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ln.OK:return B.OK;case Ln.CANCELLED:return B.CANCELLED;case Ln.UNKNOWN:return B.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return B.INTERNAL;case Ln.UNAVAILABLE:return B.UNAVAILABLE;case Ln.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ln.NOT_FOUND:return B.NOT_FOUND;case Ln.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ln.ABORTED:return B.ABORTED;case Ln.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ln.DATA_LOSS:return B.DATA_LOSS;default:return Ie()}}(_t=Ln||(Ln={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";function eV(){return new TextEncoder}const ZZ=new kl([4294967295,4294967295],0);function tV(t){const e=eV().encode(t),n=new $8;return n.update(e),new Uint8Array(n.digest())}function nV(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new kl([n,r],0),new kl([i,s],0)]}class UC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dp(`Invalid padding: ${n}`);if(r<0)throw new dp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new dp(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new dp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=kl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(kl.fromNumber(r)));return 1===i.compare(ZZ)&&(i=new kl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=tV(e),[r,i]=nV(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new UC(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=tV(e),[r,i]=nV(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class dp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,fp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hp(be.min(),i,new Wt($e),fi(),Ze())}}class fp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fp(r,n,Ze(),Ze(),Ze())}}class Py{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class rV{constructor(e,n){this.targetId=e,this.fe=n}}class iV{constructor(e,n,r=Kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sV{constructor(){this.ge=0,this.pe=aV(),this.ye=Kn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ze(),n=Ze(),r=Ze();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ie()}}),new fp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=aV()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ae(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class KZ{constructor(e){this.Le=e,this.ke=new Map,this.qe=fi(),this.Qe=oV(),this.Ke=new Wt($e)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Ty(s))if(0===r){const o=new le(s.path);this.We(n,o,rn.newNoDocument(o,be.min()))}else Ae(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Do(r).toUint8Array()}catch(u){if(u instanceof dk)return di("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new UC(o,i,s)}catch(u){return di(u instanceof dp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Ty(a.target)){const u=new le(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,rn.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ze();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new hp(e,n,this.Ke,this.qe,r);return this.qe=fi(),this.Qe=oV(),this.Ke=new Wt($e),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new sV,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Vt($e),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||re("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new sV),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function oV(){return new Wt(le.comparator)}function aV(){return new Wt(le.comparator)}const QZ={asc:"ASCENDING",desc:"DESCENDING"},YZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JZ={and:"AND",or:"OR"};class XZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function BC(t,e){return t.useProto3Json||Yf(e)?e:{value:e}}function Yl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function e7(t,e){return Yl(t,e.toTimestamp())}function On(t){return Ae(!!t),be.fromTimestamp(function(n){const r=_a(n);return new cn(r.seconds,r.nanos)}(t))}function $C(t,e){return(r=t,new mt(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function cV(t){const e=mt.fromString(t);return Ae(yV(e)),e}function pp(t,e){return $C(t.databaseId,e.path)}function js(t,e){const n=cV(e);if(n.get(1)!==t.databaseId.projectId)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(dV(n))}function jC(t,e){return $C(t.databaseId,e)}function lV(t){const e=cV(t);return 4===e.length?mt.emptyPath():dV(e)}function gp(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dV(t){return Ae(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function hV(t,e,n){return{name:pp(t,e),fields:n.value.mapValue.fields}}function fV(t,e,n){const r=js(t,e.name),i=On(e.updateTime),s=e.createTime?On(e.createTime):be.min(),o=new vr({mapValue:{fields:e.fields}}),a=rn.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function mp(t,e){let n;if(e instanceof Kl)n={update:hV(t,e.key,e.value)};else if(e instanceof Ql)n={delete:pp(t,e.key)};else if(e instanceof So)n={update:hV(t,e.key,e.data),updateMask:u7(e.fieldMask)};else{if(!(e instanceof kC))return Ie();n={verify:pp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ru)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ie()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:e7(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ie()),n;var s}function HC(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ln.updateTime(On(s.updateTime)):void 0!==s.exists?ln.exists(s.exists):ln.none():ln.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ae("REQUEST_TIME"===a.setToServerValue),u=new Gl):"appendMissingElements"in a?u=new Ru(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Pu(a.removeAllFromArray.values||[]):"increment"in a?u=new Zl(o,a.increment):Ie();const l=nn.fromServerFormat(a.fieldPath);return new cp(l,u)}(t,i)):[];var s;if(e.update){const i=js(t,e.update.name),s=new vr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new hi((e.updateMask.fieldPaths||[]).map(h=>nn.fromServerFormat(h)));return new So(i,s,o,n,r)}return new Kl(i,s,n,r)}if(e.delete){const i=js(t,e.delete);return new Ql(i,n)}if(e.verify){const i=js(t,e.verify);return new kC(i,n)}return Ie()}function pV(t,e){return{documents:[jC(t,e.path)]}}function zC(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=jC(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jC(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return _V(Mt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(l=>{return{field:Ta((g=l).field),direction:s7(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=BC(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function gV(t){let e=lV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(g){const m=mV(g);return m instanceof Mt&&RC(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(m=>{return new rp(Jl((C=m).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,Yf(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new wa((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new wa(g.values||[],!g.before)}(n.endAt)),Pk(e,i,o,s,a,"F",u,l)}function mV(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jl(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jl(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jl(n.unaryFilter.field);return ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jl(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(t):void 0!==t.fieldFilter?ht.create(Jl((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Mt.create(n.compositeFilter.filters.map(r=>mV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ie()}}(n.compositeFilter.op))}(t):Ie();var n}function s7(t){return QZ[t]}function o7(t){return YZ[t]}function a7(t){return JZ[t]}function Ta(t){return{fieldPath:t.canonicalString()}}function Jl(t){return nn.fromServerFormat(t.fieldPath)}function _V(t){return t instanceof ht?function(n){if("=="===n.op){if(pk(n.value))return{unaryFilter:{field:Ta(n.field),op:"IS_NAN"}};if(fk(n.value))return{unaryFilter:{field:Ta(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(pk(n.value))return{unaryFilter:{field:Ta(n.field),op:"IS_NOT_NAN"}};if(fk(n.value))return{unaryFilter:{field:Ta(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ta(n.field),op:o7(n.op),value:n.value}}}(t):t instanceof Mt?function(n){const r=n.getFilters().map(i=>_V(i));return 1===r.length?r[0]:{compositeFilter:{op:a7(n.op),filters:r}}}(t):Ie()}function u7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yV(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ro{constructor(e,n,r,i,s=be.min(),o=be.min(),a=Kn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vV{constructor(e){this.ut=e}}function IV(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:My(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:pp(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Yl(s,o.version.toTimestamp()),createTime:Yl(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Mu(e.version)};else{if(!e.isUnknownDocument())return Ie();r.unknownDocument={path:n.path.toArray(),version:Mu(e.version)}}var s,o;return r}function My(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Mu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Nu(t){const e=new cn(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function xu(t,e){const n=(e.baseMutations||[]).map(s=>HC(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>HC(t.ut,s)),i=cn.fromMillis(e.localWriteTimeMs);return new VC(e.batchId,i,n,r)}function _p(t){const e=Nu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Nu(t.lastLimboFreeSnapshotVersion):be.min();let r;return r=void 0!==t.query.documents?(Ae(1===(s=t.query).documents.length),ei(zl(lV(s.documents[0])))):function(s){return ei(gV(s))}(t.query),new Ro(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Kn.fromBase64String(t.resumeToken));var s}function EV(t,e){const n=Mu(e.snapshotVersion),r=Mu(e.lastLimboFreeSnapshotVersion);let i;i=Ty(e.target)?pV(t.ut,e.target):zC(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Su(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function WC(t){const e=gV({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Dy(e,e.limit,"L"):e}function qC(t,e){return new LC(e.largestBatchId,HC(t.ut,e.overlayMutation))}function wV(t,e){const n=e.path.lastSegment();return[t,Rr(e.path.popLast()),n]}function TV(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Mu(r.readTime),documentKey:Rr(r.documentKey.path),largestBatchId:r.largestBatchId}}class l7{getBundleMetadata(e,n){return CV(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Nu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return CV(e).put({bundleId:(i=n).id,createTime:Mu(On(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return DV(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:WC(s.bundledQuery),readTime:Nu(s.readTime)};var s})}saveNamedQuery(e,n){return DV(e).put({name:(i=n).name,readTime:Mu(On(i.readTime)),bundledQuery:i.bundledQuery});var i}}function CV(t){return ur(t,"bundles")}function DV(t){return ur(t,"namedQueries")}class Ny{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Ny(e,n.uid||"")}getOverlay(e,n){return yp(e).get(wV(this.userId,n)).next(r=>r?qC(this.serializer,r):null)}getOverlays(e,n){const r=$s();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new LC(n,o);i.push(this.lt(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Rr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(yp(e).H("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=$s(),s=Rr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return yp(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=qC(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=$s();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return yp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=qC(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}lt(e,n){return yp(e).put(function(i,s,o){const[a,u,l]=wV(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:mp(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function yp(t){return ur(t,"documentOverlays")}class Ou{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Tn(e.integerValue));else if("doubleValue"in e){const r=Tn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Jf(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Do(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?gk(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):Ie()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),le.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function d7(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function AV(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=d7(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Ou.St=new Ou;class h7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=AV(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=AV(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class f7{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class p7{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class vp{constructor(){this.Wt=new h7,this.Gt=new f7(this.Wt),this.zt=new p7(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class ku{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ku(this.indexId,this.documentKey,this.arrayValue,r)}}function Ca(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=bV(t.arrayValue,e.arrayValue),0!==n?n:(n=bV(t.directionalValue,e.directionalValue),0!==n?n:le.comparator(t.documentKey,e.documentKey)))}function bV(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class SV{constructor(e){this.Jt=new Vt((n,r)=>nn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ae(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=EC(e);if(void 0!==n&&!this.tn(n))return!1;const r=Cu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Vt(nn.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Du(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Du(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Du(r.field,"asc"===r.dir?0:1)));return new Ul(Ul.UNKNOWN_ID,this.collectionId,n,Bl.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function RV(t){var e,n;if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht){if(t instanceof bk){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ht.create(t.field,"==",s)))||[];return Mt.create(i,"or")}return t}const r=t.filters.map(i=>RV(i));return Mt.create(r,t.op)}function g7(t){if(0===t.getFilters().length)return[];const e=KC(RV(t));return Ae(PV(e)),GC(e)||ZC(e)?[e]:e.getFilters()}function GC(t){return t instanceof ht}function ZC(t){return t instanceof Mt&&RC(t)}function PV(t){return GC(t)||ZC(t)||function(n){if(n instanceof Mt&&SC(n)){for(const r of n.getFilters())if(!GC(r)&&!ZC(r))return!1;return!0}return!1}(t)}function KC(t){if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht)return t;if(1===t.filters.length)return KC(t.filters[0]);const e=t.filters.map(r=>KC(r));let n=Mt.create(e,t.op);return n=xy(n),PV(n)?n:(Ae(n instanceof Mt),Ae(Hl(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>QC(r,i)))}function QC(t,e){let n;return Ae(t instanceof ht||t instanceof Mt),Ae(e instanceof ht||e instanceof Mt),n=t instanceof ht?e instanceof ht?Mt.create([t,e],"and"):MV(t,e):e instanceof ht?MV(e,t):function(i,s){if(Ae(i.filters.length>0&&s.filters.length>0),Hl(i)&&Hl(s))return Ck(i,s.getFilters());const o=SC(i)?i:s,a=SC(i)?s:i,u=o.filters.map(l=>QC(l,a));return Mt.create(u,"or")}(t,e),xy(n)}function MV(t,e){if(Hl(e))return Ck(e,t.getFilters());{const n=e.filters.map(r=>QC(t,r));return Mt.create(n,"or")}}function xy(t){if(Ae(t instanceof ht||t instanceof Mt),t instanceof ht)return t;const e=t.getFilters();if(1===e.length)return xy(e[0]);if(wk(t))return t;const n=e.map(i=>xy(i)),r=[];return n.forEach(i=>{i instanceof ht?r.push(i):i instanceof Mt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Mt.create(r,t.op)}class m7{constructor(){this.on=new YC}addToCollectionParentIndex(e,n){return this.on.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Ri.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class YC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Vt(mt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vt(mt.comparator)).toArray()}}const Oy=new Uint8Array(0);class _7{constructor(e,n){this.user=e,this.databaseId=n,this._n=new YC,this.an=new bo(r=>Su(r),(r,i)=>ip(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:Rr(i)};return NV(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[K1(n),""],!1,!0);return NV(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Us(o.parent))}return r})}addFieldIndex(e,n){const r=Ip(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=ed(e);return s.next(a=>{o.put(TV(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ip(e),i=ed(e),s=Xl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ip(e),r=Xl(e),i=ed(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return O.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new SV(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Xl(e);let i=!0;const s=new Map;return O.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ze();const a=[];return O.forEach(s,(u,l)=>{var z;re("IndexedDbIndexManager",`Using index ${z=u,`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map(se=>`${se.fieldPath}:${se.kind}`).join(",")}`} to execute ${Su(n)}`);const h=function(z,se){const he=EC(se);if(void 0===he)return null;for(const je of Cy(z,he.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(l,u),g=function(z,se){const he=new Map;for(const je of Cu(se))for(const Ct of Cy(z,je.fieldPath))switch(Ct.op){case"==":case"in":he.set(je.fieldPath.canonicalString(),Ct.value);break;case"not-in":case"!=":return he.set(je.fieldPath.canonicalString(),Ct.value),Array.from(he.values())}return null}(l,u),m=function(z,se){const he=[];let je=!0;for(const Ct of Cu(se)){const Qn=0===Ct.kind?Sk(z,Ct.fieldPath,z.startAt):Rk(z,Ct.fieldPath,z.startAt);he.push(Qn.value),je&&(je=Qn.inclusive)}return new wa(he,je)}(l,u),y=function(z,se){const he=[];let je=!0;for(const Ct of Cu(se)){const Qn=0===Ct.kind?Rk(z,Ct.fieldPath,z.endAt):Sk(z,Ct.fieldPath,z.endAt);he.push(Qn.value),je&&(je=Qn.inclusive)}return new wa(he,je)}(l,u),C=this.ln(u,l,m),b=this.ln(u,l,y),M=this.hn(u,l,g),U=this.Pn(u.indexId,h,C,m.inclusive,b,y.inclusive,M);return O.forEach(U,N=>r.j(N,n.limit).next(z=>{z.forEach(se=>{const he=le.fromSegments(se.documentKey);o.has(he)||(o=o.add(he),a.push(he))})}))}).next(()=>a)}return O.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:g7(Mt.create(e.filters,"and")).map(r=>MC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.In(n[g/l]):Oy,y=this.Tn(e,m,r[g%l],i),C=this.En(e,m,s[g%l],o),b=a.map(M=>this.Tn(e,m,M,!0));h.push(...this.createRange(y,C,b))}return h}Tn(e,n,r,i){const s=new ku(e,le.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new ku(e,le.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new SV(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return O.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new Vt(nn.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new vp;for(const i of Cu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);Ou.St.ht(s,o)}return r.Ut()}In(e){const n=new vp;return Ou.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new vp;return Ou.St.ht(bu(this.databaseId,n),r.jt(function(s){const o=Cu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new vp);let s=0;for(const o of Cu(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&tp(a))i=this.Vn(i,o,a);else{const l=u.jt(o.kind);Ou.St.ht(a,l)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new vp;u.seed(a.Ut()),Ou.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ht&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Ip(e),i=ed(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(h,g){const m=g?new Bl(g.sequenceNumber,new Ri(Nu(g.readTime),new le(Us(g.documentKey)),g.largestBatchId)):Bl.empty(),y=h.fields.map(([C,b])=>new Du(nn.fromServerFormat(C),b));return new Ul(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:$e(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ip(e),s=ed(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,u=>s.put(TV(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,u=>this.gn(e,i,u).next(l=>{const h=this.pn(s,u);return l.isEqual(h)?O.resolve():this.yn(e,s,u,l,h)}))))})}wn(e,n,r,i){return Xl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Xl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Xl(e);let s=new Vt(Ca);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new ku(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Vt(Ca);const i=this.dn(n,e);if(null==i)return r;const s=EC(n);if(null!=s){const o=e.data.field(s.fieldPath);if(tp(o))for(const a of o.arrayValue.values||[])r=r.add(new ku(n.indexId,e.key,this.In(a),i))}else r=r.add(new ku(n.indexId,e.key,Oy,i));return r}yn(e,n,r,i,s){re("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,l,h,g,m){const y=u.getIterator(),C=l.getIterator();let b=$l(y),M=$l(C);for(;b||M;){let U=!1,N=!1;if(b&&M){const z=h(b,M);z<0?N=!0:z>0&&(U=!0)}else null!=b?N=!0:U=!0;U?(g(M),M=$l(C)):N?(m(b),b=$l(y)):(b=$l(y),M=$l(C))}}(i,s,Ca,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),O.waitFor(o)}fn(e){let n=1;return ed(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ca(o,a)).filter((o,a,u)=>!a||0!==Ca(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ca(o,e),u=Ca(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Oy,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Oy,[]]))}return s}bn(e,n){return Ca(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(xV)}getMinOffset(e,n){return O.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||Ie())).next(xV)}}function NV(t){return ur(t,"collectionParents")}function Xl(t){return ur(t,"indexEntries")}function Ip(t){return ur(t,"indexConfiguration")}function ed(t){return ur(t,"indexState")}function xV(t){Ae(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;wC(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ri(e.readTime,e.documentKey,n)}const OV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Pr(e,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kV(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(h,g,m)=>(a++,m.delete()));s.push(u.next(()=>{Ae(1===a)}));const l=[];for(const h of n.mutations){const g=ik(e,h.key.path,n.batchId);s.push(i.delete(g)),l.push(h.key)}return O.waitFor(s).next(()=>l)}function ky(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ie();e=t.noDocument}return JSON.stringify(e).length}Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(41943040,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);class Vy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ae(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Vy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Da(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=td(e),o=Da(e);return o.add({}).next(a=>{Ae("number"==typeof a);const u=new VC(a,n,r,i),l=function(y,C,b){const M=b.baseMutations.map(N=>mp(y.ut,N)),U=b.mutations.map(N=>mp(y.ut,N));return{userId:C,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:M,mutations:U}}(this.serializer,this.userId,u),h=[];let g=new Vt((m,y)=>$e(m.canonicalString(),y.canonicalString()));for(const m of i){const y=ik(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(o.put(l)),h.push(s.put(y,sZ))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),O.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return Da(e).get(n).next(r=>r?(Ae(r.userId===this.userId),xu(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?O.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Da(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=xu(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Da(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Da(e).W("userMutationsIndex",n).next(r=>r.map(i=>xu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=my(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return td(e).Y({range:i},(o,a,u)=>{const[l,h,g]=o,m=Us(h);if(l===this.userId&&n.path.isEqual(m))return Da(e).get(g).next(y=>{if(!y)throw Ie();Ae(y.userId===this.userId),s.push(xu(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt($e);const i=[];return n.forEach(s=>{const o=my(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=td(e).Y({range:a},(l,h,g)=>{const[m,y,C]=l,b=Us(y);m===this.userId&&s.path.isEqual(b)?r=r.add(C):g.done()});i.push(u)}),O.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=my(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Vt($e);return td(e).Y({range:o},(u,l,h)=>{const[g,m,y]=u,C=Us(m);g===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(y)):h.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Da(e).get(s).next(o=>{if(null===o)throw Ie();Ae(o.userId===this.userId),r.push(xu(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return kV(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return td(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Us(s[1]);i.push(u)}else a.done()}).next(()=>{Ae(0===i.length)})})}containsKey(e,n){return VV(e,this.userId,n)}Mn(e){return FV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function VV(t,e,n){const r=my(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return td(t).Y({range:s,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function Da(t){return ur(t,"mutations")}function td(t){return ur(t,"documentMutations")}function FV(t){return ur(t,"mutationQueues")}class Vu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Vu(0)}static Nn(){return new Vu(-1)}}class y7{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Vu(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>be.fromTimestamp(new cn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>nd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return nd(e).Y((o,a)=>{const u=_p(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return nd(e).Y((r,i)=>{const s=_p(i);n(s)})}Bn(e){return LV(e).get("targetGlobalKey").next(n=>(Ae(null!==n),n))}Ln(e,n){return LV(e).put("targetGlobalKey",n)}kn(e,n){return nd(e).put(EV(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Su(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return nd(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=_p(a);ip(n,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Aa(e);return n.forEach(o=>{const a=Rr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=Aa(e);return O.forEach(n,s=>{const o=Rr(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Aa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Aa(e);let s=Ze();return i.Y({range:r,J:!0},(o,a,u)=>{const l=Us(o[1]),h=new le(l);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=Rr(n.path),i=IDBKeyRange.bound([r],[K1(r)],!1,!0);let s=0;return Aa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return nd(e).get(n).next(r=>r?_p(r):null)}}function nd(t){return ur(t,"targets")}function LV(t){return ur(t,"targetGlobal")}function Aa(t){return ur(t,"targetDocuments")}function UV([t,e],[n,r]){const i=$e(t,n);return 0===i?$e(e,r):i}class v7{constructor(e){this.Qn=e,this.buffer=new Vt(UV),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();UV(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,G.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){ga(r)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield pa(r)}yield n.Gn(3e5)}))}}class I7{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return O.resolve(Pi._e);const r=new v7(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(OV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OV):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Fl()<=ks.in.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class E7{constructor(e,n){this.db=e,this.garbageCollector=function $V(t,e){return new I7(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Fy(e,r)}removeReference(e,n,r){return Fy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Fy(e,n)}Xn(e,n){return function(i,s){let o=!1;return FV(i).Z(a=>VV(i,a,s).next(u=>(u&&(o=!0),O.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,be.min()),Aa(e).delete([0,Rr(o.path)])))});i.push(u)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Fy(e,n)}Zn(e,n){const r=Aa(e);let i,s=Pi._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Pi._e&&n(new le(Us(i)),s),s=l,i=u):s=Pi._e}).next(()=>{s!==Pi._e&&n(new le(Us(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fy(t,e){return Aa(t).put((i=t.currentSequenceNumber,{targetId:0,path:Rr(e.path),sequenceNumber:i}));var i}class jV{constructor(){this.changes=new bo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class w7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Fu(e).put(r)}removeEntry(e,n,r){return Fu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],My(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=rn.newInvalidDocument(n);return Fu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ep(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:rn.newInvalidDocument(n)};return Fu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ep(n))},(i,s)=>{r={document:this.tr(n,s),size:ky(s)}}).next(()=>r)}getEntries(e,n){let r=fi();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=fi(),i=new Wt(le.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,ky(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return O.resolve();let i=new Vt(qV);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Ep(i.first()),Ep(i.last())),o=i.getIterator();let a=o.getNext();return Fu(e).Y({index:"documentKeyIndex",range:s},(u,l,h)=>{const g=le.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&qV(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.U(Ep(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),My(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fu(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=fi();for(const g of l){const m=this.tr(le.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(op(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=fi();const o=WV(n,r),a=WV(n,Ri.max());return Fu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,h)=>{const g=this.tr(le.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new T7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return zV(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}er(e,n){return zV(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function c7(t,e){let n;if(e.document)n=fV(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=Nu(e.noDocument.readTime);n=rn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ie();{const r=le.fromSegments(e.unknownDocument.path),i=Nu(e.unknownDocument.version);n=rn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new cn(i[0],i[1]);return be.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(be.min()))return r}return rn.newInvalidDocument(e)}}function HV(t){return new w7(t)}class T7 extends jV{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new bo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Vt((s,o)=>$e(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=IV(this._r.serializer,o);i=i.add(s.path.popLast());const l=ky(u);r+=l-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=IV(this._r.serializer,o.convertToNoDocument(be.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function zV(t){return ur(t,"remoteDocumentGlobal")}function Fu(t){return ur(t,"remoteDocumentsV14")}function Ep(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WV(t,e){const n=e.documentKey.path.toArray();return[t,My(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function qV(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=$e(n[s],r[s]),i)return i;return i=$e(n.length,r.length),i||(i=$e(n[n.length-2],r[r.length-2]),i||$e(n[n.length-1],r[r.length-1]))}class C7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class GV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&lp(r.mutation,i,hi.empty(),cn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const i=$s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ap();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=fi();const o=up(),a=up();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof So)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),lp(h.mutation,l,h.mutation.getFieldMask(),cn.now())):o.set(l.key,hi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new C7(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=up();let i=new Wt((o,a)=>o-a),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||hi.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||Ze()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=Lk();h.forEach(m=>{if(!s.has(m)){const y=Gk(n.get(m),r.get(m));null!==y&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return le.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):NC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve($s());let a=-1,u=s;return o.next(l=>O.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Ze())).next(h=>({batchId:a,changes:Fk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=ap();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ap();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{const l=(g=n,m=u.child(s),new Ao(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,rn.newInvalidDocument(h)))});let a=ap();return o.forEach((u,l)=>{const h=s.get(u);void 0!==h&&lp(h.mutation,l,hi.empty(),cn.now()),op(n,l)&&(a=a.insert(u,l))}),a})}}class D7{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return O.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:On(i.createTime)}),O.resolve();var i}getNamedQuery(e,n){return O.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:WC(i.bundledQuery),readTime:On(i.readTime)}),O.resolve();var i}}class A7{constructor(){this.overlays=new Wt(le.comparator),this.lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$s();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=$s(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Wt((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=$s(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=$s(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LC(n,r));let s=this.lr.get(n);void 0===s&&(s=Ze(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class JC{constructor(){this.hr=new Vt(cr.Pr),this.Ir=new Vt(cr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new cr(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new cr(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new le(new mt([])),r=new cr(n,e),i=new cr(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new le(new mt([])),r=new cr(n,e),i=new cr(n,e+1);let s=Ze();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new cr(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class cr{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return le.comparator(e.key,n.key)||$e(e.gr,n.gr)}static Tr(e,n){return $e(e.gr,n.gr)||le.comparator(e.key,n.key)}}class b7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Vt(cr.Pr)}checkEmpty(e){return O.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new VC(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new cr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new cr(n,0),i=new cr(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt($e);return n.forEach(i=>{const s=new cr(i,0),o=new cr(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),O.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new cr(new le(s),0);let a=new Vt($e);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},o),O.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ae(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return O.forEach(n.mutations,i=>{const s=new cr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new cr(n,0),i=this.yr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return O.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class S7{constructor(e){this.Cr=e,this.docs=new Wt(le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let r=fi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fi();const o=n.path,a=new le(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||wC(Y1(h),r)<=0||(i.has(h.key)||op(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ie()}vr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new R7(this)}getSize(e){return O.resolve(this.size)}}class R7 extends jV{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class P7{constructor(e){this.persistence=e,this.Fr=new bo(n=>Su(n),ip),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Mr=0,this.Or=new JC,this.targetCount=0,this.Nr=Vu.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),O.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Vu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.kn(n),O.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Or.containsKey(n))}}class XC{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Pi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new P7(this),this.indexManager=new m7,this.remoteDocumentCache=new S7(r=>this.referenceDelegate.Qr(r)),this.serializer=new vV(n),this.Kr=new D7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new A7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new b7(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const i=new M7(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class M7 extends X1{constructor(e){super(),this.currentSequenceNumber=e}}class Ly{constructor(e){this.persistence=e,this.Gr=new JC,this.zr=null}static jr(e){return new Ly(e)}get Hr(){if(this.zr)return this.zr;throw Ie()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Hr,r=>{const i=le.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,be.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return O.or([()=>O.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class N7{constructor(e){this.serializer=e}N(e,n,r,i){const s=new gy("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rk,{unique:!0}),u.createObjectStore("documentMutations"),ZV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),ZV(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rk,{unique:!0});const g=l.store("mutations"),m=h.map(y=>g.put(y));return O.waitFor(m)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:_Z});l.createIndex("collectionPathOverlayIndex",yZ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",vZ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:oZ});l.createIndex("documentKeyIndex",aZ),l.createIndex("collectionGroupIndex",uZ)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:fZ}).createIndex("sequenceNumberIndex",pZ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:gZ}).createIndex("documentKeyIndex",mZ,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=ky(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>O.forEach(a,u=>{Ae(u.userId===s.userId);const l=xu(this.serializer,u);return kV(e,s.userId,l).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new mt(o),l=[0,Rr(u)];s.push(n.get(l).next(h=>h?O.resolve():n.put({targetId:0,path:Rr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>O.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:hZ});const r=n.store("collectionParents"),i=new YC,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Rr(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new mt(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],l)=>{const h=Us(a);return s(h.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=_p(i),o=EV(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new le(mt.fromString(g.document.name).popFirst(5)):g.noDocument?le.fromSegments(g.noDocument.path):g.unknownDocument?le.fromSegments(g.unknownDocument.path):Ie()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>O.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=HV(this.serializer),s=new XC(Ly.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:Ze();xu(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),O.forEach(a,(u,l)=>{const h=new ar(l),g=Ny.ct(this.serializer,h),m=s.getIndexManager(h),y=Vy.ct(h,this.serializer,m,s.referenceDelegate);return new GV(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new DC(n,Pi._e),u).next()})})}}function ZV(t){t.createObjectStore("targetDocuments",{keyPath:lZ}).createIndex("documentTargetsIndex",dZ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cZ,{unique:!0}),t.createObjectStore("targetGlobal")}const eD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tD{constructor(e,n,r,i,s,o,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=l,this._i=h,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!tD.D())throw new J(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new E7(this,i),this.Ii=n+"main",this.serializer=new vV(u),this.Ti=new gs(this.Ii,this.ai,new N7(this.serializer)),this.qr=new y7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HV(this.serializer),this.Kr=new l7,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===h&&xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,eD);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Pi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,G.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,G.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,G.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>By(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(ga(e))return re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return wp(e).get("owner").next(n=>O.resolve(this.wi(n)))}Si(e){return By(e).delete(this.clientId)}bi(){var e=this;return(0,G.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ur(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return O.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?O.resolve(!0):wp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new J(B.FAILED_PRECONDITION,eD);return!1}}return!(!this.networkEnabled||!this.inForeground)||By(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&re("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,G.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new DC(n,Pi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>By(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Vy.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _7(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Ny.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?EZ:14===u?ak:13===u?ok:12===u?IZ:11===u?sk:void Ie();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new DC(a,this.Lr?this.Lr.next():Pi._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new J(B.FAILED_PRECONDITION,J1);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return wp(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(B.FAILED_PRECONDITION,eD)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wp(e).put("owner",n)}static D(){return gs.D()}pi(e){const n=wp(e);return n.get("owner").next(r=>this.wi(r)?(re("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(xn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,kt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){xn("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wp(t){return ur(t,"owner")}function By(t){return ur(t,"clientMetadata")}function nD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class rD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ze(),i=Ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new rD(e,n.fromCache,r,i)}}class x7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class KV{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new x7;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Fl()<=ks.in.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),O.resolve()):(Fl()<=ks.in.DEBUG&&re("QueryEngine","Query:",ql(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Fl()<=ks.in.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):O.resolve())}zi(e,n){if(Mk(n))return O.resolve(null);let r=ei(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Dy(n,null,"F"),r=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ze(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,o,u.readTime)?this.zi(e,Dy(n,null,"F")):this.Xi(e,l,n,u)}))})))}ji(e,n,r,i){return Mk(n)||i.isEqual(be.min())?O.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?O.resolve(null):(Fl()<=ks.in.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ql(n)),this.Xi(e,o,n,Q1(i,-1)).next(a=>a))})}Yi(e,n){let r=new Vt(kk(e));return n.forEach((i,s)=>{op(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Fl()<=ks.in.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",ql(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ri.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class O7{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Wt($e),this.ns=new bo(s=>Su(s),ip),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GV(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function QV(t,e,n,r){return new O7(t,e,n,r)}function YV(t,e){return iD.apply(this,arguments)}function iD(){return iD=(0,G.Z)(function*(t,e){const n=ce(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Ze();for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})}),iD.apply(this,arguments)}function JV(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function XV(t,e,n){let r=Ze(),i=Ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=fi();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:o,cs:i}})}function F7(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rd(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Ro(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function id(t,e,n){return sD.apply(this,arguments)}function sD(){return sD=(0,G.Z)(function*(t,e,n){const r=ce(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ga(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),sD.apply(this,arguments)}function $y(t,e,n){const r=ce(t);let i=be.min(),s=Ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){const g=ce(u),m=g.ns.get(h);return void 0!==m?O.resolve(g.ts.get(m)):g.qr.getTargetData(l,h)}(r,o,ei(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:be.min(),n?s:Ze())).next(a=>(nF(r,Ok(e),a),{documents:a,ls:s})))}function eF(t,e){const n=ce(t),r=ce(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function tF(t,e){const n=ce(t),r=n.rs.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,Q1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(nF(n,e,i),i))}function nF(t,e,n){let r=t.rs.get(e)||be.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function oD(){return oD=(0,G.Z)(function*(t,e,n,r){const i=ce(t);let s=Ze(),o=fi();for(const l of n){const h=e.hs(l.metadata.name);l.document&&(s=s.add(h));const g=e.Ps(l);g.setReadTime(e.Is(l.metadata.readTime)),o=o.insert(h,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield rd(i,(h=r,ei(zl(mt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>XV(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.us,h.cs)).next(()=>h.us)))}),oD.apply(this,arguments)}function U7(t,e){return aD.apply(this,arguments)}function aD(){return aD=(0,G.Z)(function*(t,e,n=Ze()){const r=yield rd(t,ei(WC(e.bundledQuery))),i=ce(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=On(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Kn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),aD.apply(this,arguments)}function rF(t,e){return`firestore_clients_${t}_${e}`}function iF(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function uD(t,e){return`firestore_targets_${t}_${e}`}class jy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new J(i.error.code,i.error.message))),o?new jy(e,n,i.state,s):(xn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new J(r.error.code,r.error.message))),s?new Tp(e,r.state,i):(xn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hy{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=OC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=tk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Hy(e,s):(xn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class cD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new cD(n.clientId,n.onlineState):(xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lD{constructor(){this.activeTargetIds=OC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dD{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Wt($e),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=rF(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new lD),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,G.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(rF(e.persistenceKey,i));if(s){const o=Hy.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(uD(this.persistenceKey,e));if(r){const i=Tp.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(uD(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return re("SharedClientState","READ",e,n),n}setItem(e,n){re("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,G.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Pi._e;if(null!=o)try{const u=JSON.parse(o);Ae("number"==typeof u),a=u}catch(u){xn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Pi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new jy(this.currentUser,e,n,r),s=iF(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=iF(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=uD(this.persistenceKey,e),s=new Tp(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return Hy.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return jy.Ts(new ar(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Tp.Ts(i,n)}Ms(e){return cD.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,G.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=OC();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class sF{constructor(){this.eo=new lD,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new lD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class B7{ro(e){}shutdown(){}}class oF{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zy=null;function hD(){return null===zy?zy=268435456+Math.round(2147483648*Math.random()):zy++,"0x"+zy.toString(16)}const $7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j7{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Mr="WebChannelConnection";class H7 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=hD(),u=this.So(n,r);re("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(n,u,l,i).then(h=>(re("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw di("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Vl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${$7[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=hD();return new Promise((o,a)=>{const u=new B8;u.setWithCredentials(!0),u.listenOnce(L8.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vC.NO_ERROR:const h=u.getResponseJson();re(Mr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case vC.TIMEOUT:re(Mr,`RPC '${e}' ${s} timed out`),a(new J(B.DEADLINE_EXCEEDED,"Request time out"));break;case vC.HTTP_ERROR:const g=u.getStatus();if(re(Mr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const C=function(M){const U=M.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(U)>=0?U:B.UNKNOWN}(y.status);a(new J(C,y.message))}else a(new J(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(B.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{re(Mr,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);re(Mr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(e,n,r){const i=hD(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=V8(),a=F8(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");re(Mr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);let m=!1,y=!1;const C=new j7({co:M=>{y?re(Mr,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(re(Mr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),re(Mr,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},lo:()=>g.close()}),b=(M,U,N)=>{M.listen(U,z=>{try{N(z)}catch(se){setTimeout(()=>{throw se},0)}})};return b(g,py.EventType.OPEN,()=>{y||re(Mr,`RPC '${e}' stream ${i} transport opened.`)}),b(g,py.EventType.CLOSE,()=>{y||(y=!0,re(Mr,`RPC '${e}' stream ${i} transport closed`),C.Ro())}),b(g,py.EventType.ERROR,M=>{y||(y=!0,di(Mr,`RPC '${e}' stream ${i} transport errored:`,M),C.Ro(new J(B.UNAVAILABLE,"The operation could not be completed")))}),b(g,py.EventType.MESSAGE,M=>{var U;if(!y){const N=M.data[0];Ae(!!N);const se=N.error||(null===(U=N[0])||void 0===U?void 0:U.error);if(se){re(Mr,`RPC '${e}' stream ${i} received error:`,se);const he=se.status;let je=function(qp){const Av=Ln[qp];if(void 0!==Av)return Xk(Av)}(he),Ct=se.message;void 0===je&&(je=B.INTERNAL,Ct="Unknown error status: "+he+" with message "+se.message),y=!0,C.Ro(new J(je,Ct)),g.close()}else re(Mr,`RPC '${e}' stream ${i} received:`,N),C.Vo(N)}}),b(a,U8.STAT_EVENT,M=>{M.stat===z1.PROXY?re(Mr,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===z1.NOPROXY&&re(Mr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.Ao()},0),C}}function aF(){return typeof window<"u"?window:null}function Wy(){return typeof document<"u"?document:null}function Cp(t){return new XZ(t,!0)}class fD{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class uF{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new fD(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,G.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,G.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,G.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(xn(n.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===B.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new J(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,G.Z)(function*(){e.state=0,e.start()}))}o_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z7 extends uF{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function n7(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Ie(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ae(void 0===h||"string"==typeof h),Kn.fromBase64String(h||"")):(Ae(void 0===h||h instanceof Uint8Array),Kn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?B.UNKNOWN:Xk(l.code);return new J(h,l.message||"")}(o);n=new iV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=js(t,r.document.name),s=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):be.min(),a=new vr({mapValue:{fields:r.document.fields}}),u=rn.newFoundDocument(i,s,o,a);n=new Py(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=js(t,r.document),s=r.readTime?On(r.readTime):be.min(),o=rn.newNoDocument(i,s);n=new Py([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=js(t,r.document);n=new Py([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ie();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new GZ(i,s);n=new rV(r.targetId,o)}}var l;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?On(o.readTime):be.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=gp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Ty(u)?{documents:pV(s,u)}:{query:zC(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uV(s,o.resumeToken);const l=BC(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(be.min())>0){a.readTime=Yl(s,o.snapshotVersion.toTimestamp());const l=BC(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function i7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=gp(this.serializer),n.removeTarget=e,this.e_(n)}}class W7 extends uF{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function r7(t,e){return t&&t.length>0?(Ae(void 0!==e),t.map(n=>function(i,s){let o=On(i.updateTime?i.updateTime:s);return o.isEqual(be.min())&&(o=On(s)),new HZ(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.I_(r,n)}return Ae(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=gp(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mp(this.serializer,r))};this.e_(n)}}class q7 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(B.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(B.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class Z7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(xn(n),this.f_=!1):re("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class K7{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,G.Z)(function*(){var u;ba(o)&&(re("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,G.Z)(function*(h){const g=ce(h);g.C_.add(4),yield sd(g),g.M_.set("Unknown"),g.C_.delete(4),yield Dp(g)}),function l(h){return u.apply(this,arguments)})(o))}))}),this.M_=new Z7(r,i)}}function Dp(t){return gD.apply(this,arguments)}function gD(){return gD=(0,G.Z)(function*(t){if(ba(t))for(const e of t.v_)yield e(!0)}),gD.apply(this,arguments)}function sd(t){return mD.apply(this,arguments)}function mD(){return mD=(0,G.Z)(function*(t){for(const e of t.v_)yield e(!1)}),mD.apply(this,arguments)}function qy(t,e){const n=ce(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),vD(n)?yD(n):ad(n).Ho()&&_D(n,e))}function Ap(t,e){const n=ce(t),r=ad(n);n.D_.delete(e),r.Ho()&&cF(n,e),0===n.D_.size&&(r.Ho()?r.Zo():ba(n)&&n.M_.set("Unknown"))}function _D(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ad(t).u_(e)}function cF(t,e){t.x_.Oe(e),ad(t).c_(e)}function yD(t){t.x_=new KZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ad(t).start(),t.M_.g_()}function vD(t){return ba(t)&&!ad(t).jo()&&t.D_.size>0}function ba(t){return 0===ce(t).C_.size}function lF(t){t.x_=void 0}function Q7(t){return ID.apply(this,arguments)}function ID(){return ID=(0,G.Z)(function*(t){t.D_.forEach((e,n)=>{_D(t,e)})}),ID.apply(this,arguments)}function Y7(t,e){return ED.apply(this,arguments)}function ED(){return ED=(0,G.Z)(function*(t,e){lF(t),vD(t)?(t.M_.w_(e),yD(t)):t.M_.set("Unknown")}),ED.apply(this,arguments)}function J7(t,e,n){return wD.apply(this,arguments)}function wD(){return wD=(0,G.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof iV&&2===e.state&&e.cause)try{yield(r=(0,G.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gy(t,r)}else if(e instanceof Py?t.x_.$e(e):e instanceof rV?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(be.min()))try{const r=yield JV(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.D_.get(l);h&&s.D_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const h=s.D_.get(u);if(!h)return;s.D_.set(u,h.withResumeToken(Kn.EMPTY_BYTE_STRING,h.snapshotVersion)),cF(s,u);const g=new Ro(h.target,u,l,h.sequenceNumber);_D(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){re("RemoteStore","Failed to raise snapshot:",r),yield Gy(t,r)}var r}),wD.apply(this,arguments)}function Gy(t,e,n){return TD.apply(this,arguments)}function TD(){return TD=(0,G.Z)(function*(t,e,n){if(!ga(e))throw e;t.C_.add(1),yield sd(t),t.M_.set("Offline"),n||(n=()=>JV(t.localStore)),t.asyncQueue.enqueueRetryable((0,G.Z)(function*(){re("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Dp(t)}))}),TD.apply(this,arguments)}function dF(t,e){return e().catch(n=>Gy(t,n,e))}function od(t){return CD.apply(this,arguments)}function CD(){return CD=(0,G.Z)(function*(t){const e=ce(t),n=Sa(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;X7(e);)try{const i=yield F7(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,eK(e,i)}catch(i){yield Gy(e,i)}hF(e)&&fF(e)}),CD.apply(this,arguments)}function X7(t){return ba(t)&&t.b_.length<10}function eK(t,e){t.b_.push(e);const n=Sa(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function hF(t){return ba(t)&&!Sa(t).jo()&&t.b_.length>0}function fF(t){Sa(t).start()}function tK(t){return DD.apply(this,arguments)}function DD(){return DD=(0,G.Z)(function*(t){Sa(t).E_()}),DD.apply(this,arguments)}function nK(t){return AD.apply(this,arguments)}function AD(){return AD=(0,G.Z)(function*(t){const e=Sa(t);for(const n of t.b_)e.P_(n.mutations)}),AD.apply(this,arguments)}function rK(t,e,n){return bD.apply(this,arguments)}function bD(){return bD=(0,G.Z)(function*(t,e,n){const r=t.b_.shift(),i=FC.from(r,e,n);yield dF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield od(t)}),bD.apply(this,arguments)}function iK(t,e){return SD.apply(this,arguments)}function SD(){return SD=(0,G.Z)(function*(t,e){var n;e&&Sa(t).h_&&(yield(n=(0,G.Z)(function*(i,s){if(Jk(a=s.code)&&a!==B.ABORTED){const o=i.b_.shift();Sa(i).Yo(),yield dF(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield od(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),hF(t)&&fF(t)}),SD.apply(this,arguments)}function pF(t,e){return RD.apply(this,arguments)}function RD(){return RD=(0,G.Z)(function*(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=ba(n);n.C_.add(3),yield sd(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Dp(n)}),RD.apply(this,arguments)}function PD(t,e){return MD.apply(this,arguments)}function MD(){return MD=(0,G.Z)(function*(t,e){const n=ce(t);e?(n.C_.delete(2),yield Dp(n)):e||(n.C_.add(2),yield sd(n),n.M_.set("Unknown"))}),MD.apply(this,arguments)}function ad(t){return t.O_||(t.O_=function(n,r,i){const s=ce(n);return s.A_(),new z7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:Q7.bind(null,t),Io:Y7.bind(null,t),a_:J7.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.O_.Yo(),vD(t)?yD(t):t.M_.set("Unknown")):(yield t.O_.stop(),lF(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function Sa(t){return t.N_||(t.N_=function(n,r,i){const s=ce(n);return s.A_(),new W7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:tK.bind(null,t),Io:iK.bind(null,t),T_:nK.bind(null,t),I_:rK.bind(null,t)}),t.v_.push(function(){var e=(0,G.Z)(function*(n){n?(t.N_.Yo(),yield od(t)):(yield t.N_.stop(),t.b_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class ND{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ND(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ud(t,e){if(xn("AsyncQueue",`${e}: ${t}`),ga(t))return new J(B.UNAVAILABLE,`${e}: ${t}`);throw t}class cd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=ap(),this.sortedSet=new Wt(this.comparator)}static emptySet(e){return new cd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new cd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class gF{constructor(){this.B_=new Wt(le.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Ie():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ld{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ld(e,n,cd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class sK{constructor(){this.k_=void 0,this.listeners=[]}}class oK{constructor(){this.queries=new bo(e=>xk(e),sp),this.onlineState="Unknown",this.q_=new Set}}function xD(t,e){return OD.apply(this,arguments)}function OD(){return OD=(0,G.Z)(function*(t,e){const n=ce(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new sK),i)try{s.k_=yield n.onListen(r)}catch(o){const a=ud(o,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&FD(n)}),OD.apply(this,arguments)}function kD(t,e){return VD.apply(this,arguments)}function VD(){return VD=(0,G.Z)(function*(t,e){const n=ce(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),VD.apply(this,arguments)}function aK(t,e){const n=ce(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&FD(n)}function uK(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function FD(t){t.q_.forEach(e=>{e.next()})}class LD{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ld(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class cK{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class mF{constructor(e){this.serializer=e}hs(e){return js(this.serializer,e)}Ps(e){return e.metadata.exists?fV(this.serializer,e.document,!1):rn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return On(e)}}class lK{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_F(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=mt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new mF(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ze()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,G.Z)(function*(){const n=yield function L7(t,e,n,r){return oD.apply(this,arguments)}(e.localStore,new mF(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield U7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function _F(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class yF{constructor(e){this.key=e}}class vF{constructor(e){this.key=e}}class IF{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ze(),this.mutatedKeys=Ze(),this._a=kk(e),this.aa=new cd(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new gF,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),y=op(this.query,g)?g:null,C=!!m&&this.mutatedKeys.has(m.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let M=!1;m&&y?m.data.isEqual(y.data)?C!==b&&(r.track({type:3,doc:y}),M=!0):this.ha(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this._a(y,u)>0||l&&this._a(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(o=o.add(y),s=b?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((h,g)=>function(y,C){const b=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return b(y)-b(C)}(h.type,g.type)||this._a(h.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,0!==o.length||l?{snapshot:new ld(this.query,e.aa,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new gF,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ze(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new vF(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new yF(r))}),n}da(e){this.ia=e.ls,this.oa=Ze();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return ld.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class dK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hK{constructor(e){this.key=e,this.Ra=!1}}class fK{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new bo(a=>xk(a),sp),this.fa=new Map,this.ga=new Set,this.pa=new Wt(le.comparator),this.ya=new Map,this.wa=new JC,this.Sa={},this.ba=new Map,this.Da=Vu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function pK(t,e){return UD.apply(this,arguments)}function UD(){return UD=(0,G.Z)(function*(t,e){const n=uA(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield rd(n.localStore,ei(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield BD(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&qy(n.remoteStore,o)}return i}),UD.apply(this,arguments)}function BD(t,e,n,r,i){return $D.apply(this,arguments)}function $D(){return $D=(0,G.Z)(function*(t,e,n,r,i){t.va=(g,m,y)=>{return(C=(0,G.Z)(function*(M,U,N,z){let se=U.view.ca(N);se.Zi&&(se=yield $y(M.localStore,U.query,!1).then(({documents:Qn})=>U.view.ca(Qn,se)));const he=z&&z.targetChanges.get(U.targetId),je=z&&null!=z.targetMismatches.get(U.targetId),Ct=U.view.applyChanges(se,M.isPrimaryClient,he,je);return YD(M,U.targetId,Ct.Ta),Ct.snapshot}),function b(M,U,N,z){return C.apply(this,arguments)})(t,g,m,y);var C};const s=yield $y(t.localStore,e,!0),o=new IF(e,s.ls),a=o.ca(s.documents),u=fp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,u);YD(t,n,l.Ta);const h=new dK(e,n,o);return t.ma.set(e,h),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),l.snapshot}),$D.apply(this,arguments)}function gK(t,e){return jD.apply(this,arguments)}function jD(){return jD=(0,G.Z)(function*(t,e){const n=ce(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!sp(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield id(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Ap(n.remoteStore,r.targetId),dd(n,r.targetId)}).catch(pa))):(dd(n,r.targetId),yield id(n.localStore,r.targetId,!0))}),jD.apply(this,arguments)}function HD(){return HD=(0,G.Z)(function*(t,e,n){const r=cA(t);try{const i=yield function(o,a){const u=ce(o),l=cn.now(),h=a.reduce((y,C)=>y.add(C.key),Ze());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=fi(),b=Ze();return u.ss.getEntries(y,h).next(M=>{C=M,C.forEach((U,N)=>{N.isValidDocument()||(b=b.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(M=>{g=M;const U=[];for(const N of a){const z=WZ(N,g.get(N.key).overlayedDocument);null!=z&&U.push(new So(N.key,z,yk(z.value.mapValue),ln.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,U,a)}).next(M=>{m=M;const U=M.applyToLocalDocumentSet(g,b);return u.documentOverlayCache.saveOverlays(y,M.batchId,U)})}).then(()=>({batchId:m.batchId,changes:Fk(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Sa[o.currentUser.toKey()];l||(l=new Wt($e)),l=l.insert(a,u),o.Sa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Po(r,i.changes),yield od(r.remoteStore)}catch(i){const s=ud(i,"Failed to persist write");n.reject(s)}}),HD.apply(this,arguments)}function EF(t,e){return zD.apply(this,arguments)}function zD(){return zD=(0,G.Z)(function*(t,e){const n=ce(t);try{const r=yield function V7(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.qr.removeMatchingKeys(s,h.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,h.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);var b,M,U;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Kn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),M=y,U=h,(0===(b=m).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,y))});let u=fi(),l=Ze();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(XV(s,o,e.documentUpdates).next(h=>{u=h.us,l=h.cs})),!r.isEqual(be.min())){const h=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ae(o.Ra):i.removedDocuments.size>0&&(Ae(o.Ra),o.Ra=!1))}),yield Po(n,r,e)}catch(r){yield pa(r)}}),zD.apply(this,arguments)}function wF(t,e,n){const r=ce(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ce(o);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.listeners)m.Q_(a)&&(l=!0)}),l&&FD(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _K(t,e,n){return WD.apply(this,arguments)}function WD(){return WD=(0,G.Z)(function*(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Wt(le.comparator);o=o.insert(s,rn.newNoDocument(s,be.min()));const a=Ze().add(s),u=new hp(be.min(),new Map,new Wt($e),o,a);yield EF(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),JD(r)}else yield id(r.localStore,e,!1).then(()=>dd(r,e,n)).catch(pa)}),WD.apply(this,arguments)}function yK(t,e){return qD.apply(this,arguments)}function qD(){return qD=(0,G.Z)(function*(t,e){const n=ce(t),r=e.batch.batchId;try{const i=yield function k7(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let y=O.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(b=>{const M=l.docVersions.get(C);Ae(null!==M),b.version.compareTo(M)<0&&(g.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),h.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ze();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);QD(n,r,null),KD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Po(n,i)}catch(i){yield pa(i)}}),qD.apply(this,arguments)}function vK(t,e,n){return GD.apply(this,arguments)}function GD(){return GD=(0,G.Z)(function*(t,e,n){const r=ce(t);try{const i=yield function(o,a){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ae(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);QD(r,e,n),KD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Po(r,i)}catch(i){yield pa(i)}}),GD.apply(this,arguments)}function ZD(){return ZD=(0,G.Z)(function*(t,e){const n=ce(t);ba(n.remoteStore)||re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ce(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=ud(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ZD.apply(this,arguments)}function KD(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function QD(t,e,n){const r=ce(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function dd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||TF(t,r)})}function TF(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Ap(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),JD(t))}function YD(t,e,n){for(const r of n)r instanceof yF?(t.wa.addReference(r.key,e),EK(t,r)):r instanceof vF?(re("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||TF(t,r.key)):Ie()}function EK(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(re("SyncEngine","New document in limbo: "+n),t.ga.add(r),JD(t))}function JD(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new le(mt.fromString(e)),r=t.Da.next();t.ya.set(r,new hK(n)),t.pa=t.pa.insert(n,r),qy(t.remoteStore,new Ro(ei(zl(n.path)),r,"TargetPurposeLimboResolution",Pi._e))}}function Po(t,e,n){return XD.apply(this,arguments)}function XD(){return XD=(0,G.Z)(function*(t,e,n){const r=ce(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=rD.Qi(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,G.Z)(function*(l,h){const g=ce(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,y=>O.forEach(y.ki,C=>g.persistence.referenceDelegate.addReference(m,y.targetId,C)).next(()=>O.forEach(y.qi,C=>g.persistence.referenceDelegate.removeReference(m,y.targetId,C)))))}catch(m){if(!ga(m))throw m;re("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const C=g.ts.get(y),M=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);g.ts=g.ts.insert(y,M)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,s))}),XD.apply(this,arguments)}function wK(t,e){return eA.apply(this,arguments)}function eA(){return eA=(0,G.Z)(function*(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=yield YV(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new J(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Po(n,r._s)}var s}),eA.apply(this,arguments)}function TK(t,e){const n=ce(t),r=n.ya.get(e);if(r&&r.Ra)return Ze().add(r.key);{let i=Ze();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function CK(t,e){return tA.apply(this,arguments)}function tA(){return tA=(0,G.Z)(function*(t,e){const n=ce(t),r=yield $y(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&YD(n,e.targetId,i.Ta),i}),tA.apply(this,arguments)}function DK(t,e){return nA.apply(this,arguments)}function nA(){return nA=(0,G.Z)(function*(t,e){const n=ce(t);return tF(n.localStore,e).then(r=>Po(n,r))}),nA.apply(this,arguments)}function AK(t,e,n,r){return rA.apply(this,arguments)}function rA(){return rA=(0,G.Z)(function*(t,e,n,r){const i=ce(t),s=yield function(a,u){const l=ce(a),h=ce(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Cn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):O.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield od(i.remoteStore):"acknowledged"===n||"rejected"===n?(QD(i,e,r||null),KD(i,e),u=e,ce(ce(i.localStore).mutationQueue).Fn(u)):Ie(),yield Po(i,s)):re("SyncEngine","Cannot apply mutation batch with id: "+e)}),rA.apply(this,arguments)}function iA(){return iA=(0,G.Z)(function*(t,e){const n=ce(t);if(uA(n),cA(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield CF(n,r.toArray());n.Ca=!0,yield PD(n.remoteStore,!0);for(const s of i)qy(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(dd(n,o),id(n.localStore,o,!0))),Ap(n.remoteStore,o)}),yield i,yield CF(n,r),function(o){const a=ce(o);a.ya.forEach((u,l)=>{Ap(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Wt(le.comparator)}(n),n.Ca=!1,yield PD(n.remoteStore,!1)}}),iA.apply(this,arguments)}function CF(t,e,n){return sA.apply(this,arguments)}function sA(){return sA=(0,G.Z)(function*(t,e,n){const r=ce(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield rd(r.localStore,ei(u[0]));for(const l of u){const h=r.ma.get(l),g=yield CK(r,h);g.snapshot&&s.push(g.snapshot)}}else{const l=yield eF(r.localStore,o);a=yield rd(r.localStore,l),yield BD(r,DF(l),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),sA.apply(this,arguments)}function DF(t){return Pk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function SK(t){return n=ce(t).localStore,ce(ce(n).persistence).Bi();var n}function RK(t,e,n,r){return oA.apply(this,arguments)}function oA(){return oA=(0,G.Z)(function*(t,e,n,r){const i=ce(t);if(i.Ca)return void re("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield tF(i.localStore,Ok(s[0])),a=hp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Kn.EMPTY_BYTE_STRING);yield Po(i,o,a);break}case"rejected":yield id(i.localStore,e,!0),dd(i,e,r);break;default:Ie()}}),oA.apply(this,arguments)}function PK(t,e,n){return aA.apply(this,arguments)}function aA(){return aA=(0,G.Z)(function*(t,e,n){const r=uA(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){re("SyncEngine","Adding an already active target "+i);continue}const s=yield eF(r.localStore,i),o=yield rd(r.localStore,s);yield BD(r,DF(s),o.targetId,!1,o.resumeToken),qy(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield id(r.localStore,i,!1).then(()=>{Ap(r.remoteStore,i),dd(r,i)}).catch(pa))}}),aA.apply(this,arguments)}function uA(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_K.bind(null,e),e.Va.a_=aK.bind(null,e.eventManager),e.Va.Fa=uK.bind(null,e.eventManager),e}function cA(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vK.bind(null,e),e}class bp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,G.Z)(function*(){n.serializer=Cp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return QV(this.persistence,new KV,e.initialUser,this.serializer)}createPersistence(e){return new XC(Ly.jr,this.serializer)}createSharedClientState(e){return new sF}terminate(){var e=this;return(0,G.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lA extends bp{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield cA(r.xa.syncEngine),yield od(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return QV(this.persistence,new KV,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new BV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new rZ(n,this.persistence);return new nZ(e.asyncQueue,r)}createPersistence(e){const n=nD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new tD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,aF(),Wy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new sF}}class AF extends lA{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof dD&&(r.sharedClientState.syncEngine={Ys:AK.bind(null,i),Zs:RK.bind(null,i),Xs:PK.bind(null,i),Bi:SK.bind(null,i),Js:DK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,G.Z)(function*(o){yield function bK(t,e){return iA.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=aF();if(!dD.D(n))throw new J(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dD(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class hd{initialize(e,n){var r=this;return(0,G.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>wF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=wK.bind(null,r.syncEngine),yield PD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new oK}createDatastore(e){const n=Cp(e.databaseInfo.databaseId),r=new H7(e.databaseInfo);return new q7(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>wF(this.syncEngine,n,0),a=oF.D()?new oF:new B7,new K7(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){const g=new fK(i,s,o,a,u,l);return h&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,G.Z)(function*(r){const i=ce(r);re("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield sd(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function bF(t,e=10240){let n=0;return{read:()=>(0,G.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,G.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Zy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class xK{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Zn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,G.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,G.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,G.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new cK(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,G.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,G.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,G.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class OK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,G.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new J(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,G.Z)(function*(o,a){const u=ce(o),l=gp(u.serializer)+"/documents",h={documents:a.map(C=>pp(u.serializer,C))},g=yield u.Co("BatchGetDocuments",l,h,a.length),m=new Map;g.forEach(C=>{const b=function t7(t,e){return"found"in e?function(r,i){Ae(!!i.found);const s=js(r,i.found.name),o=On(i.found.updateTime),a=i.found.createTime?On(i.found.createTime):be.min(),u=new vr({mapValue:{fields:i.found.fields}});return rn.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Ae(!!i.missing),Ae(!!i.readTime);const s=js(r,i.missing),o=On(i.readTime);return rn.newNoDocument(s,o)}(t,e):Ie()}(u.serializer,C);m.set(b.key.toString(),b)});const y=[];return a.forEach(C=>{const b=m.get(C.toString());Ae(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ql(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,G.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=le.fromPath(i);e.mutations.push(new kC(s,e.precondition(s)))}),yield(r=(0,G.Z)(function*(s,o){const a=ce(s),u=gp(a.serializer)+"/documents",l={writes:o.map(h=>mp(a.serializer,h))};yield a.wo("Commit",u,l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ie();n=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?ln.exists(!1):ln.updateTime(n):ln.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new J(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(n)}return ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class kK{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new fD(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,G.Z)(function*(){const n=new OK(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!Yf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Jk(n)}return!1}}class VK{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ar.UNAUTHENTICATED,this.clientId=Z1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,G.Z)(function*(a){re("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,G.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=ud(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function Ky(t,e){return dA.apply(this,arguments)}function dA(){return dA=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,G.Z)(function*(s){r.isEqual(s)||(yield YV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),dA.apply(this,arguments)}function hA(t,e){return fA.apply(this,arguments)}function fA(){return fA=(0,G.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield pA(t);re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>pF(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>pF(e.remoteStore,s)),t._onlineComponents=e}),fA.apply(this,arguments)}function SF(t){return"FirebaseError"===t.name?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function pA(t){return gA.apply(this,arguments)}function gA(){return gA=(0,G.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ky(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!SF(n))throw n;di("Error using user provided cache. Falling back to memory cache: "+n),yield Ky(t,new bp)}}else re("FirestoreClient","Using default OfflineComponentProvider"),yield Ky(t,new bp);return t._offlineComponents}),gA.apply(this,arguments)}function Qy(t){return mA.apply(this,arguments)}function mA(){return mA=(0,G.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),yield hA(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),yield hA(t,new hd))),t._onlineComponents}),mA.apply(this,arguments)}function RF(t){return pA(t).then(e=>e.persistence)}function fd(t){return pA(t).then(e=>e.localStore)}function PF(t){return Qy(t).then(e=>e.remoteStore)}function _A(t){return Qy(t).then(e=>e.syncEngine)}function pd(t){return yA.apply(this,arguments)}function yA(){return yA=(0,G.Z)(function*(t){const e=yield Qy(t),n=e.eventManager;return n.onListen=pK.bind(null,e.syncEngine),n.onUnlisten=gK.bind(null,e.syncEngine),n}),yA.apply(this,arguments)}function NF(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(s,o,a,u,l){const h=new Zy({next:m=>{o.enqueueAndForget(()=>kD(s,g));const y=m.docs.has(a);!y&&m.fromCache?l.reject(new J(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new LD(zl(a.path),h,{includeMetadataChanges:!0,J_:!0});return xD(s,g)}(yield pd(t),t.asyncQueue,e,n,r)})),r.promise}function xF(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(s,o,a,u,l){const h=new Zy({next:m=>{o.enqueueAndForget(()=>kD(s,g)),m.fromCache&&"server"===u.source?l.reject(new J(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new LD(a,h,{includeMetadataChanges:!0,J_:!0});return xD(s,g)}(yield pd(t),t.asyncQueue,e,n,r)})),r.promise}function OF(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const kF=new Map;function vA(t,e,n){if(!n)throw new J(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VF(t,e,n,r){if(!0===e&&!0===r)throw new J(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FF(t){if(!le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LF(t){if(le.isDocumentKey(t))throw new J(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Ie()}function ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yy(t);throw new J(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function UF(t,e){if(e<=0)throw new J(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class BF{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new J(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new J(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=OF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BF(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new z8;switch(r.type){case"firstParty":return new Z8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=kF.get(n);r&&(re("ComponentProvider","Removing Datastore"),kF.delete(n),r.terminate())}(this),Promise.resolve()}}function $F(t,e,n,r={}){var i;const s=(t=ut(t,Sp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=ar.MOCK_USER;else{a=(0,kt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new J(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ar(l)}t._authCredentials=new W8(new q1(a,u))}}class Ir{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ir(this.firestore,e,this._query)}}class sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class Hs extends Ir{constructor(e,n,r){super(e,n,zl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new le(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function jF(t,e,...n){if(t=(0,kt.m9)(t),vA("collection","path",e),t instanceof Sp){const r=mt.fromString(e,...n);return LF(r),new Hs(t,null,r)}{if(!(t instanceof sn||t instanceof Hs))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return LF(r),new Hs(t.firestore,null,r)}}function Jy(t,e,...n){if(t=(0,kt.m9)(t),1===arguments.length&&(e=Z1.newId()),vA("doc","path",e),t instanceof Sp){const r=mt.fromString(e,...n);return FF(r),new sn(t,null,new le(r))}{if(!(t instanceof sn||t instanceof Hs))throw new J(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mt.fromString(e,...n));return FF(r),new sn(t.firestore,t instanceof Hs?t.converter:null,new le(r))}}function HF(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),(t instanceof sn||t instanceof Hs)&&(e instanceof sn||e instanceof Hs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function IA(t,e){return t=(0,kt.m9)(t),e=(0,kt.m9)(e),t instanceof Ir&&e instanceof Ir&&t.firestore===e.firestore&&sp(t._query,e._query)&&t.converter===e.converter}class ZK{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new fD(this,"async_queue_retry"),this.iu=()=>{const n=Wy();n&&re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Wy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Wy();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Zn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,G.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!ga(n))throw n;re("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,xn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=ND.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Ie()}verifyOperationInProgress(){}uu(){var e=this;return(0,G.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function EA(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class KK{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qt extends Sp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ZK,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zF(this),this._firestoreClient.terminate()}}function YK(t,e){const n="object"==typeof t?t:(0,Jr.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Jr._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,kt.P0)("firestore");s&&$F(i,...s)}return i}function Cn(t){return t._firestoreClient||zF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function zF(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new CZ(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,OF(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new VK(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function WF(t,e,n){const r=new Zn;return t.asyncQueue.enqueue((0,G.Z)(function*(){try{yield Ky(t,n),yield hA(t,e),r.resolve()}catch(i){const s=i;if(!SF(s))throw s;di("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function qF(t){if(t._initialized||t._terminated)throw new J(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zs(Kn.fromBase64String(e))}catch(n){throw new J(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zs(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mo{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new J(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._methodName=e}}class Xy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}const aQ=/^__.*__$/;class uQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new So(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kl(e,this.data,n,this.fieldTransforms)}}class GF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new So(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class ev{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ev(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return rv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(ZF(this.Iu)&&aQ.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class cQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cp(e)}pu(e,n,r,i=!1){return new ev({Iu:e,methodName:n,gu:r,path:nn.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uu(t){const e=t._freezeSettings(),n=Cp(t._databaseId);return new cQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tv(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);DA("Data must be an object, but it was:",o,r);const a=YF(r,o);let u,l;if(s.merge)u=new hi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const m=Mp(e,g,n);if(!o.contains(m))throw new J(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);XF(h,m)||h.push(m)}u=new hi(h),l=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=o.fieldTransforms;return new uQ(new vr(a),u,l)}class Pp extends Lu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pp}}function KF(t,e,n){return new ev({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wA extends Lu{_toFieldTransform(e){return new cp(e.path,new Gl)}isEqual(e){return e instanceof wA}}class lQ extends Lu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=KF(this,e,!0),r=this.yu.map(s=>Bu(s,n)),i=new Ru(r);return new cp(e.path,i)}isEqual(e){return this===e}}class dQ extends Lu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=KF(this,e,!0),r=this.yu.map(s=>Bu(s,n)),i=new Pu(r);return new cp(e.path,i)}isEqual(e){return this===e}}class hQ extends Lu{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Zl(e.serializer,$k(e.serializer,this.wu));return new cp(e.path,n)}isEqual(e){return this===e}}function TA(t,e,n,r){const i=t.pu(1,e,n);DA("Data must be an object, but it was:",i,r);const s=[],o=vr.empty();ma(r,(u,l)=>{const h=nv(e,u,n);l=(0,kt.m9)(l);const g=i.Ru(h);if(l instanceof Pp)s.push(h);else{const m=Bu(l,g);null!=m&&(s.push(h),o.set(h,m))}});const a=new hi(s);return new GF(o,a,i.fieldTransforms)}function CA(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[Mp(e,r,n)],u=[i];if(s.length%2!=0)throw new J(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Mp(e,s[m])),u.push(s[m+1]);const l=[],h=vr.empty();for(let m=a.length-1;m>=0;--m)if(!XF(l,a[m])){const y=a[m];let C=u[m];C=(0,kt.m9)(C);const b=o.Ru(y);if(C instanceof Pp)l.push(y);else{const M=Bu(C,b);null!=M&&(l.push(y),h.set(y,M))}}const g=new hi(l);return new GF(h,g,o.fieldTransforms)}function QF(t,e,n,r=!1){return Bu(n,t.pu(r?4:3,e))}function Bu(t,e){if(JF(t=(0,kt.m9)(t)))return DA("Unsupported field value:",e,t),YF(t,e);if(t instanceof Lu)return function(r,i){if(!ZF(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Bu(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,kt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return $k(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=cn.fromDate(r);return{timestampValue:Yl(i.serializer,s)}}if(r instanceof cn){const s=new cn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yl(i.serializer,s)}}if(r instanceof Xy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zs)return{bytesValue:uV(i.serializer,r._byteString)};if(r instanceof sn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$C(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Yy(r)}`)}(t,e)}function YF(t,e){const n={};return ck(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(t,(r,i)=>{const s=Bu(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function JF(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof cn||t instanceof Xy||t instanceof zs||t instanceof sn||t instanceof Lu)}function DA(t,e,n){if(!JF(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Yy(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Mp(t,e,n){if((e=(0,kt.m9)(e))instanceof Mo)return e._internalPath;if("string"==typeof e)return nv(t,e);throw rv("Field path arguments must be of type string or ",t,!1,void 0,n)}const fQ=new RegExp("[~\\*/\\[\\]]");function nv(t,e,n){if(e.search(fQ)>=0)throw rv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mo(...e.split("."))._internalPath}catch{throw rv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new J(B.INVALID_ARGUMENT,a+t+u)}function XF(t,e){return t.some(n=>n.isEqual(e))}class Np{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(iv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class pQ extends Np{data(){return super.data()}}function iv(t,e){return"string"==typeof e?nv(t,e):e instanceof Mo?e._internalPath:e._delegate._internalPath}function eL(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new J(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AA{}class xp extends AA{}function Ra(t,e,...n){let r=[];e instanceof AA&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof gd).length,a=s.filter(u=>u instanceof Op).length;if(o>1||o>0&&a>0)throw new J(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Op extends xp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Op(e,n,r)}_apply(e){const n=this._parse(e);return iL(e._query,n),new Ir(e.firestore,e.converter,xC(e._query,n))}_parse(e){const n=Uu(e.firestore);return function(s,o,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new J(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){rL(g,h);const y=[];for(const C of g)y.push(nL(u,s,C));m={arrayValue:{values:y}}}else m=nL(u,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||rL(g,h),m=QF(a,"where",g,"in"===h||"not-in"===h);return ht.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class gd extends AA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Mt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)iL(o,u),o=xC(o,u)}(e._query,n),new Ir(e.firestore,e.converter,xC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bA extends xp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bA(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new J(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rp(s,o)}(e._query,this._field,this._direction);return new Ir(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ao(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class sv extends xp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new sv(e,n,r)}_apply(e){return new Ir(e.firestore,e.converter,Dy(e._query,this._limit,this._limitType))}}class ov extends xp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new ov(e,n,r)}_apply(e){const n=tL(e,this.type,this._docOrFields,this._inclusive);return new Ir(e.firestore,e.converter,(s=n,new Ao((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class av extends xp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new av(e,n,r)}_apply(e){const n=tL(e,this.type,this._docOrFields,this._inclusive);return new Ir(e.firestore,e.converter,(s=n,new Ao((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function tL(t,e,n,r){if(n[0]=(0,kt.m9)(n[0]),n[0]instanceof Np)return function(s,o,a,u,l){if(!u)throw new J(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Wl(s))if(g.field.isKeyField())h.push(bu(o,u.key));else{const m=u.data.field(g.field);if(yy(m))throw new J(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new J(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new wa(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Uu(t.firestore);return function(o,a,u,l,h,g){const m=o.explicitOrderBy;if(h.length>m.length)throw new J(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let C=0;C<h.length;C++){const b=h[C];if(m[C].field.isKeyField()){if("string"!=typeof b)throw new J(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!NC(o)&&-1!==b.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);const M=o.path.child(mt.fromString(b));if(!le.isDocumentKey(M))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const U=new le(M);y.push(bu(a,U))}else{const M=QF(u,l,b);y.push(M)}}return new wa(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function nL(t,e,n){if("string"==typeof(n=(0,kt.m9)(n))){if(""===n)throw new J(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NC(e)&&-1!==n.indexOf("/"))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mt.fromString(n));if(!le.isDocumentKey(r))throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bu(t,new le(r))}if(n instanceof sn)return bu(t,n._key);throw new J(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yy(n)}.`)}function rL(t,e){if(!Array.isArray(t)||0===t.length)throw new J(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iL(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new J(B.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SA{convertValue(e,n="none"){switch(Ia(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ma(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Xy(Tn(e.latitude),Tn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vy(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xf(e));default:return null}}convertTimestamp(e){const n=_a(e);return new cn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mt.fromString(e);Ae(yV(r));const i=new ya(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||xn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function uv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class TQ extends SA{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}class $u{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class No extends Np{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(iv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class kp extends No{data(e={}){return super.data(e)}}class Pa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $u(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kp(this._firestore,this._userDataWriter,r.key,r,new $u(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new kp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $u(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new kp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $u(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:DQ(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DQ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}function oL(t,e){return t instanceof No&&e instanceof No?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Pa&&e instanceof Pa&&t._firestore===e._firestore&&IA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Ma extends SA{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function aL(t,e,n){t=ut(t,sn);const r=ut(t.firestore,qt),i=uv(t.converter,e,n);return md(r,[tv(Uu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ln.none())])}function uL(t,e,n,...r){t=ut(t,sn);const i=ut(t.firestore,qt),s=Uu(i);let o;return o="string"==typeof(e=(0,kt.m9)(e))||e instanceof Mo?CA(s,"updateDoc",t._key,e,n,r):TA(s,"updateDoc",t._key,e),md(i,[o.toMutation(t._key,ln.exists(!0))])}function cL(t,...e){var n,r,i;t=(0,kt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||EA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(EA(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof sn)l=ut(t.firestore,qt),h=zl(t._key.path),u={next:g=>{e[o]&&e[o](RA(l,t,g))},error:e[o+1],complete:e[o+2]};else{const g=ut(t,Ir);l=ut(g.firestore,qt),h=g._query;const m=new Ma(l);u={next:y=>{e[o]&&e[o](new Pa(l,m,g,y))},error:e[o+1],complete:e[o+2]},eL(t._query)}return function(m,y,C,b){const M=new Zy(b),U=new LD(y,M,C);return m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return xD(yield pd(m),U)})),()=>{M.Na(),m.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return kD(yield pd(m),U)}))}}(Cn(l),h,a,u)}function md(t,e){return function(r,i){const s=new Zn;return r.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function mK(t,e,n){return HD.apply(this,arguments)}(yield _A(r),i,s)})),s.promise}(Cn(t),e)}function RA(t,e,n){const r=n.docs.get(e._key),i=new Ma(t);return new No(t,i,e._key,r,new $u(n.hasPendingWrites,n.fromCache),e.converter)}const HQ={maxAttempts:5};class lL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Uu(e)}set(e,n,r){this._verifyNotCommitted();const i=Na(e,this._firestore),s=uv(i.converter,n,r),o=tv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ln.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Na(e,this._firestore);let o;return o="string"==typeof(n=(0,kt.m9)(n))||n instanceof Mo?CA(this._dataReader,"WriteBatch.update",s._key,n,r,i):TA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Na(e,this._firestore);return this._mutations=this._mutations.concat(new Ql(n._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Na(t,e){if((t=(0,kt.m9)(t)).firestore!==e)throw new J(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class zQ extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Uu(n)}get(n){const r=Na(n,this._firestore),i=new TQ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ie();const o=s[0];if(o.isFoundDocument())return new Np(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Np(this._firestore,i,r._key,null,r.converter);throw Ie()})}set(n,r,i){const s=Na(n,this._firestore),o=uv(s.converter,r,i),a=tv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Na(n,this._firestore);let a;return a="string"==typeof(r=(0,kt.m9)(r))||r instanceof Mo?CA(this._dataReader,"Transaction.update",o._key,r,i,s):TA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Na(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Na(e,this._firestore),r=new Ma(this._firestore);return super.get(e).then(i=>new No(this._firestore,r,n._key,i._document,new $u(!1,!1),n.converter))}}function MA(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new J("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function pL(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function gL(){if(!function wZ(){return typeof atob<"u"}())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Vl=Jr.SDK_VERSION,(0,Jr._registerComponent)(new bO.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new qt(new q8(r.getProvider("auth-internal")),new K8(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new J(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(W1,"4.4.0",e),(0,Jr.registerVersion)(W1,"4.4.0","esm2017")}();class Vp{constructor(e){this._delegate=e}static fromBase64String(e){return gL(),new Vp(zs.fromBase64String(e))}static fromUint8Array(e){return pL(),new Vp(zs.fromUint8Array(e))}toBase64(){return gL(),this._delegate.toBase64()}toUint8Array(){return pL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NA(t){return function eY(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class tY{enableIndexedDbPersistence(e,n){return function JK(t,e){qF(t=ut(t,qt));const n=Cn(t);if(n._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");di("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new hd;return WF(n,i,new lA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function XK(t){qF(t=ut(t,qt));const e=Cn(t);if(e._uninitializedComponentsProvider)throw new J(B.FAILED_PRECONDITION,"SDK cache is already specified.");di("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new hd;return WF(e,r,new AF(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function eQ(t){if(t._initialized&&!t._terminated)throw new J(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{yield(n=(0,G.Z)(function*(i){if(!gs.D())return Promise.resolve();const s=i+"main";yield gs.delete(s)}),function r(i){return n.apply(this,arguments)})(nD(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class mL{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ya||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&di("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){$F(this._delegate,e,n,r)}enableNetwork(){return function nQ(t){return function FK(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield RF(t),n=yield PF(t);return e.setNetworkEnabled(!0),function(i){const s=ce(i);return s.C_.delete(0),Dp(s)}(n)}))}(Cn(t=ut(t,qt)))}(this._delegate)}disableNetwork(){return function rQ(t){return function LK(t){return t.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield RF(t),n=yield PF(t);return e.setNetworkEnabled(!1),(r=(0,G.Z)(function*(s){const o=ce(s);o.C_.add(0),yield sd(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(Cn(t=ut(t,qt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function tQ(t){return function(n){const r=new Zn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function IK(t,e){return ZD.apply(this,arguments)}(yield _A(n),r)})),r.promise}(Cn(t=ut(t,qt)))}(this._delegate)}onSnapshotsInSync(e){return function OQ(t,e){return function $K(t,e){const n=new Zy(e);return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield pd(t),s=n,ce(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return i=yield pd(t),s=n,void ce(i).q_.delete(s);var i,s}))}}(Cn(t=ut(t,qt)),EA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _d(this,jF(this._delegate,e))}catch(n){throw ti(n,"collection()","Firestore.collection()")}}doc(e){try{return new Xi(this,Jy(this._delegate,e))}catch(n){throw ti(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ni(this,function GK(t,e){if(t=ut(t,Sp),vA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ir(t,null,(r=e,new Ao(mt.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw ti(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WQ(t,e,n){t=ut(t,qt);const r=Object.assign(Object.assign({},HQ),n);return function(s){if(s.maxAttempts<1)throw new J(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Zn;return s.asyncQueue.enqueueAndForget((0,G.Z)(function*(){const l=yield function MF(t){return Qy(t).then(e=>e.datastore)}(s);new kK(s.asyncQueue,l,a,o,u).run()})),u.promise}(Cn(t),i=>e(new zQ(t,i)),r)}(this._delegate,n=>e(new _L(this,n)))}batch(){return Cn(this._delegate),new yL(new lL(this._delegate,e=>md(this._delegate,e)))}loadBundle(e){return function iQ(t,e){const n=Cn(t=ut(t,qt)),r=new KK;return function jK(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?eV().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return bF(h,g);if(h instanceof ArrayBuffer)return bF(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new xK(h,a);var h}(n,Cp(e));t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){!function MK(t,e,n){const r=ce(t);var i;(i=(0,G.Z)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(C,b){const M=ce(C),U=On(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",N=>M.Kr.getBundleMetadata(N,b.id)).then(N=>!!N&&N.createTime.compareTo(U)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(C=l).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);u._updateProgress(_F(l));const h=new lK(l,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield h.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const m=yield h.complete();return yield Po(o,m.ra,void 0),yield function(C,b){const M=ce(C);return M.persistence.runTransaction("Save bundle","readwrite",U=>M.Kr.saveBundleMetadata(U,b))}(o.localStore,l),u._completeWith(m.progress),Promise.resolve(m.na)}catch(l){return di("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var C}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield _A(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function sQ(t,e){return function HK(t,e){return t.asyncQueue.enqueue((0,G.Z)(function*(){return function(r,i){const s=ce(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield fd(t),e)}))}(Cn(t=ut(t,qt)),e).then(n=>n?new Ir(t,null,n.query):null)}(this._delegate,e).then(n=>n?new ni(this,n):null)}}class lv extends SA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vp(new zs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Xi.forKey(n,this.firestore,null)}}class _L{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new lv(e)}get(e){const n=Hu(e);return this._delegate.get(n).then(r=>new Fp(this._firestore,new No(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Hu(e);return r?(MA("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Hu(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Hu(e);return this._delegate.delete(n),this}}class yL{constructor(e){this._delegate=e}set(e,n,r){const i=Hu(e);return r?(MA("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Hu(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Hu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ju{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new kp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ju.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new ju(e,new lv(e),n),i.set(n,s)),s}}ju.INSTANCES=new WeakMap;class Xi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xi(n,new sn(n._delegate,r,new le(e)))}static forKey(e,n,r){return new Xi(n,new sn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _d(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _d(this.firestore,jF(this._delegate,e))}catch(n){throw ti(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,kt.m9)(e))instanceof sn&&HF(this._delegate,e)}set(e,n){n=MA("DocumentReference.set",n);try{return n?aL(this._delegate,e,n):aL(this._delegate,e)}catch(r){throw ti(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?uL(this._delegate,e):uL(this._delegate,e,n,...r)}catch(i){throw ti(i,"updateDoc()","DocumentReference.update()")}}delete(){return function NQ(t){return md(ut(t.firestore,qt),[new Ql(t._key,ln.none())])}(this._delegate)}onSnapshot(...e){const n=vL(e),r=IL(e,i=>new Fp(this.firestore,new No(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cL(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function bQ(t){t=ut(t,sn);const e=ut(t.firestore,qt),n=Cn(e),r=new Ma(e);return function UK(t,e){const n=new Zn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(s,o,a){try{const u=yield function(h,g){const m=ce(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new J(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=ud(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield fd(t),e,n);var r})),n.promise}(n,t._key).then(i=>new No(e,r,t._key,i,new $u(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function SQ(t){t=ut(t,sn);const e=ut(t.firestore,qt);return NF(Cn(e),t._key,{source:"server"}).then(n=>RA(e,t,n))}(this._delegate):function AQ(t){t=ut(t,sn);const e=ut(t.firestore,qt);return NF(Cn(e),t._key).then(n=>RA(e,t,n))}(this._delegate),n.then(r=>new Fp(this.firestore,new No(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Xi(this.firestore,this._delegate.withConverter(e?ju.getInstance(this.firestore,e):null))}}function ti(t,e,n){return t.message=t.message.replace(e,n),t}function vL(t){for(const e of t)if("object"==typeof e&&!NA(e))return e;return{}}function IL(t,e){var n,r;let i;return i=NA(t[0])?t[0]:NA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Fp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Xi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return oL(this._delegate,e._delegate)}}class Lp extends Fp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function H8(t,e){t||Ie()}(void 0!==n),n}}class ni{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lv(e)}where(e,n,r){try{return new ni(this.firestore,Ra(this._delegate,function gQ(t,e,n){const r=e,i=iv("where",t);return Op._create(i,r,n)}(e,n,r)))}catch(i){throw ti(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ni(this.firestore,Ra(this._delegate,function mQ(t,e="asc"){const n=e,r=iv("orderBy",t);return bA._create(r,n)}(e,n)))}catch(r){throw ti(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ni(this.firestore,Ra(this._delegate,function _Q(t){return UF("limit",t),sv._create("limit",t,"F")}(e)))}catch(n){throw ti(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ni(this.firestore,Ra(this._delegate,function yQ(t){return UF("limitToLast",t),sv._create("limitToLast",t,"L")}(e)))}catch(n){throw ti(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ni(this.firestore,Ra(this._delegate,function vQ(...t){return ov._create("startAt",t,!0)}(...e)))}catch(n){throw ti(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ni(this.firestore,Ra(this._delegate,function IQ(...t){return ov._create("startAfter",t,!1)}(...e)))}catch(n){throw ti(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ni(this.firestore,Ra(this._delegate,function EQ(...t){return av._create("endBefore",t,!1)}(...e)))}catch(n){throw ti(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ni(this.firestore,Ra(this._delegate,function wQ(...t){return av._create("endAt",t,!0)}(...e)))}catch(n){throw ti(n,"endAt()","Query.endAt()")}}isEqual(e){return IA(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function PQ(t){t=ut(t,Ir);const e=ut(t.firestore,qt),n=Cn(e),r=new Ma(e);return function BK(t,e){const n=new Zn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(s,o,a){try{const u=yield $y(s,o,!0),l=new IF(o,u.ls),h=l.ca(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=ud(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield fd(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Pa(e,r,t,i))}(this._delegate):"server"===e?.source?function MQ(t){t=ut(t,Ir);const e=ut(t.firestore,qt),n=Cn(e),r=new Ma(e);return xF(n,t._query,{source:"server"}).then(i=>new Pa(e,r,t,i))}(this._delegate):function RQ(t){t=ut(t,Ir);const e=ut(t.firestore,qt),n=Cn(e),r=new Ma(e);return eL(t._query),xF(n,t._query).then(i=>new Pa(e,r,t,i))}(this._delegate),n.then(r=>new xA(this.firestore,new Pa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=vL(e),r=IL(e,i=>new xA(this.firestore,new Pa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cL(this._delegate,n,r)}withConverter(e){return new ni(this.firestore,this._delegate.withConverter(e?ju.getInstance(this.firestore,e):null))}}class rY{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Lp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ni(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new rY(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Lp(this._firestore,r))})}isEqual(e){return oL(this._delegate,e._delegate)}}class _d extends ni{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xi(this.firestore,e):null}doc(e){try{return new Xi(this.firestore,void 0===e?Jy(this._delegate):Jy(this._delegate,e))}catch(n){throw ti(n,"doc()","CollectionReference.doc()")}}add(e){return function xQ(t,e){const n=ut(t.firestore,qt),r=Jy(t),i=uv(t.converter,e);return md(n,[tv(Uu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ln.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Xi(this.firestore,n))}isEqual(e){return HF(this._delegate,e._delegate)}withConverter(e){return new _d(this.firestore,this._delegate.withConverter(e?ju.getInstance(this.firestore,e):null))}}function Hu(t){return ut(t,sn)}class OA{constructor(...e){this._delegate=new Mo(...e)}static documentId(){return new OA(nn.keyField().canonicalString())}isEqual(e){return(e=(0,kt.m9)(e))instanceof Mo&&this._delegate._internalPath.isEqual(e._internalPath)}}class zu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function GQ(){return new wA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new zu(e)}static delete(){const e=function qQ(){return new Pp("deleteField")}();return e._methodName="FieldValue.delete",new zu(e)}static arrayUnion(...e){const n=function ZQ(...t){return new lQ("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new zu(n)}static arrayRemove(...e){const n=function KQ(...t){return new dQ("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new zu(n)}static increment(e){const n=function QQ(t){return new hQ("increment",t)}(e);return n._methodName="FieldValue.increment",new zu(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const iY={Firestore:mL,GeoPoint:Xy,Timestamp:cn,Blob:Vp,Transaction:_L,WriteBatch:yL,DocumentReference:Xi,DocumentSnapshot:Fp,Query:ni,QueryDocumentSnapshot:Lp,QuerySnapshot:xA,CollectionReference:_d,FieldPath:OA,FieldValue:zu,setLogLevel:function nY(t){!function j8(t){fa.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function EL(t,e){return function aY(t,e=$_){return new Le(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function kA(t,e){return EL(t,e).pipe(de(n=>({payload:n,type:"query"})))}!function oY(t){(function sY(t,e){t.INTERNAL.registerComponent(new bO.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},iY)))})(t,(e,n)=>new mL(e,n,new tY)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(__.Z);class wL{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=AL(r,n);return new DL(i,s,this.afs)}snapshotChanges(){return function uY(t,e){return EL(t,e).pipe(E_(void 0),MT(),de(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bi)}valueChanges(e={}){return this.snapshotChanges().pipe(de(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return I(this.ref.get(e)).pipe(bi)}}function dv(t,e){return kA(t,e).pipe(E_(void 0),MT(),de(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function TL(t,e,n){return dv(t,n).pipe(T_((r,i)=>function cY(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function lY(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return VA(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return VA(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VA(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Oe(),de(r=>r.map(i=>({type:i.type,payload:i}))))}function VA(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function CL(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class DL{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=dv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(de(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(E_(void 0),MT(),gr(([r,i])=>i.length>0||!r),de(([,r])=>r),bi)}auditTrail(e){return this.stateChanges(e).pipe(T_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=CL(e);return TL(this.query,n,this.afs.schedulers.outsideAngular).pipe(bi)}valueChanges(e={}){return kA(this.query,this.afs.schedulers.outsideAngular).pipe(de(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),bi)}get(e){return I(this.query.get(e)).pipe(bi)}add(e){return this.ref.add(e)}doc(e){return new wL(this.ref.doc(e),this.afs)}}class dY{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?dv(this.query,this.afs.schedulers.outsideAngular).pipe(de(n=>n.filter(r=>e.indexOf(r.type)>-1)),gr(n=>n.length>0),bi):dv(this.query,this.afs.schedulers.outsideAngular).pipe(bi)}auditTrail(e){return this.stateChanges(e).pipe(T_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=CL(e);return TL(this.query,n,this.afs.schedulers.outsideAngular).pipe(bi)}valueChanges(e={}){return kA(this.query,this.afs.schedulers.outsideAngular).pipe(de(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),bi)}get(e){return I(this.query.get(e)).pipe(bi)}}const hY=new ue("angularfire2.enableFirestorePersistence"),fY=new ue("angularfire2.firestore.persistenceSettings"),pY=new ue("angularfire2.firestore.settings"),gY=new ue("angularfire2.firestore.use-emulator");function AL(t,e=(n=>n)){return{query:e(t),ref:t}}let mY=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,l,h,g,m,y,C,b,M,U,N){this.schedulers=u;const z=Xw(n,a,r),se=h;g&&DO(z,a,m,C,b,M,y,U),[this.firestore,this.persistenceEnabled$]=rx(`${z.name}.firestore`,"AngularFirestore",z.name,()=>{const he=a.runOutsideAngular(()=>z.firestore());if(s&&he.settings(s),se&&he.useEmulator(...se),i&&!f_(o)){const je=()=>{try{return I(he.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(Ct){return typeof console<"u"&&console.warn(Ct),A(!1)}};return[he,a.runOutsideAngular(je)]}return[he,A(!1)]},[s,se,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=AL(i,r),a=this.schedulers.ngZone.run(()=>s);return new DL(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new dY(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new wL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(oe(y_),oe(Jw,8),oe(hY,8),oe(pY,8),oe(os),oe(It),oe(j_),oe(fY,8),oe(gY,8),oe(AO,8),oe(vO,8),oe(IO,8),oe(EO,8),oe(wO,8),oe(TO,8),oe(CO,8),oe(PT,8))};static \u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),hv=(()=>{class t{constructor(n){this.db=n,this.path="/tareas",this.tareasRef=n.collection(this.path),this.tareasRef.valueChanges().subscribe(r=>{console.log(r)})}getAll(){return this.tareasRef.valueChanges()}save(n){navigator.onLine?this.saveToFirestore(n):this.saveToLocal(n)}saveToFirestore(n){this.checkIfExists(n).then(r=>{if(r)console.log("La tarea ya existe en la colecci\xf3n"),console.log("Actualizando"),this.tareasRef.doc(n.uid).update(Object.assign({},n));else{const i=this.db.createId();n.uid=i,this.tareasRef.doc(i).set(Object.assign({},n))}})}saveToLocal(n){const r=localStorage.getItem("tareasPendientes"),i=r?JSON.parse(r):[];i.push(n),localStorage.setItem("tareasPendientes",JSON.stringify(i))}checkIfExists(n){return new Promise(r=>{this.tareasRef.doc(n.uid).get().subscribe(i=>{r(i.exists)})})}subirTareasPendientes(){if(console.log("Llamando a subir tareas pendientes"),navigator.onLine){const n=localStorage.getItem("tareasPendientes");n&&(JSON.parse(n).forEach(i=>{this.saveToFirestore(i)}),localStorage.removeItem("tareasPendientes"))}}deleteTarea(n){this.tareasRef.doc(n.uid).delete()}getTarea(n){return this.db.doc(this.path+"/"+n).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||t)(oe(mY))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _Y(t,e){if(1&t&&(jt(0,"li")(1,"a",1),In(2),Ot()()),2&t){const n=e.$implicit;Gr(1),Vm("routerLink","/pages/tarea/",n.uid,""),Gr(1),Bm(n.nombre)}}let yY=(()=>{class t{constructor(n,r){this.router=n,this.tareasFirebaseService=r,this.listaTareas=this.tareasFirebaseService.getAll(),r.subirTareasPendientes()}goEditar(n){console.log("Editando",n),this.router.navigate(["pages/tarea"],{queryParams:{tarea:n}})}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Yr),ne(hv))};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-lista-tareas"]],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(r,i){1&r&&(jt(0,"ul"),NE(1,_Y,3,2,"li",0),function QP(t,e){const n=dt();let r;const i=t+nt;n.firstCreatePass?(r=function l4(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Wo(r.type)),a=wr(ne);try{const u=Nc(!1),l=s();return Nc(u),function Bj(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Y(),i,l),l}finally{wr(a)}}(2,"async"),Ot()),2&r&&(Gr(1),go("ngForOf",YP(2,1,i.listaTareas)))},dependencies:[Fw,Df,MN],styles:["ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:20px 0;font-family:Arial,sans-serif}li[_ngcontent-%COMP%]{margin-bottom:10px}a[_ngcontent-%COMP%]{text-decoration:none;color:#3498db;font-weight:700;transition:color .3s ease}a[_ngcontent-%COMP%]:hover{color:#2980b9}"]})}return t})();class FA{}let bL=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(ne(lo),ne(Ci))};static#t=this.\u0275dir=xe({type:t})}return t})(),Wu=(()=>{class t extends bL{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=Pn(t)))(i||t)}}();static#t=this.\u0275dir=xe({type:t,features:[St]})}return t})();const Ws=new ue("NgValueAccessor"),EY={provide:Ws,useExisting:k(()=>fv),multi:!0},TY=new ue("CompositionEventMode");let fv=(()=>{class t extends bL{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wY(){const t=oa()?oa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ne(lo),ne(Ci),ne(TY,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Mn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[un([EY]),St]})}return t})();const Nr=new ue("NgValidators"),Oa=new ue("NgAsyncValidators");function LL(t){return null!=t}function UL(t){return zh(t)?I(t):t}function BL(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function $L(t,e){return e.map(n=>n(t))}function jL(t){return t.map(e=>function DY(t){return!t.validate}(e)?e:n=>e.validate(n))}function LA(t){return null!=t?function HL(t){if(!t)return null;const e=t.filter(LL);return 0==e.length?null:function(n){return BL($L(n,e))}}(jL(t)):null}function UA(t){return null!=t?function zL(t){if(!t)return null;const e=t.filter(LL);return 0==e.length?null:function(n){return function vY(...t){const e=Fi(t),{args:n,keys:r}=sx(t),i=new Le(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let h=0;h<o;h++){let g=!1;et(n[h]).subscribe(ae(s,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||s.next(r?ox(r,a):a),s.complete())}))}});return e?i.pipe(eT(e)):i}($L(n,e).map(UL)).pipe(de(BL))}}(jL(t)):null}function WL(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function BA(t){return t?Array.isArray(t)?t:[t]:[]}function gv(t,e){return Array.isArray(t)?t.includes(e):t===e}function ZL(t,e){const n=BA(e);return BA(t).forEach(i=>{gv(n,i)||n.push(i)}),n}function KL(t,e){return BA(e).filter(n=>!gv(t,n))}class QL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=UA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ri extends QL{get formDirective(){return null}get path(){return null}}class ka extends QL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class YL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let JL=(()=>{class t extends YL{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ne(ka,2))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Lm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[St]})}return t})(),$A=(()=>{class t extends YL{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ne(ri,10))};static#t=this.\u0275dir=xe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Lm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[St]})}return t})();const Up="VALID",_v="INVALID",yd="PENDING",Bp="DISABLED";function zA(t){return(yv(t)?t.validators:t)||null}function WA(t,e){return(yv(e)?e.asyncValidators:t)||null}function yv(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class n2{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Up}get invalid(){return this.status===_v}get pending(){return this.status==yd}get disabled(){return this.status===Bp}get enabled(){return this.status!==Bp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ZL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(KL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(KL(e,this._rawAsyncValidators))}hasValidator(e){return gv(this._rawValidators,e)}hasAsyncValidator(e){return gv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Bp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Up,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Up||this.status===yd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bp:Up}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yd,this._hasOwnPendingAsyncValidator=!0;const n=UL(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?Bp:this.errors?_v:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yd)?yd:this._anyControlsHaveStatus(_v)?_v:Up}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function RY(t){return Array.isArray(t)?LA(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function PY(t){return Array.isArray(t)?UA(t):t||null}(this._rawAsyncValidators)}}class qA extends n2{constructor(e,n,r){super(zA(n),WA(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function t2(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new H(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function e2(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const vd=new ue("CallSetDisabledState",{providedIn:"root",factory:()=>vv}),vv="always";function $p(t,e,n=vv){GA(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function xY(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&r2(t,e)})}(t,e),function kY(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function OY(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&r2(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function NY(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function wv(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function GA(t,e){const n=function qL(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(WL(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function GL(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(WL(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();wv(e._rawValidators,i),wv(e._rawAsyncValidators,i)}function r2(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const BY={provide:ri,useExisting:k(()=>Hp)},jp=(()=>Promise.resolve())();let Hp=(()=>{class t extends ri{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new vn,this.form=new qA({},LA(n),UA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){jp.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),$p(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){jp.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){jp.then(()=>{const r=this._findContainer(n.path),i=new qA({});(function i2(t,e){GA(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){jp.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){jp.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function s2(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Nr,10),ne(Oa,10),ne(vd,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Mn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[un([BY]),St]})}return t})();function o2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function a2(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const u2=class extends n2{constructor(e=null,n,r){super(zA(n),WA(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yv(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=a2(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){o2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){o2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){a2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},HY={provide:ka,useExisting:k(()=>YA)},d2=(()=>Promise.resolve())();let YA=(()=>{class t extends ka{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new u2,this._registered=!1,this.name="",this.update=new vn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function QA(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===fv?n=s:function LY(t){return Object.getPrototypeOf(t.constructor)===Wu}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function KA(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$p(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){d2.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&ml(r);d2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Iv(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(ne(ri,9),ne(Nr,10),ne(Oa,10),ne(Ws,10),ne(Jm,8),ne(vd,8))};static#t=this.\u0275dir=xe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[un([HY]),St,si]})}return t})(),JA=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=xe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),f2=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({})}return t})(),fJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({imports:[f2]})}return t})(),gJ=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:vd,useValue:n.callSetDisabledState??vv}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({imports:[fJ]})}return t})();const mJ=[{path:"pages/tarea",component:(()=>{class t{constructor(n,r){this.router=n,this.tareasFireBaseService=r,this.tarea=new FA,this.listaTareas=this.tareasFireBaseService.getAll();let i=this.router.getCurrentNavigation()?.extras.queryParams;i&&(console.log(i),this.tarea=i.tarea)}saveTarea(){this.tareasFireBaseService.save(this.tarea),this.tarea=new FA,this.router.navigate(["pages/lista-tareas"])}goListado(){console.log("Llamando lista de tareas"),this.router.navigate(["pages/lista-tareas"])}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Yr),ne(hv))};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-tarea"]],decls:22,vars:4,consts:[["for","txtNombre"],["id","txtNombre","name","txtCedula",3,"ngModel","ngModelChange"],["for","txtNota"],["id","txtNota","name","txtNota",3,"ngModel","ngModelChange"],["for","txtFecha"],["id","txtFecha","name","txtFecha",3,"ngModel","ngModelChange"],["for","txtEtiqueta"],["id","txtEtiqueta","name","txtEtiqueta",3,"ngModel","ngModelChange"],[3,"click"]],template:function(r,i){1&r&&(jt(0,"form")(1,"label",0),In(2,"Nombre de la tarea: "),Ot(),jt(3,"input",1),Mn("ngModelChange",function(o){return i.tarea.nombre=o}),Ot(),Ar(4,"br"),jt(5,"label",2),In(6,"Nota: "),Ot(),jt(7,"input",3),Mn("ngModelChange",function(o){return i.tarea.nota=o}),Ot(),Ar(8,"br"),jt(9,"label",4),In(10,"Fecha: "),Ot(),jt(11,"input",5),Mn("ngModelChange",function(o){return i.tarea.fecha=o}),Ot(),Ar(12,"br"),jt(13,"label",6),In(14,"Etiqueta: "),Ot(),jt(15,"input",7),Mn("ngModelChange",function(o){return i.tarea.etiqueta=o}),Ot(),Ar(16,"br"),Ot(),jt(17,"button",8),Mn("click",function(){return i.saveTarea()}),In(18,"Guardar Tarea"),Ot(),Ar(19,"br"),jt(20,"button",8),Mn("click",function(){return i.goListado()}),In(21,"Lista de tareas"),Ot()),2&r&&(Gr(3),go("ngModel",i.tarea.nombre),Gr(4),go("ngModel",i.tarea.nota),Gr(4),go("ngModel",i.tarea.fecha),Gr(4),go("ngModel",i.tarea.etiqueta))},dependencies:[JA,fv,JL,$A,YA,Hp],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{width:300px;margin:20px auto;font-family:Arial,sans-serif}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%]{width:100%;padding:8px;margin-bottom:10px;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border:none;border-radius:4px;cursor:pointer;margin:0 auto;display:block}button[_ngcontent-%COMP%]:hover{background-color:#45a049}']})}return t})()},{path:"pages/lista-tareas",component:yY},{path:"pages/tarea/:uid",component:(()=>{class t{constructor(n,r,i){this.router=n,this.route=r,this.tareasFirebaseService=i,this.tarea=new FA,this.listaTareas=this.tareasFirebaseService.getAll(),this.route.params.subscribe(s=>{console.log(s),s.uid&&this.loadTarea(s.uid)})}goListado(){console.log("Llamando lista de tareas"),this.router.navigate(["pages/lista-tareas"])}goEditar(n){console.log("Editando",n),this.router.navigate(["pages/tarea"],{queryParams:{tarea:n}})}loadTarea(n){this.tareasFirebaseService.getTarea(n).subscribe(r=>{console.log(r),this.tarea=r})}eliminarTarea(){this.tareasFirebaseService.deleteTarea(this.tarea),this.router.navigate(["pages/lista-tareas"])}static#e=this.\u0275fac=function(r){return new(r||t)(ne(Yr),ne(yu),ne(hv))};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-view-tarea"]],decls:32,vars:4,consts:[["for","txtNombre"],["for","txtNota"],["for","txtFecha"],["for","txtEtiqueta"],[3,"click"]],template:function(r,i){1&r&&(jt(0,"form")(1,"label",0),In(2,"Nombre de la tarea: "),Ot(),In(3),Ar(4,"br")(5,"br"),jt(6,"label",1),In(7,"Nota: "),Ot(),In(8),Ar(9,"br")(10,"br"),jt(11,"label",2),In(12,"Fecha: "),Ot(),In(13),Ar(14,"br")(15,"br"),jt(16,"label",3),In(17,"Etiqueta: "),Ot(),In(18),Ar(19,"br")(20,"br"),Ot(),Ar(21,"br"),jt(22,"button",4),Mn("click",function(){return i.goEditar(i.tarea)}),In(23,"Editar"),Ot(),Ar(24,"br")(25,"br"),jt(26,"button",4),Mn("click",function(){return i.eliminarTarea()}),In(27,"Eliminar Tarea"),Ot(),Ar(28,"br")(29,"br"),jt(30,"button",4),Mn("click",function(){return i.goListado()}),In(31,"Lista de tareas"),Ot()),2&r&&(Gr(3),cu(" ",i.tarea.nombre," "),Gr(5),cu(" ",i.tarea.nota," "),Gr(5),cu(" ",i.tarea.fecha," "),Gr(5),cu(" ",i.tarea.etiqueta," "))},dependencies:[JA,$A,Hp],styles:["form[_ngcontent-%COMP%]{font-family:Arial,sans-serif}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}span[_ngcontent-%COMP%]{display:block;margin-bottom:10px}button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#2980b9}"]})}return t})()}];let _J=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({imports:[lO.forRoot(mJ),lO]})}return t})();function yJ(t,e){if(1&t&&(jt(0,"li")(1,"a",1),In(2),Ot()()),2&t){const n=e.$implicit;Gr(1),go("routerLink",n.path),Gr(1),Bm(n.title)}}let vJ=(()=>{class t{constructor(){this.pages=[{title:"Tarea",path:"pages/tarea"},{title:"Lista de Tareas",path:"pages/lista-tareas"}]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-menu"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["href","#",3,"routerLink"]],template:function(r,i){1&r&&(jt(0,"ul"),NE(1,yJ,3,2,"li",0),Ot()),2&r&&(Gr(1),go("ngForOf",i.pages))},dependencies:[Fw,Df]})}return t})(),IJ=(()=>{class t{constructor(n){this.tareasFirebaseService=n}ngOnInit(){window.addEventListener("online",()=>{this.tareasFirebaseService.subirTareasPendientes()})}static#e=this.\u0275fac=function(r){return new(r||t)(ne(hv))};static#t=this.\u0275cmp=Js({type:t,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-container"]],template:function(r,i){1&r&&(jt(0,"div",0)(1,"h1"),In(2,"Tarea pendientes WEB"),Ot(),Ar(3,"app-menu")(4,"router-outlet")(5,"br"),jt(6,"footer"),In(7,"By: Samuel Pardo"),Ot()())},dependencies:[yT,vJ],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f5f5f5;color:#333}h1[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:20px;margin:0;font-family:Arial,sans-serif;text-align:center}h2[_ngcontent-%COMP%]{color:#555;margin-top:0;padding:10px;font-family:Arial,sans-serif}app-menu[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#b2b195;color:#fff;padding:10px;display:block}router-outlet[_ngcontent-%COMP%]{padding:20px}footer[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#333;color:#fff;padding:20px;text-align:center;margin-top:auto}"]})}return t})();class zp{constructor(e){return e}}class M2{constructor(){return(0,Jr.getApps)()}}const o0=new ue("angularfire2._apps"),wJ={provide:zp,useFactory:function EJ(t){return t&&1===t.length?t[0]:new zp((0,Jr.getApp)())},deps:[[new Ti,o0]]},TJ={provide:M2,deps:[[new Ti,o0]]};function CJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new zp(r)}}let DJ=(()=>{class t{constructor(n){(0,Jr.registerVersion)("angularfire",ST.full,"core"),(0,Jr.registerVersion)("angularfire",ST.full,"app"),(0,Jr.registerVersion)("angular",Jb.full,n.toString())}static \u0275fac=function(r){return new(r||t)(oe(os))};static \u0275mod=$n({type:t});static \u0275inj=lr({providers:[wJ,TJ]})}return t})();function AJ(t,...e){return{ngModule:DJ,providers:[{provide:o0,useFactory:CJ(t),multi:!0,deps:[It,Cr,j_,...e]}]}}const bJ=mO(Jr.initializeApp,!0);Me(932);class x2{constructor(){return RT("auth")}}class c0{constructor(e){return e}}const O2="firestore",l0=new ue("angularfire2.firestore-instances");function xJ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new c0(r)}}const OJ={provide:class MJ{constructor(){return RT(O2)}},deps:[[new Ti,l0]]},kJ={provide:c0,useFactory:function NJ(t,e){const n=function pO(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}(O2,t,e);return n&&new c0(n)},deps:[[new Ti,l0],zp]};let VJ=(()=>{class t{constructor(){(0,Jr.registerVersion)("angularfire",ST.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=$n({type:t});static \u0275inj=lr({providers:[kJ,OJ]})}return t})();function FJ(t,...e){return{ngModule:VJ,providers:[{provide:l0,useFactory:xJ(t),multi:!0,deps:[It,Cr,j_,M2,[new Ti,x2],[new Ti,PT],...e]}]}}const LJ=mO(YK,!0),k2={firebaseConfig:{apiKey:"AIzaSyDt3l2yyrcloJXuSgbTAUB-jK99sfcO_c8",authDomain:"tareaspwa.firebaseapp.com",projectId:"tareaspwa",storageBucket:"tareaspwa.appspot.com",messagingSenderId:"553387019761",appId:"1:553387019761:web:f9ccf8d2e429defd624850",measurementId:"G-EBR5TF6HG3"}},UJ=["addListener","removeListener"],BJ=["addEventListener","removeEventListener"],$J=["on","off"];function Cv(t,e,n,r){if(T(n)&&(r=n,n=void 0),r)return Cv(t,e,n).pipe(eT(r));const[i,s]=function zJ(t){return T(t.addEventListener)&&T(t.removeEventListener)}(t)?BJ.map(o=>a=>t[o](e,a,n)):function jJ(t){return T(t.addListener)&&T(t.removeListener)}(t)?UJ.map(V2(t,e)):function HJ(t){return T(t.on)&&T(t.off)}(t)?$J.map(V2(t,e)):[];if(!i&&at(t))return yt(o=>Cv(o,e,n))(et(t));if(!i)throw new TypeError("Invalid event target");return new Le(o=>{const a=(...u)=>o.next(1<u.length?u:u[0]);return i(a),()=>s(a)})}function V2(t,e){return n=>r=>t[n](e,r)}const Va=new Le(Te),qJ={connector:()=>new j};function F2(t,e=qJ){const{connector:n}=e;return K((r,i)=>{const s=n();et(t(function WJ(t){return new Le(e=>t.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function L2(t,e){return e?n=>uf(e.pipe(li(1),function KJ(){return K((t,e)=>{t.subscribe(ae(e,Te))})}()),n.pipe(L2(t))):yt((n,r)=>et(t(n,r)).pipe(li(1),cx(n)))}const Wp="Service workers are disabled or not supported by this browser";class Dv{constructor(e){if(this.serviceWorker=e,e){const r=Cv(e,"controllerchange").pipe(de(()=>e.controller)),s=uf(I_(()=>A(e.controller)),r);this.worker=s.pipe(gr(h=>!!h)),this.registration=this.worker.pipe(me(()=>e.getRegistration()));const l=Cv(e,"message").pipe(de(h=>h.data)).pipe(gr(h=>h&&h.type)).pipe(function ZJ(t){return t?e=>F2(t)(e):e=>function GJ(t,e){const n=T(t)?t:()=>t;return T(e)?F2(e,{connector:n}):r=>new rT(r,n)}(new j)(e)}());l.connect(),this.events=l}else this.worker=this.events=this.registration=function XJ(t){return I_(()=>yl(new Error(t)))}(Wp)}postMessage(e,n){return this.worker.pipe(li(1),ir(r=>{r.postMessage({action:e,...n})})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,n);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let n;return n="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(gr(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(li(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(gr(n=>n.nonce===e),li(1),de(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let U2=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new j,!n.isEnabled)return this.messages=Va,this.notificationClicks=Va,void(this.subscription=Va);this.messages=this.sw.eventsOfType("PUSH").pipe(de(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(de(i=>i.data)),this.pushManager=this.sw.registration.pipe(de(i=>i.pushManager));const r=this.pushManager.pipe(me(i=>i.getSubscription()));this.subscription=w(r,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Wp));const r={userVisibleOnly:!0};let i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(me(o=>o.subscribe(r)),li(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(li(1),me(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Wp))}decodeBase64(n){return atob(n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Dv))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})(),B2=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=Va,this.available=Va,this.activated=Va,void(this.unrecoverable=Va);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(gr(r=>"VERSION_READY"===r.type),de(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Wp));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Wp));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static#e=this.\u0275fac=function(r){return new(r||t)(oe(Dv))};static#t=this.\u0275prov=Re({token:t,factory:t.\u0275fac})}return t})();const $2=new ue("NGSW_REGISTER_SCRIPT");function eX(t,e,n,r){return()=>{if(!ON(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)i=n.registrationStrategy();else{const[o,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=A(null);break;case"registerWithDelay":i=j2(+a[0]||0);break;case"registerWhenStable":i=a[0]?w(H2(t),j2(+a[0])):H2(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(It).runOutsideAngular(()=>i.pipe(li(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function j2(t){return A(null).pipe(function JJ(t,e=$_){const n=function YJ(t=0,e,n=S5){let r=-1;return null!=e&&(an(e)?n=e:r=e),new Le(i=>{let s=function QJ(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(t,e);return L2(()=>n)}(t))}function H2(t){return t.get(hu).isStable.pipe(gr(n=>n))}function tX(t,e){return new Dv(ON(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}class d0{}function nX(t,e={}){return function zI(t){return{\u0275providers:t}}([U2,B2,{provide:$2,useValue:t},{provide:d0,useValue:e},{provide:Dv,useFactory:tX,deps:[d0,os]},{provide:Zm,useFactory:eX,deps:[Cr,$2,d0,os],multi:!0}])}let rX=(()=>{class t{static register(n,r={}){return{ngModule:t,providers:[nX(n,r)]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=$n({type:t});static#n=this.\u0275inj=lr({providers:[U2,B2]})}return t})(),iX=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=$n({type:t,bootstrap:[IJ]});static#n=this.\u0275inj=lr({providers:[{provide:y_,useValue:k2.firebaseConfig}],imports:[N3,_J,gJ,AJ(()=>bJ(k2.firebaseConfig)),FJ(()=>LJ()),rX.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]})}return t})();P3().bootstrapModule(iX).catch(t=>console.error(t))},106:(Mi,Dn,Me)=>{Me.d(Dn,{Z:()=>An});var T=Me(58),q=Me(537),x=Me(534),Ce=Me(879);class ft{constructor(Ve,Fe){this._delegate=Ve,this.firebase=Fe,(0,x._addComponent)(Ve,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(Ve,Fe=x._DEFAULT_ENTRY_NAME){var kn;this._delegate.checkDestroyed();const Zt=this._delegate.container.getProvider(Ve);return!Zt.isInitialized()&&"EXPLICIT"===(null===(kn=Zt.getComponent())||void 0===kn?void 0:kn.instantiationMode)&&Zt.initialize(),Zt.getImmediate({identifier:Fe})}_removeServiceInstance(Ve,Fe=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(Fe)}_addComponent(Ve){(0,x._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,x._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const dn=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ct(){const rt=function Nt(rt){const Ve={},Fe={__esModule:!0,initializeApp:function Xe(qe,te={}){const ot=x.initializeApp(qe,te);if((0,T.r3)(Ve,ot.name))return Ve[ot.name];const Ft=new rt(ot,Fe);return Ve[ot.name]=Ft,Ft},app:Zt,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function xr(qe){const te=qe.name,ot=te.replace("-compat","");if(x._registerComponent(qe)&&"PUBLIC"===qe.type){const Ft=(on=Zt())=>{if("function"!=typeof on[ot])throw dn.create("invalid-app-argument",{appName:te});return on[ot]()};void 0!==qe.serviceProps&&(0,T.ZB)(Ft,qe.serviceProps),Fe[ot]=Ft,rt.prototype[ot]=function(...on){return this._getService.bind(this,te).apply(this,qe.multipleInstances?on:[])}}return"PUBLIC"===qe.type?Fe[ot]:null},removeApp:function kn(qe){delete Ve[qe]},useAsService:function mn(qe,te){return"serverAuth"===te?null:te},modularAPIs:x}};function Zt(qe){if(!(0,T.r3)(Ve,qe=qe||x._DEFAULT_ENTRY_NAME))throw dn.create("no-app",{appName:qe});return Ve[qe]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Et(){return Object.keys(Ve).map(qe=>Ve[qe])}}),Zt.App=rt,Fe}(ft);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:ct,extendNamespace:function Ve(Fe){(0,T.ZB)(rt,Fe)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),rt}(),ie=new Ce.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const An=Z;!function pt(rt){(0,x.registerVersion)("@firebase/app-compat","0.2.24",rt)}()},534:(Mi,Dn,Me)=>{Me.r(Dn),Me.d(Dn,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>Vi,_DEFAULT_ENTRY_NAME:()=>_i,_addComponent:()=>Vr,_addOrOverwriteComponent:()=>Fr,_apps:()=>Yn,_clearComponents:()=>fn,_components:()=>kr,_getProvider:()=>yt,_registerComponent:()=>Bn,_removeServiceInstance:()=>Lr,deleteApp:()=>_n,getApp:()=>vi,getApps:()=>Rn,initializeApp:()=>Fi,onLog:()=>xo,registerVersion:()=>Ur,setLogLevel:()=>ms});var T=Me(861),q=Me(537),x=Me(879),Ce=Me(58);const ft=(k,R)=>R.some(ee=>k instanceof ee);let Gt,dn;const Z=new WeakMap,ie=new WeakMap,Te=new WeakMap,He=new WeakMap,pt=new WeakMap;let Ve={get(k,R,ee){if(k instanceof IDBTransaction){if("done"===R)return ie.get(k);if("objectStoreNames"===R)return k.objectStoreNames||Te.get(k);if("store"===R)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Xe(k[R])},set:(k,R,ee)=>(k[R]=ee,!0),has:(k,R)=>k instanceof IDBTransaction&&("done"===R||"store"===R)||R in k};function Zt(k){return"function"==typeof k?function kn(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ct(){return dn||(dn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...R){return k.apply(Et(this),R),Xe(Z.get(this))}:function(...R){return Xe(k.apply(Et(this),R))}:function(R,...ee){const _e=k.call(Et(this),R,...ee);return Te.set(_e,R.sort?R.sort():[R]),Xe(_e)}}(k):(k instanceof IDBTransaction&&function rt(k){if(ie.has(k))return;const R=new Promise((ee,_e)=>{const Ke=()=>{k.removeEventListener("complete",tt),k.removeEventListener("error",H),k.removeEventListener("abort",H)},tt=()=>{ee(),Ke()},H=()=>{_e(k.error||new DOMException("AbortError","AbortError")),Ke()};k.addEventListener("complete",tt),k.addEventListener("error",H),k.addEventListener("abort",H)});ie.set(k,R)}(k),ft(k,function Nt(){return Gt||(Gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,Ve):k)}function Xe(k){if(k instanceof IDBRequest)return function An(k){const R=new Promise((ee,_e)=>{const Ke=()=>{k.removeEventListener("success",tt),k.removeEventListener("error",H)},tt=()=>{ee(Xe(k.result)),Ke()},H=()=>{_e(k.error),Ke()};k.addEventListener("success",tt),k.addEventListener("error",H)});return R.then(ee=>{ee instanceof IDBCursor&&Z.set(ee,k)}).catch(()=>{}),pt.set(R,k),R}(k);if(He.has(k))return He.get(k);const R=Zt(k);return R!==k&&(He.set(k,R),pt.set(R,k)),R}const Et=k=>pt.get(k),qe=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ot=new Map;function Ft(k,R){if(!(k instanceof IDBDatabase)||R in k||"string"!=typeof R)return;if(ot.get(R))return ot.get(R);const ee=R.replace(/FromIndex$/,""),_e=R!==ee,Ke=te.includes(ee);if(!(ee in(_e?IDBIndex:IDBObjectStore).prototype)||!Ke&&!qe.includes(ee))return;const tt=function(){var H=(0,T.Z)(function*(Yt,...Ee){const Qe=this.transaction(Yt,Ke?"readwrite":"readonly");let La=Qe.store;return _e&&(La=La.index(Ee.shift())),(yield Promise.all([La[ee](...Ee),Ke&&Qe.done]))[0]});return function(Ee){return H.apply(this,arguments)}}();return ot.set(R,tt),tt}!function Fe(k){Ve=k(Ve)}(k=>({...k,get:(R,ee,_e)=>Ft(R,ee)||k.get(R,ee,_e),has:(R,ee)=>!!Ft(R,ee)||k.has(R,ee)}));class on{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function hn(k){const R=k.getComponent();return"VERSION"===R?.type}(ee)){const _e=ee.getImmediate();return`${_e.library}/${_e.version}`}return null}).filter(ee=>ee).join(" ")}}const pi="@firebase/app",Le=new x.Yd("@firebase/app"),_i="[DEFAULT]",yi={[pi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yn=new Map,kr=new Map;function Vr(k,R){try{k.container.addComponent(R)}catch(ee){Le.debug(`Component ${R.name} failed to register with FirebaseApp ${k.name}`,ee)}}function Fr(k,R){k.container.addOrOverwriteComponent(R)}function Bn(k){const R=k.name;if(kr.has(R))return Le.debug(`There were multiple attempts to register component ${R}.`),!1;kr.set(R,k);for(const ee of Yn.values())Vr(ee,k);return!0}function yt(k,R){const ee=k.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),k.container.getProvider(R)}function Lr(k,R,ee=_i){yt(k,R).clearInstance(ee)}function fn(){kr.clear()}const Qt=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class an{constructor(R,ee,_e){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=_e,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const Vi="10.7.0";function Fi(k,R={}){let ee=k;"object"!=typeof R&&(R={name:R});const _e=Object.assign({name:_i,automaticDataCollectionEnabled:!1},R),Ke=_e.name;if("string"!=typeof Ke||!Ke)throw Qt.create("bad-app-name",{appName:String(Ke)});if(ee||(ee=(0,Ce.aH)()),!ee)throw Qt.create("no-options");const tt=Yn.get(Ke);if(tt){if((0,Ce.vZ)(ee,tt.options)&&(0,Ce.vZ)(_e,tt.config))return tt;throw Qt.create("duplicate-app",{appName:Ke})}const H=new q.H0(Ke);for(const Ee of kr.values())H.addComponent(Ee);const Yt=new an(ee,_e,H);return Yn.set(Ke,Yt),Yt}function vi(k=_i){const R=Yn.get(k);if(!R&&k===_i&&(0,Ce.aH)())return Fi();if(!R)throw Qt.create("no-app",{appName:k});return R}function Rn(){return Array.from(Yn.values())}function _n(k){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,T.Z)(function*(k){const R=k.name;Yn.has(R)&&(Yn.delete(R),yield Promise.all(k.container.getProviders().map(ee=>ee.delete())),k.isDeleted=!0)})).apply(this,arguments)}function Ur(k,R,ee){var _e;let Ke=null!==(_e=yi[k])&&void 0!==_e?_e:k;ee&&(Ke+=`-${ee}`);const tt=Ke.match(/\s|\//),H=R.match(/\s|\//);if(tt||H){const Yt=[`Unable to register library "${Ke}" with version "${R}":`];return tt&&Yt.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),tt&&H&&Yt.push("and"),H&&Yt.push(`version name "${R}" contains illegal characters (whitespace or "/")`),void Le.warn(Yt.join(" "))}Bn(new q.wA(`${Ke}-version`,()=>({library:Ke,version:R}),"VERSION"))}function xo(k,R){if(null!==k&&"function"!=typeof k)throw Qt.create("invalid-log-argument");(0,x.Am)(k,R)}function ms(k){(0,x.Ub)(k)}const qs="firebase-heartbeat-database",Li=1,S="firebase-heartbeat-store";let D=null;function I(){return D||(D=function xr(k,R,{blocked:ee,upgrade:_e,blocking:Ke,terminated:tt}={}){const H=indexedDB.open(k,R),Yt=Xe(H);return _e&&H.addEventListener("upgradeneeded",Ee=>{_e(Xe(H.result),Ee.oldVersion,Ee.newVersion,Xe(H.transaction),Ee)}),ee&&H.addEventListener("blocked",Ee=>ee(Ee.oldVersion,Ee.newVersion,Ee)),Yt.then(Ee=>{tt&&Ee.addEventListener("close",()=>tt()),Ke&&Ee.addEventListener("versionchange",Qe=>Ke(Qe.oldVersion,Qe.newVersion,Qe))}).catch(()=>{}),Yt}(qs,Li,{upgrade:(k,R)=>{0===R&&k.createObjectStore(S)}}).catch(k=>{throw Qt.create("idb-open",{originalErrorMessage:k.message})})),D}function v(){return(v=(0,T.Z)(function*(k){try{return yield(yield I()).transaction(S).objectStore(S).get(ve(k))}catch(R){if(R instanceof Ce.ZR)Le.warn(R.message);else{const ee=Qt.create("idb-get",{originalErrorMessage:R?.message});Le.warn(ee.message)}}})).apply(this,arguments)}function A(k,R){return W.apply(this,arguments)}function W(){return(W=(0,T.Z)(function*(k,R){try{const _e=(yield I()).transaction(S,"readwrite");yield _e.objectStore(S).put(R,ve(k)),yield _e.done}catch(ee){if(ee instanceof Ce.ZR)Le.warn(ee.message);else{const _e=Qt.create("idb-set",{originalErrorMessage:ee?.message});Le.warn(_e.message)}}})).apply(this,arguments)}function ve(k){return`${k.name}!${k.options.appId}`}class lt{constructor(R){this.container=R,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new De(ee),this._heartbeatsCachePromise=this._storage.read().then(_e=>(this._heartbeatsCache=_e,_e))}triggerHeartbeat(){var R=this;return(0,T.Z)(function*(){var ee,_e;const tt=R.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),H=fe();if((null!=(null===(ee=R._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||(R._heartbeatsCache=yield R._heartbeatsCachePromise,null!=(null===(_e=R._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)))&&R._heartbeatsCache.lastSentHeartbeatDate!==H&&!R._heartbeatsCache.heartbeats.some(Yt=>Yt.date===H))return R._heartbeatsCache.heartbeats.push({date:H,agent:tt}),R._heartbeatsCache.heartbeats=R._heartbeatsCache.heartbeats.filter(Yt=>{const Ee=new Date(Yt.date).valueOf();return Date.now()-Ee<=2592e6}),R._storage.overwrite(R._heartbeatsCache)})()}getHeartbeatsHeader(){var R=this;return(0,T.Z)(function*(){var ee;if(null===R._heartbeatsCache&&(yield R._heartbeatsCachePromise),null==(null===(ee=R._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===R._heartbeatsCache.heartbeats.length)return"";const _e=fe(),{heartbeatsToSend:Ke,unsentEntries:tt}=function Dt(k,R=1024){const ee=[];let _e=k.slice();for(const Ke of k){const tt=ee.find(H=>H.agent===Ke.agent);if(tt){if(tt.dates.push(Ke.date),Vn(ee)>R){tt.dates.pop();break}}else if(ee.push({agent:Ke.agent,dates:[Ke.date]}),Vn(ee)>R){ee.pop();break}_e=_e.slice(1)}return{heartbeatsToSend:ee,unsentEntries:_e}}(R._heartbeatsCache.heartbeats),H=(0,Ce.L)(JSON.stringify({version:2,heartbeats:Ke}));return R._heartbeatsCache.lastSentHeartbeatDate=_e,tt.length>0?(R._heartbeatsCache.heartbeats=tt,yield R._storage.overwrite(R._heartbeatsCache)):(R._heartbeatsCache.heartbeats=[],R._storage.overwrite(R._heartbeatsCache)),H})()}}function fe(){return(new Date).toISOString().substring(0,10)}class De{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var R=this;return(0,T.Z)(function*(){if(yield R._canUseIndexedDBPromise){const _e=yield function w(k){return v.apply(this,arguments)}(R.app);return _e?.heartbeats?_e:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(R){var ee=this;return(0,T.Z)(function*(){var _e;if(yield ee._canUseIndexedDBPromise){const tt=yield ee.read();return A(ee.app,{lastSentHeartbeatDate:null!==(_e=R.lastSentHeartbeatDate)&&void 0!==_e?_e:tt.lastSentHeartbeatDate,heartbeats:R.heartbeats})}})()}add(R){var ee=this;return(0,T.Z)(function*(){var _e;if(yield ee._canUseIndexedDBPromise){const tt=yield ee.read();return A(ee.app,{lastSentHeartbeatDate:null!==(_e=R.lastSentHeartbeatDate)&&void 0!==_e?_e:tt.lastSentHeartbeatDate,heartbeats:[...tt.heartbeats,...R.heartbeats]})}})()}}function Vn(k){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:k})).length}!function Gs(k){Bn(new q.wA("platform-logger",R=>new on(R),"PRIVATE")),Bn(new q.wA("heartbeat",R=>new lt(R),"PRIVATE")),Ur(pi,"0.9.24",k),Ur(pi,"0.9.24","esm2017"),Ur("fire-js","")}("")},537:(Mi,Dn,Me)=>{Me.d(Dn,{H0:()=>Nt,wA:()=>x});var T=Me(861),q=Me(58);class x{constructor(Z,ie,Te){this.name=Z,this.instanceFactory=ie,this.type=Te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const Ce="[DEFAULT]";class ft{constructor(Z,ie){this.name=Z,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const ie=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(ie)){const Te=new q.BH;if(this.instancesDeferred.set(ie,Te),this.isInitialized(ie)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:ie});He&&Te.resolve(He)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(Z){var ie;const Te=this.normalizeInstanceIdentifier(Z?.identifier),He=null!==(ie=Z?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(Te)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Te})}catch(pt){if(He)return null;throw pt}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function dn(ct){return"EAGER"===ct.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[ie,Te]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(ie);try{const pt=this.getOrInitializeService({instanceIdentifier:He});Te.resolve(pt)}catch{}}}}clearInstance(Z=Ce){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,T.Z)(function*(){const ie=Array.from(Z.instances.values());yield Promise.all([...ie.filter(Te=>"INTERNAL"in Te).map(Te=>Te.INTERNAL.delete()),...ie.filter(Te=>"_delete"in Te).map(Te=>Te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=Ce){return this.instances.has(Z)}getOptions(Z=Ce){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:ie={}}=Z,Te=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(Te))throw Error(`${this.name}(${Te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Te,options:ie});for(const[pt,An]of this.instancesDeferred.entries())Te===this.normalizeInstanceIdentifier(pt)&&An.resolve(He);return He}onInit(Z,ie){var Te;const He=this.normalizeInstanceIdentifier(ie),pt=null!==(Te=this.onInitCallbacks.get(He))&&void 0!==Te?Te:new Set;pt.add(Z),this.onInitCallbacks.set(He,pt);const An=this.instances.get(He);return An&&Z(An,He),()=>{pt.delete(Z)}}invokeOnInitCallbacks(Z,ie){const Te=this.onInitCallbacks.get(ie);if(Te)for(const He of Te)try{He(Z,ie)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:ie={}}){let Te=this.instances.get(Z);if(!Te&&this.component&&(Te=this.component.instanceFactory(this.container,{instanceIdentifier:(ct=Z,ct===Ce?void 0:ct),options:ie}),this.instances.set(Z,Te),this.instancesOptions.set(Z,ie),this.invokeOnInitCallbacks(Te,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,Te)}catch{}var ct;return Te||null}normalizeInstanceIdentifier(Z=Ce){return this.component?this.component.multipleInstances?Z:Ce:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Nt{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const ie=this.getProvider(Z.name);if(ie.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);ie.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const ie=new ft(Z,this);return this.providers.set(Z,ie),ie}getProviders(){return Array.from(this.providers.values())}}},879:(Mi,Dn,Me)=>{Me.d(Dn,{Am:()=>ct,Ub:()=>Nt,Yd:()=>dn,in:()=>q});const T=[];var q=function(Z){return Z[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",Z}(q||{});const x={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Ce=q.INFO,ft={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Gt=(Z,ie,...Te)=>{if(ie<Z.logLevel)return;const He=(new Date).toISOString(),pt=ft[ie];if(!pt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[pt](`[${He}]  ${Z.name}:`,...Te)};class dn{constructor(ie){this.name=ie,this._logLevel=Ce,this._logHandler=Gt,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in q))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?x[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...ie),this._logHandler(this,q.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...ie),this._logHandler(this,q.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,q.INFO,...ie),this._logHandler(this,q.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,q.WARN,...ie),this._logHandler(this,q.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...ie),this._logHandler(this,q.ERROR,...ie)}}function Nt(Z){T.forEach(ie=>{ie.setLogLevel(Z)})}function ct(Z,ie){for(const Te of T){let He=null;ie&&ie.level&&(He=x[ie.level]),Te.userLogHandler=null===Z?null:(pt,An,...rt)=>{const Ve=rt.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");An>=(He??pt.logLevel)&&Z({level:q[An].toLowerCase(),message:Ve,args:rt,type:pt.name})}}}},365:(Mi,Dn,Me)=>{Me.r(Dn);var T=Me(861),q=Me(106),x=Me(932),Ce=Me(58),dn=(Me(534),Me(879),Me(537));function Nt(){return window}function ie(){return ie=(0,T.Z)(function*(I,w,v){var A;const{BuildInfo:W}=Nt();(0,x.au)(w.sessionId,"AuthEvent did not contain a session ID");const ve=yield function Fe(I){return kn.apply(this,arguments)}(w.sessionId),me={};return(0,x.av)()?me.ibi=W.packageName:(0,x.aw)()?me.apn=W.packageName:(0,x.ax)(I,"operation-not-supported-in-this-environment"),W.displayName&&(me.appDisplayName=W.displayName),me.sessionId=ve,(0,x.ay)(I,v,w.type,void 0,null!==(A=w.eventId)&&void 0!==A?A:void 0,me)}),ie.apply(this,arguments)}function He(){return(He=(0,T.Z)(function*(I){const{BuildInfo:w}=Nt(),v={};(0,x.av)()?v.iosBundleId=w.packageName:(0,x.aw)()?v.androidPackageName=w.packageName:(0,x.ax)(I,"operation-not-supported-in-this-environment"),yield(0,x.az)(I,v)})).apply(this,arguments)}function rt(){return(rt=(0,T.Z)(function*(I,w,v){const{cordova:A}=Nt();let W=()=>{};try{yield new Promise((ve,me)=>{let Oe=null;function lt(){var De;ve();const Vn=null===(De=A.plugins.browsertab)||void 0===De?void 0:De.close;"function"==typeof Vn&&Vn(),"function"==typeof v?.close&&v.close()}function fe(){Oe||(Oe=window.setTimeout(()=>{me((0,x.aB)(I,"redirect-cancelled-by-user"))},2e3))}function Dt(){"visible"===document?.visibilityState&&fe()}w.addPassiveListener(lt),document.addEventListener("resume",fe,!1),(0,x.aw)()&&document.addEventListener("visibilitychange",Dt,!1),W=()=>{w.removePassiveListener(lt),document.removeEventListener("resume",fe,!1),document.removeEventListener("visibilitychange",Dt,!1),Oe&&window.clearTimeout(Oe)}})}finally{W()}})).apply(this,arguments)}function kn(){return(kn=(0,T.Z)(function*(I){const w=function Zt(I){if((0,x.au)(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const w=new ArrayBuffer(I.length),v=new Uint8Array(w);for(let A=0;A<I.length;A++)v[A]=I.charCodeAt(A);return v}(I),v=yield crypto.subtle.digest("SHA-256",w);return Array.from(new Uint8Array(v)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Et extends x.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(w=>{this.resolveInialized=w})}addPassiveListener(w){this.passiveListeners.add(w)}removePassiveListener(w){this.passiveListeners.delete(w)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(w){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(w)),super.onEvent(w)}initialized(){var w=this;return(0,T.Z)(function*(){yield w.initPromise})()}}function qe(I){return te.apply(this,arguments)}function te(){return(te=(0,T.Z)(function*(I){const w=yield on()._get(hn(I));return w&&(yield on()._remove(hn(I))),w})).apply(this,arguments)}function Ft(){const I=[];for(let v=0;v<20;v++){const A=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(A))}return I.join("")}function on(){return(0,x.aE)(x.b)}function hn(I){return(0,x.aF)("authEvent",I.config.apiKey,I.name)}function Le(I){if(!I?.includes("?"))return{};const[w,...v]=I.split("?");return(0,Ce.zd)(v.join("?"))}const L=class Ni{constructor(){this._redirectPersistence=x.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(w){var v=this;return(0,T.Z)(function*(){const A=w._key();let W=v.eventManagers.get(A);return W||(W=new Et(w),v.eventManagers.set(A,W),v.attachCallbackListeners(w,W)),W})()}_openPopup(w){(0,x.ax)(w,"operation-not-supported-in-this-environment")}_openRedirect(w,v,A,W){var ve=this;return(0,T.Z)(function*(){!function Ve(I){var w,v,A,W,ve,me,Oe,lt,fe,Dt;const De=Nt();(0,x.aC)("function"==typeof(null===(w=De?.universalLinks)||void 0===w?void 0:w.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,x.aC)(typeof(null===(v=De?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,x.aC)("function"==typeof(null===(ve=null===(W=null===(A=De?.cordova)||void 0===A?void 0:A.plugins)||void 0===W?void 0:W.browsertab)||void 0===ve?void 0:ve.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(lt=null===(Oe=null===(me=De?.cordova)||void 0===me?void 0:me.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===lt?void 0:lt.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,x.aC)("function"==typeof(null===(Dt=null===(fe=De?.cordova)||void 0===fe?void 0:fe.InAppBrowser)||void 0===Dt?void 0:Dt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(w);const me=yield ve._initialize(w);yield me.initialized(),me.resetRedirect(),(0,x.aI)(),yield ve._originValidation(w);const Oe=function xr(I,w,v=null){return{type:w,eventId:v,urlResponse:null,sessionId:Ft(),postBody:null,tenantId:I.tenantId,error:(0,x.aB)(I,"no-auth-event")}}(w,A,W);yield function mn(I,w){return on()._set(hn(I),w)}(w,Oe);const lt=yield function Z(I,w,v){return ie.apply(this,arguments)}(w,Oe,v),fe=yield function pt(I){const{cordova:w}=Nt();return new Promise(v=>{w.plugins.browsertab.isAvailable(A=>{let W=null;A?w.plugins.browsertab.openUrl(I):W=w.InAppBrowser.open(I,(0,x.aA)()?"_blank":"_system","location=yes"),v(W)})})}(lt);return function An(I,w,v){return rt.apply(this,arguments)}(w,me,fe)})()}_isIframeWebStorageSupported(w,v){throw new Error("Method not implemented.")}_originValidation(w){const v=w._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Te(I){return He.apply(this,arguments)}(w)),this.originValidationPromises[v]}attachCallbackListeners(w,v){const{universalLinks:A,handleOpenURL:W,BuildInfo:ve}=Nt(),me=setTimeout((0,T.Z)(function*(){yield qe(w),v.onEvent($())}),500),Oe=function(){var Dt=(0,T.Z)(function*(De){clearTimeout(me);const Vn=yield qe(w);let Gs=null;Vn&&De?.url&&(Gs=function ot(I,w){var v,A;const W=function gi(I){const w=Le(I),v=w.link?decodeURIComponent(w.link):void 0,A=Le(v).link,W=w.deep_link_id?decodeURIComponent(w.deep_link_id):void 0;return Le(W).link||W||A||v||I}(w);if(W.includes("/__/auth/callback")){const ve=Le(W),me=ve.firebaseError?function pi(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(ve.firebaseError)):null,Oe=null===(A=null===(v=me?.code)||void 0===v?void 0:v.split("auth/"))||void 0===A?void 0:A[1],lt=Oe?(0,x.aB)(Oe):null;return lt?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:lt,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:W,postBody:null}}return null}(Vn,De.url)),v.onEvent(Gs||$())});return function(Vn){return Dt.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,Oe);const lt=W,fe=`${ve.packageName.toLowerCase()}://`;Nt().handleOpenURL=function(){var Dt=(0,T.Z)(function*(De){if(De.toLowerCase().startsWith(fe)&&Oe({url:De}),"function"==typeof lt)try{lt(De)}catch(Vn){console.error(Vn)}});return function(De){return Dt.apply(this,arguments)}}()}};function $(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,x.aB)("no-auth-event")}}function ae(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function de(I=(0,Ce.z$)()){return!("file:"!==ae()&&"ionic:"!==ae()&&"capacitor:"!==ae()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kt(){try{const I=self.localStorage,w=x.aN();if(I)return I.setItem(w,"1"),I.removeItem(w),!function bt(I=(0,Ce.z$)()){return function at(){return(0,Ce.w1)()&&11===document?.documentMode}()||function Ut(I=(0,Ce.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,Ce.hl)()}catch{return bn()&&(0,Ce.hl)()}return!1}function bn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sn(){return(function Je(){return"http:"===ae()||"https:"===ae()}()||(0,Ce.ru)()||de())&&!function Se(){return(0,Ce.b$)()||(0,Ce.UG)()}()&&Kt()&&!bn()}function Un(){return de()&&typeof document<"u"}function mi(){return(mi=(0,T.Z)(function*(){return!!Un()&&new Promise(I=>{const w=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(w),I(!0)})})})).apply(this,arguments)}const et={LOCAL:"local",NONE:"none",SESSION:"session"},Oi=x.aC,ki="persistence";function yi(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,T.Z)(function*(I){yield I._initializationPromise;const w=Vr(),v=x.aF(ki,I.config.apiKey,I.name);w&&w.setItem(v,I._getPersistence())})).apply(this,arguments)}function Vr(){var I;try{return(null===(I=function xi(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Fr=x.aC;class Bn{constructor(){this.browserResolver=x.aE(x.k),this.cordovaResolver=x.aE(L),this.underlyingResolver=null,this._redirectPersistence=x.a,this._completeRedirectFn=x.aG,this._overrideRedirectResult=x.aH}_initialize(w){var v=this;return(0,T.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(w)})()}_openPopup(w,v,A,W){var ve=this;return(0,T.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._openPopup(w,v,A,W)})()}_openRedirect(w,v,A,W){var ve=this;return(0,T.Z)(function*(){return yield ve.selectUnderlyingResolver(),ve.assertedUnderlyingResolver._openRedirect(w,v,A,W)})()}_isIframeWebStorageSupported(w,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(w,v)}_originValidation(w){return this.assertedUnderlyingResolver._originValidation(w)}get _shouldInitProactively(){return Un()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var w=this;return(0,T.Z)(function*(){if(w.underlyingResolver)return;const v=yield function Er(){return mi.apply(this,arguments)}();w.underlyingResolver=v?w.cordovaResolver:w.browserResolver})()}}function yt(I){return I.unwrap()}function fn(I){return Qt(I)}function Qt(I){const{_tokenResponse:w}=I instanceof Ce.ZR?I.customData:I;if(!w)return null;if(!(I instanceof Ce.ZR)&&"temporaryProof"in w&&"phoneNumber"in w)return x.P.credentialFromResult(I);const v=w.providerId;if(!v||v===x.p.PASSWORD)return null;let A;switch(v){case x.p.GOOGLE:A=x.X;break;case x.p.FACEBOOK:A=x.W;break;case x.p.GITHUB:A=x.Y;break;case x.p.TWITTER:A=x.$;break;default:const{oauthIdToken:W,oauthAccessToken:ve,oauthTokenSecret:me,pendingToken:Oe,nonce:lt}=w;return ve||me||W||Oe?Oe?v.startsWith("saml.")?x.aQ._create(v,Oe):x.N._fromParams({providerId:v,signInMethod:v,pendingToken:Oe,idToken:W,accessToken:ve}):new x.Z(v).credential({idToken:W,accessToken:ve,rawNonce:lt}):null}return I instanceof Ce.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function an(I,w){return w.catch(v=>{throw v instanceof Ce.ZR&&function Fa(I,w){var v;const A=null===(v=w.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===w?.code)w.resolver=new vi(I,x.as(I,w));else if(A){const W=Qt(w),ve=w;W&&(ve.credential=W,ve.tenantId=A.tenantId||void 0,ve.email=A.email||void 0,ve.phoneNumber=A.phoneNumber||void 0)}}(I,v),v}).then(v=>{const W=v.user;return{operationType:v.operationType,credential:fn(v),additionalUserInfo:x.aq(v),user:Rn.getOrCreate(W)}})}function Vi(I,w){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,T.Z)(function*(I,w){const v=yield w;return{verificationId:v.verificationId,confirm:A=>an(I,v.confirm(A))}})).apply(this,arguments)}class vi{constructor(w,v){this.resolver=v,this.auth=function Lr(I){return I.wrapped()}(w)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(w){return an(yt(this.auth),this.resolver.resolveSignIn(w))}}class Rn{constructor(w){this._delegate=w,this.multiFactor=x.at(w)}static getOrCreate(w){return Rn.USER_MAP.has(w)||Rn.USER_MAP.set(w,new Rn(w)),Rn.USER_MAP.get(w)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(w){return this._delegate.getIdTokenResult(w)}getIdToken(w){return this._delegate.getIdToken(w)}linkAndRetrieveDataWithCredential(w){return this.linkWithCredential(w)}linkWithCredential(w){var v=this;return(0,T.Z)(function*(){return an(v.auth,x.a2(v._delegate,w))})()}linkWithPhoneNumber(w,v){var A=this;return(0,T.Z)(function*(){return Vi(A.auth,x.l(A._delegate,w,v))})()}linkWithPopup(w){var v=this;return(0,T.Z)(function*(){return an(v.auth,x.d(v._delegate,w,Bn))})()}linkWithRedirect(w){var v=this;return(0,T.Z)(function*(){return yield yi(x.aJ(v.auth)),x.g(v._delegate,w,Bn)})()}reauthenticateAndRetrieveDataWithCredential(w){return this.reauthenticateWithCredential(w)}reauthenticateWithCredential(w){var v=this;return(0,T.Z)(function*(){return an(v.auth,x.a3(v._delegate,w))})()}reauthenticateWithPhoneNumber(w,v){return Vi(this.auth,x.r(this._delegate,w,v))}reauthenticateWithPopup(w){return an(this.auth,x.e(this._delegate,w,Bn))}reauthenticateWithRedirect(w){var v=this;return(0,T.Z)(function*(){return yield yi(x.aJ(v.auth)),x.h(v._delegate,w,Bn)})()}sendEmailVerification(w){return x.ag(this._delegate,w)}unlink(w){var v=this;return(0,T.Z)(function*(){return yield x.ap(v._delegate,w),v})()}updateEmail(w){return x.al(this._delegate,w)}updatePassword(w){return x.am(this._delegate,w)}updatePhoneNumber(w){return x.u(this._delegate,w)}updateProfile(w){return x.ak(this._delegate,w)}verifyBeforeUpdateEmail(w,v){return x.ah(this._delegate,w,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Rn.USER_MAP=new WeakMap;const _n=x.aC;let Jn=(()=>{class I{constructor(v,A){if(this.app=v,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=v.options;_n(W,"invalid-api-key",{appName:v.name}),_n(W,"invalid-api-key",{appName:v.name});const ve=typeof window<"u"?Bn:void 0;this._delegate=A.initialize({options:{persistence:xo(W,v.name),popupRedirectResolver:ve}}),this._delegate._updateErrorMap(x.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Rn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,A){x.K(this._delegate,v,A)}applyActionCode(v){return x.a7(this._delegate,v)}checkActionCode(v){return x.a8(this._delegate,v)}confirmPasswordReset(v,A){return x.a6(this._delegate,v,A)}createUserWithEmailAndPassword(v,A){var W=this;return(0,T.Z)(function*(){return an(W._delegate,x.aa(W._delegate,v,A))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return x.af(this._delegate,v)}isSignInWithEmailLink(v){return x.ad(this._delegate,v)}getRedirectResult(){var v=this;return(0,T.Z)(function*(){_n(Sn(),v._delegate,"operation-not-supported-in-this-environment");const A=yield x.j(v._delegate,Bn);return A?an(v._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function j(I,w){(0,x.aJ)(I)._logFramework(w)}(this._delegate,v)}onAuthStateChanged(v,A,W){const{next:ve,error:me,complete:Oe}=Ur(v,A,W);return this._delegate.onAuthStateChanged(ve,me,Oe)}onIdTokenChanged(v,A,W){const{next:ve,error:me,complete:Oe}=Ur(v,A,W);return this._delegate.onIdTokenChanged(ve,me,Oe)}sendSignInLinkToEmail(v,A){return x.ac(this._delegate,v,A)}sendPasswordResetEmail(v,A){return x.a5(this._delegate,v,A||void 0)}setPersistence(v){var A=this;return(0,T.Z)(function*(){let W;switch(function _i(I,w){Oi(Object.values(et).includes(w),I,"invalid-persistence-type"),(0,Ce.b$)()?Oi(w!==et.SESSION,I,"unsupported-persistence-type"):(0,Ce.UG)()?Oi(w===et.NONE,I,"unsupported-persistence-type"):bn()?Oi(w===et.NONE||w===et.LOCAL&&(0,Ce.hl)(),I,"unsupported-persistence-type"):Oi(w===et.NONE||Kt(),I,"unsupported-persistence-type")}(A._delegate,v),v){case et.SESSION:W=x.a;break;case et.LOCAL:W=(yield x.aE(x.i)._isAvailable())?x.i:x.b;break;case et.NONE:W=x.U;break;default:return x.ax("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return an(this._delegate,x.a0(this._delegate))}signInWithCredential(v){return an(this._delegate,x.a1(this._delegate,v))}signInWithCustomToken(v){return an(this._delegate,x.a4(this._delegate,v))}signInWithEmailAndPassword(v,A){return an(this._delegate,x.ab(this._delegate,v,A))}signInWithEmailLink(v,A){return an(this._delegate,x.ae(this._delegate,v,A))}signInWithPhoneNumber(v,A){return Vi(this._delegate,x.s(this._delegate,v,A))}signInWithPopup(v){var A=this;return(0,T.Z)(function*(){return _n(Sn(),A._delegate,"operation-not-supported-in-this-environment"),an(A._delegate,x.c(A._delegate,v,Bn))})()}signInWithRedirect(v){var A=this;return(0,T.Z)(function*(){return _n(Sn(),A._delegate,"operation-not-supported-in-this-environment"),yield yi(A._delegate),x.f(A._delegate,v,Bn)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return x.a9(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=et,I})();function Ur(I,w,v){let A=I;"function"!=typeof I&&({next:A,error:w,complete:v}=I);const W=A;return{next:me=>W(me&&Rn.getOrCreate(me)),error:w,complete:v}}function xo(I,w){const v=function kr(I,w){const v=Vr();if(!v)return[];const A=x.aF(ki,I,w);switch(v.getItem(A)){case et.NONE:return[x.U];case et.LOCAL:return[x.i,x.a];case et.SESSION:return[x.a];default:return[]}}(I,w);if(typeof self<"u"&&!v.includes(x.i)&&v.push(x.i),typeof window<"u")for(const A of[x.b,x.a])v.includes(A)||v.push(A);return v.includes(x.U)||v.push(x.U),v}class ms{constructor(){this.providerId="phone",this._delegate=new x.P(yt(q.Z.auth()))}static credential(w,v){return x.P.credential(w,v)}verifyPhoneNumber(w,v){return this._delegate.verifyPhoneNumber(w,v)}unwrap(){return this._delegate}}ms.PHONE_SIGN_IN_METHOD=x.P.PHONE_SIGN_IN_METHOD,ms.PROVIDER_ID=x.P.PROVIDER_ID;const qs=x.aC;class Li{constructor(w,v,A=q.Z.app()){var W;qs(null===(W=A.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new x.R(A.auth(),w,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D(I){I.INTERNAL.registerComponent(new dn.wA("auth-compat",w=>{const v=w.getProvider("app-compat").getImmediate(),A=w.getProvider("auth");return new Jn(v,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:x.A.EMAIL_SIGNIN,PASSWORD_RESET:x.A.PASSWORD_RESET,RECOVER_EMAIL:x.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:x.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:x.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:x.A.VERIFY_EMAIL}},EmailAuthProvider:x.V,FacebookAuthProvider:x.W,GithubAuthProvider:x.Y,GoogleAuthProvider:x.X,OAuthProvider:x.Z,SAMLAuthProvider:x._,PhoneAuthProvider:ms,PhoneMultiFactorGenerator:x.m,RecaptchaVerifier:Li,TwitterAuthProvider:x.$,Auth:Jn,AuthCredential:x.L,Error:Ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.5.0")}(q.Z)},861:(Mi,Dn,Me)=>{function T(x,Ce,ft,Gt,dn,Nt,ct){try{var Z=x[Nt](ct),ie=Z.value}catch(Te){return void ft(Te)}Z.done?Ce(ie):Promise.resolve(ie).then(Gt,dn)}function q(x){return function(){var Ce=this,ft=arguments;return new Promise(function(Gt,dn){var Nt=x.apply(Ce,ft);function ct(ie){T(Nt,Gt,dn,ct,Z,"next",ie)}function Z(ie){T(Nt,Gt,dn,ct,Z,"throw",ie)}ct(void 0)})}}Me.d(Dn,{Z:()=>q})},582:(Mi,Dn,Me)=>{function Ce(L,$){var j={};for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&$.indexOf(V)<0&&(j[V]=L[V]);if(null!=L&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(V=Object.getOwnPropertySymbols(L);Q<V.length;Q++)$.indexOf(V[Q])<0&&Object.prototype.propertyIsEnumerable.call(L,V[Q])&&(j[V[Q]]=L[V[Q]])}return j}function Te(L,$,j,V){return new(j||(j=Promise))(function(K,ae){function Je(at){try{Se(V.next(at))}catch(Ut){ae(Ut)}}function de(at){try{Se(V.throw(at))}catch(Ut){ae(Ut)}}function Se(at){at.done?K(at.value):function Q(K){return K instanceof j?K:new j(function(ae){ae(K)})}(at.value).then(Je,de)}Se((V=V.apply(L,$||[])).next())})}function Xe(L){return this instanceof Xe?(this.v=L,this):new Xe(L)}function Et(L,$,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,V=j.apply(L,$||[]),K=[];return Q={},ae("next"),ae("throw"),ae("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function ae(bt){V[bt]&&(Q[bt]=function(Kt){return new Promise(function(bn,Sn){K.push([bt,Kt,bn,Sn])>1||Je(bt,Kt)})})}function Je(bt,Kt){try{!function de(bt){bt.value instanceof Xe?Promise.resolve(bt.value.v).then(Se,at):Ut(K[0][2],bt)}(V[bt](Kt))}catch(bn){Ut(K[0][3],bn)}}function Se(bt){Je("next",bt)}function at(bt){Je("throw",bt)}function Ut(bt,Kt){bt(Kt),K.shift(),K.length&&Je(K[0][0],K[0][1])}}function mn(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,$=L[Symbol.asyncIterator];return $?$.call(L):(L=function rt(L){var $="function"==typeof Symbol&&Symbol.iterator,j=$&&L[$],V=0;if(j)return j.call(L);if(L&&"number"==typeof L.length)return{next:function(){return L&&V>=L.length&&(L=void 0),{value:L&&L[V++],done:!L}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(L),j={},V("next"),V("throw"),V("return"),j[Symbol.asyncIterator]=function(){return this},j);function V(K){j[K]=L[K]&&function(ae){return new Promise(function(Je,de){!function Q(K,ae,Je,de){Promise.resolve(de).then(function(Se){K({value:Se,done:Je})},ae)}(Je,de,(ae=L[K](ae)).done,ae.value)})}}}Me.d(Dn,{FC:()=>Et,KL:()=>mn,_T:()=>Ce,mG:()=>Te,qq:()=>Xe}),"function"==typeof SuppressedError&&SuppressedError}},Mi=>{Mi(Mi.s=127)}]);